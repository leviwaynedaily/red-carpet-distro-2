var r1=t=>{throw TypeError(t)};var yg=(t,e,n)=>e.has(t)||r1("Cannot "+n);var D=(t,e,n)=>(yg(t,e,"read from private field"),n?n.call(t):e.get(t)),Me=(t,e,n)=>e.has(t)?r1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),he=(t,e,n,r)=>(yg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ue=(t,e,n)=>(yg(t,e,"access private method"),n);var xf=(t,e,n,r)=>({set _(s){he(t,e,s,n)},get _(){return D(t,e,r)}});function FP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ow(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function NF(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var $P={exports:{}},Kp={},BP={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld=Symbol.for("react.element"),RF=Symbol.for("react.portal"),MF=Symbol.for("react.fragment"),AF=Symbol.for("react.strict_mode"),OF=Symbol.for("react.profiler"),jF=Symbol.for("react.provider"),DF=Symbol.for("react.context"),IF=Symbol.for("react.forward_ref"),LF=Symbol.for("react.suspense"),FF=Symbol.for("react.memo"),$F=Symbol.for("react.lazy"),s1=Symbol.iterator;function BF(t){return t===null||typeof t!="object"?null:(t=s1&&t[s1]||t["@@iterator"],typeof t=="function"?t:null)}var zP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VP=Object.assign,UP={};function yc(t,e,n){this.props=t,this.context=e,this.refs=UP,this.updater=n||zP}yc.prototype.isReactComponent={};yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WP(){}WP.prototype=yc.prototype;function jw(t,e,n){this.props=t,this.context=e,this.refs=UP,this.updater=n||zP}var Dw=jw.prototype=new WP;Dw.constructor=jw;VP(Dw,yc.prototype);Dw.isPureReactComponent=!0;var o1=Array.isArray,HP=Object.prototype.hasOwnProperty,Iw={current:null},KP={key:!0,ref:!0,__self:!0,__source:!0};function qP(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)HP.call(e,r)&&!KP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ld,type:t,key:o,ref:i,props:s,_owner:Iw.current}}function zF(t,e){return{$$typeof:Ld,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ld}function VF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var i1=/\/+/g;function vg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VF(""+t.key):e.toString(36)}function fh(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Ld:case RF:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+vg(i,0):r,o1(s)?(n="",t!=null&&(n=t.replace(i1,"$&/")+"/"),fh(s,e,n,"",function(c){return c})):s!=null&&(Lw(s)&&(s=zF(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(i1,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",o1(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+vg(o,a);i+=fh(o,e,n,l,s)}else if(l=BF(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+vg(o,a++),i+=fh(o,e,n,l,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function bf(t,e,n){if(t==null)return t;var r=[],s=0;return fh(t,r,"","",function(o){return e.call(n,o,s++)}),r}function UF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dn={current:null},hh={transition:null},WF={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:hh,ReactCurrentOwner:Iw};function GP(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:bf,forEach:function(t,e,n){bf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bf(t,function(){e++}),e},toArray:function(t){return bf(t,function(e){return e})||[]},only:function(t){if(!Lw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=yc;ze.Fragment=MF;ze.Profiler=OF;ze.PureComponent=jw;ze.StrictMode=AF;ze.Suspense=LF;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WF;ze.act=GP;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VP({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=Iw.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)HP.call(e,l)&&!KP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ld,type:t.type,key:s,ref:o,props:r,_owner:i}};ze.createContext=function(t){return t={$$typeof:DF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jF,_context:t},t.Consumer=t};ze.createElement=qP;ze.createFactory=function(t){var e=qP.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:IF,render:t}};ze.isValidElement=Lw;ze.lazy=function(t){return{$$typeof:$F,_payload:{_status:-1,_result:t},_init:UF}};ze.memo=function(t,e){return{$$typeof:FF,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=hh.transition;hh.transition={};try{t()}finally{hh.transition=e}};ze.unstable_act=GP;ze.useCallback=function(t,e){return Dn.current.useCallback(t,e)};ze.useContext=function(t){return Dn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return Dn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return Dn.current.useEffect(t,e)};ze.useId=function(){return Dn.current.useId()};ze.useImperativeHandle=function(t,e,n){return Dn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return Dn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return Dn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return Dn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return Dn.current.useReducer(t,e,n)};ze.useRef=function(t){return Dn.current.useRef(t)};ze.useState=function(t){return Dn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return Dn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return Dn.current.useTransition()};ze.version="18.3.1";BP.exports=ze;var g=BP.exports;const ee=Ow(g),Fw=FP({__proto__:null,default:ee},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HF=g,KF=Symbol.for("react.element"),qF=Symbol.for("react.fragment"),GF=Object.prototype.hasOwnProperty,JF=HF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YF={key:!0,ref:!0,__self:!0,__source:!0};function JP(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)GF.call(e,r)&&!YF.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:KF,type:t,key:o,ref:i,props:s,_owner:JF.current}}Kp.Fragment=qF;Kp.jsx=JP;Kp.jsxs=JP;$P.exports=Kp;var h=$P.exports,nv={},YP={exports:{}},pr={},QP={exports:{}},XP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,O){var $=N.length;N.push(O);e:for(;0<$;){var U=$-1>>>1,M=N[U];if(0<s(M,O))N[U]=O,N[$]=M,$=U;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var O=N[0],$=N.pop();if($!==O){N[0]=$;e:for(var U=0,M=N.length,F=M>>>1;U<F;){var J=2*(U+1)-1,Y=N[J],W=J+1,H=N[W];if(0>s(Y,$))W<M&&0>s(H,Y)?(N[U]=H,N[W]=$,U=W):(N[U]=Y,N[J]=$,U=J);else if(W<M&&0>s(H,$))N[U]=H,N[W]=$,U=W;else break e}}return O}function s(N,O){var $=N.sortIndex-O.sortIndex;return $!==0?$:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,y=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=N)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function C(N){if(m=!1,b(N),!y)if(n(l)!==null)y=!0,K(E);else{var O=n(c);O!==null&&I(C,O.startTime-N)}}function E(N,O){y=!1,m&&(m=!1,v(S),S=-1),p=!0;var $=f;try{for(b(O),d=n(l);d!==null&&(!(d.expirationTime>O)||N&&!R());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var M=U(d.expirationTime<=O);O=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(l)&&r(l),b(O)}else r(l);d=n(l)}if(d!==null)var F=!0;else{var J=n(c);J!==null&&I(C,J.startTime-O),F=!1}return F}finally{d=null,f=$,p=!1}}var k=!1,P=null,S=-1,T=5,_=-1;function R(){return!(t.unstable_now()-_<T)}function j(){if(P!==null){var N=t.unstable_now();_=N;var O=!0;try{O=P(!0,N)}finally{O?V():(k=!1,P=null)}}else k=!1}var V;if(typeof x=="function")V=function(){x(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,te=B.port2;B.port1.onmessage=j,V=function(){te.postMessage(null)}}else V=function(){w(j,0)};function K(N){P=N,k||(k=!0,V())}function I(N,O){S=w(function(){N(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,K(E))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var $=f;f=O;try{return N()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=f;f=N;try{return O()}finally{f=$}},t.unstable_scheduleCallback=function(N,O,$){var U=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?U+$:U):$=U,N){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=$+M,N={id:u++,callback:O,priorityLevel:N,startTime:$,expirationTime:M,sortIndex:-1},$>U?(N.sortIndex=$,e(c,N),n(l)===null&&N===n(c)&&(m?(v(S),S=-1):m=!0,I(C,$-U))):(N.sortIndex=M,e(l,N),y||p||(y=!0,K(E))),N},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(N){var O=f;return function(){var $=f;f=O;try{return N.apply(this,arguments)}finally{f=$}}}})(XP);QP.exports=XP;var QF=QP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XF=g,fr=QF;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZP=new Set,Vu={};function wa(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(Vu[t]=e,t=0;t<e.length;t++)ZP.add(e[t])}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rv=Object.prototype.hasOwnProperty,ZF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a1={},l1={};function e$(t){return rv.call(l1,t)?!0:rv.call(a1,t)?!1:ZF.test(t)?l1[t]=!0:(a1[t]=!0,!1)}function t$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n$(t,e,n,r){if(e===null||typeof e>"u"||t$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function In(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new In(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new In(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new In(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new In(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new In(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new In(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new In(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new In(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new In(t,5,!1,t.toLowerCase(),null,!1,!1)});var $w=/[\-:]([a-z])/g;function Bw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($w,Bw);cn[e]=new In(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($w,Bw);cn[e]=new In(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($w,Bw);cn[e]=new In(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new In(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new In("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new In(t,1,!1,t.toLowerCase(),null,!0,!0)});function zw(t,e,n,r){var s=cn.hasOwnProperty(e)?cn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n$(e,n,s,r)&&(n=null),r||s===null?e$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zs=XF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sf=Symbol.for("react.element"),Za=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),e_=Symbol.for("react.provider"),t_=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),ov=Symbol.for("react.suspense"),iv=Symbol.for("react.suspense_list"),Ww=Symbol.for("react.memo"),po=Symbol.for("react.lazy"),n_=Symbol.for("react.offscreen"),c1=Symbol.iterator;function Fc(t){return t===null||typeof t!="object"?null:(t=c1&&t[c1]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,wg;function nu(t){if(wg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wg=e&&e[1]||""}return`
`+wg+t}var xg=!1;function bg(t,e){if(!t||xg)return"";xg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var l=`
`+s[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{xg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nu(t):""}function r$(t){switch(t.tag){case 5:return nu(t.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return t=bg(t.type,!1),t;case 11:return t=bg(t.type.render,!1),t;case 1:return t=bg(t.type,!0),t;default:return""}}function av(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case el:return"Fragment";case Za:return"Portal";case sv:return"Profiler";case Vw:return"StrictMode";case ov:return"Suspense";case iv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t_:return(t.displayName||"Context")+".Consumer";case e_:return(t._context.displayName||"Context")+".Provider";case Uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ww:return e=t.displayName||null,e!==null?e:av(t.type)||"Memo";case po:e=t._payload,t=t._init;try{return av(t(e))}catch{}}return null}function s$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return av(e);case 8:return e===Vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function o$(t){var e=r_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cf(t){t._valueTracker||(t._valueTracker=o$(t))}function s_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lv(t,e){var n=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function u1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o_(t,e){e=e.checked,e!=null&&zw(t,"checked",e,!1)}function cv(t,e){o_(t,e);var n=Qo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uv(t,e.type,n):e.hasOwnProperty("defaultValue")&&uv(t,e.type,Qo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function d1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uv(t,e,n){(e!=="number"||Dh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function vl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function f1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(ru(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qo(n)}}function i_(t,e){var n=Qo(e.value),r=Qo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function h1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ef,l_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ef=Ef||document.createElement("div"),Ef.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ef.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i$=["Webkit","ms","Moz","O"];Object.keys(vu).forEach(function(t){i$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vu[e]=vu[t]})});function c_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vu.hasOwnProperty(t)&&vu[t]?(""+e).trim():e+"px"}function u_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=c_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var a$=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(t,e){if(e){if(a$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function pv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mv=null;function Hw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gv=null,wl=null,xl=null;function p1(t){if(t=Bd(t)){if(typeof gv!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Qp(e),gv(t.stateNode,t.type,e))}}function d_(t){wl?xl?xl.push(t):xl=[t]:wl=t}function f_(){if(wl){var t=wl,e=xl;if(xl=wl=null,p1(t),e)for(t=0;t<e.length;t++)p1(e[t])}}function h_(t,e){return t(e)}function p_(){}var Sg=!1;function m_(t,e,n){if(Sg)return t(e,n);Sg=!0;try{return h_(t,e,n)}finally{Sg=!1,(wl!==null||xl!==null)&&(p_(),f_())}}function Wu(t,e){var n=t.stateNode;if(n===null)return null;var r=Qp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var yv=!1;if(Ws)try{var $c={};Object.defineProperty($c,"passive",{get:function(){yv=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{yv=!1}function l$(t,e,n,r,s,o,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var wu=!1,Ih=null,Lh=!1,vv=null,c$={onError:function(t){wu=!0,Ih=t}};function u$(t,e,n,r,s,o,i,a,l){wu=!1,Ih=null,l$.apply(c$,arguments)}function d$(t,e,n,r,s,o,i,a,l){if(u$.apply(this,arguments),wu){if(wu){var c=Ih;wu=!1,Ih=null}else throw Error(ne(198));Lh||(Lh=!0,vv=c)}}function xa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function m1(t){if(xa(t)!==t)throw Error(ne(188))}function f$(t){var e=t.alternate;if(!e){if(e=xa(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return m1(s),t;if(o===r)return m1(s),e;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function y_(t){return t=f$(t),t!==null?v_(t):null}function v_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v_(t);if(e!==null)return e;t=t.sibling}return null}var w_=fr.unstable_scheduleCallback,g1=fr.unstable_cancelCallback,h$=fr.unstable_shouldYield,p$=fr.unstable_requestPaint,jt=fr.unstable_now,m$=fr.unstable_getCurrentPriorityLevel,Kw=fr.unstable_ImmediatePriority,x_=fr.unstable_UserBlockingPriority,Fh=fr.unstable_NormalPriority,g$=fr.unstable_LowPriority,b_=fr.unstable_IdlePriority,qp=null,gs=null;function y$(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(qp,t,void 0,(t.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:x$,v$=Math.log,w$=Math.LN2;function x$(t){return t>>>=0,t===0?32:31-(v$(t)/w$|0)|0}var kf=64,Tf=4194304;function su(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=su(a):(o&=i,o!==0&&(r=su(o)))}else i=n&~s,i!==0?r=su(i):o!==0&&(r=su(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kr(e),s=1<<n,r|=t[n],e&=~s;return r}function b$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-Kr(o),a=1<<i,l=s[i];l===-1?(!(a&n)||a&r)&&(s[i]=b$(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function wv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S_(){var t=kf;return kf<<=1,!(kf&4194240)&&(kf=64),t}function Cg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kr(e),t[e]=n}function C$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kr(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function qw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var rt=0;function C_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var E_,Gw,k_,T_,P_,xv=!1,Pf=[],Io=null,Lo=null,Fo=null,Hu=new Map,Ku=new Map,wo=[],E$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y1(t,e){switch(t){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":Hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(e.pointerId)}}function Bc(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Bd(e),e!==null&&Gw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function k$(t,e,n,r,s){switch(e){case"focusin":return Io=Bc(Io,t,e,n,r,s),!0;case"dragenter":return Lo=Bc(Lo,t,e,n,r,s),!0;case"mouseover":return Fo=Bc(Fo,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return Hu.set(o,Bc(Hu.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ku.set(o,Bc(Ku.get(o)||null,t,e,n,r,s)),!0}return!1}function __(t){var e=Oi(t.target);if(e!==null){var n=xa(e);if(n!==null){if(e=n.tag,e===13){if(e=g_(n),e!==null){t.blockedOn=e,P_(t.priority,function(){k_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ph(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mv=r,n.target.dispatchEvent(r),mv=null}else return e=Bd(n),e!==null&&Gw(e),t.blockedOn=n,!1;e.shift()}return!0}function v1(t,e,n){ph(t)&&n.delete(e)}function T$(){xv=!1,Io!==null&&ph(Io)&&(Io=null),Lo!==null&&ph(Lo)&&(Lo=null),Fo!==null&&ph(Fo)&&(Fo=null),Hu.forEach(v1),Ku.forEach(v1)}function zc(t,e){t.blockedOn===e&&(t.blockedOn=null,xv||(xv=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,T$)))}function qu(t){function e(s){return zc(s,t)}if(0<Pf.length){zc(Pf[0],t);for(var n=1;n<Pf.length;n++){var r=Pf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Io!==null&&zc(Io,t),Lo!==null&&zc(Lo,t),Fo!==null&&zc(Fo,t),Hu.forEach(e),Ku.forEach(e),n=0;n<wo.length;n++)r=wo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wo.length&&(n=wo[0],n.blockedOn===null);)__(n),n.blockedOn===null&&wo.shift()}var bl=Zs.ReactCurrentBatchConfig,Bh=!0;function P$(t,e,n,r){var s=rt,o=bl.transition;bl.transition=null;try{rt=1,Jw(t,e,n,r)}finally{rt=s,bl.transition=o}}function _$(t,e,n,r){var s=rt,o=bl.transition;bl.transition=null;try{rt=4,Jw(t,e,n,r)}finally{rt=s,bl.transition=o}}function Jw(t,e,n,r){if(Bh){var s=bv(t,e,n,r);if(s===null)Og(t,e,r,zh,n),y1(t,r);else if(k$(s,t,e,n,r))r.stopPropagation();else if(y1(t,r),e&4&&-1<E$.indexOf(t)){for(;s!==null;){var o=Bd(s);if(o!==null&&E_(o),o=bv(t,e,n,r),o===null&&Og(t,e,r,zh,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Og(t,e,r,null,n)}}var zh=null;function bv(t,e,n,r){if(zh=null,t=Hw(r),t=Oi(t),t!==null)if(e=xa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zh=t,null}function N_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m$()){case Kw:return 1;case x_:return 4;case Fh:case g$:return 16;case b_:return 536870912;default:return 16}default:return 16}}var Ro=null,Yw=null,mh=null;function R_(){if(mh)return mh;var t,e=Yw,n=e.length,r,s="value"in Ro?Ro.value:Ro.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return mh=s.slice(t,1<r?1-r:void 0)}function gh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _f(){return!0}function w1(){return!1}function mr(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_f:w1,this.isPropagationStopped=w1,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_f)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_f)},persist:function(){},isPersistent:_f}),e}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qw=mr(vc),$d=Ct({},vc,{view:0,detail:0}),N$=mr($d),Eg,kg,Vc,Gp=Ct({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vc&&(Vc&&t.type==="mousemove"?(Eg=t.screenX-Vc.screenX,kg=t.screenY-Vc.screenY):kg=Eg=0,Vc=t),Eg)},movementY:function(t){return"movementY"in t?t.movementY:kg}}),x1=mr(Gp),R$=Ct({},Gp,{dataTransfer:0}),M$=mr(R$),A$=Ct({},$d,{relatedTarget:0}),Tg=mr(A$),O$=Ct({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),j$=mr(O$),D$=Ct({},vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I$=mr(D$),L$=Ct({},vc,{data:0}),b1=mr(L$),F$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=B$[t])?!!e[t]:!1}function Xw(){return z$}var V$=Ct({},$d,{key:function(t){if(t.key){var e=F$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xw,charCode:function(t){return t.type==="keypress"?gh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U$=mr(V$),W$=Ct({},Gp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S1=mr(W$),H$=Ct({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xw}),K$=mr(H$),q$=Ct({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),G$=mr(q$),J$=Ct({},Gp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y$=mr(J$),Q$=[9,13,27,32],Zw=Ws&&"CompositionEvent"in window,xu=null;Ws&&"documentMode"in document&&(xu=document.documentMode);var X$=Ws&&"TextEvent"in window&&!xu,M_=Ws&&(!Zw||xu&&8<xu&&11>=xu),C1=" ",E1=!1;function A_(t,e){switch(t){case"keyup":return Q$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function Z$(t,e){switch(t){case"compositionend":return O_(e);case"keypress":return e.which!==32?null:(E1=!0,C1);case"textInput":return t=e.data,t===C1&&E1?null:t;default:return null}}function eB(t,e){if(tl)return t==="compositionend"||!Zw&&A_(t,e)?(t=R_(),mh=Yw=Ro=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M_&&e.locale!=="ko"?null:e.data;default:return null}}var tB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tB[t.type]:e==="textarea"}function j_(t,e,n,r){d_(r),e=Vh(e,"onChange"),0<e.length&&(n=new Qw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bu=null,Gu=null;function nB(t){H_(t,0)}function Jp(t){var e=sl(t);if(s_(e))return t}function rB(t,e){if(t==="change")return e}var D_=!1;if(Ws){var Pg;if(Ws){var _g="oninput"in document;if(!_g){var T1=document.createElement("div");T1.setAttribute("oninput","return;"),_g=typeof T1.oninput=="function"}Pg=_g}else Pg=!1;D_=Pg&&(!document.documentMode||9<document.documentMode)}function P1(){bu&&(bu.detachEvent("onpropertychange",I_),Gu=bu=null)}function I_(t){if(t.propertyName==="value"&&Jp(Gu)){var e=[];j_(e,Gu,t,Hw(t)),m_(nB,e)}}function sB(t,e,n){t==="focusin"?(P1(),bu=e,Gu=n,bu.attachEvent("onpropertychange",I_)):t==="focusout"&&P1()}function oB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jp(Gu)}function iB(t,e){if(t==="click")return Jp(e)}function aB(t,e){if(t==="input"||t==="change")return Jp(e)}function lB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yr=typeof Object.is=="function"?Object.is:lB;function Ju(t,e){if(Yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rv.call(e,s)||!Yr(t[s],e[s]))return!1}return!0}function _1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function N1(t,e){var n=_1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_1(n)}}function L_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?L_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function F_(){for(var t=window,e=Dh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dh(t.document)}return e}function ex(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cB(t){var e=F_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&L_(n.ownerDocument.documentElement,n)){if(r!==null&&ex(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=N1(n,o);var i=N1(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uB=Ws&&"documentMode"in document&&11>=document.documentMode,nl=null,Sv=null,Su=null,Cv=!1;function R1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cv||nl==null||nl!==Dh(r)||(r=nl,"selectionStart"in r&&ex(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Su&&Ju(Su,r)||(Su=r,r=Vh(Sv,"onSelect"),0<r.length&&(e=new Qw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nl)))}function Nf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rl={animationend:Nf("Animation","AnimationEnd"),animationiteration:Nf("Animation","AnimationIteration"),animationstart:Nf("Animation","AnimationStart"),transitionend:Nf("Transition","TransitionEnd")},Ng={},$_={};Ws&&($_=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Yp(t){if(Ng[t])return Ng[t];if(!rl[t])return t;var e=rl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $_)return Ng[t]=e[n];return t}var B_=Yp("animationend"),z_=Yp("animationiteration"),V_=Yp("animationstart"),U_=Yp("transitionend"),W_=new Map,M1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(t,e){W_.set(t,e),wa(e,[t])}for(var Rg=0;Rg<M1.length;Rg++){var Mg=M1[Rg],dB=Mg.toLowerCase(),fB=Mg[0].toUpperCase()+Mg.slice(1);ii(dB,"on"+fB)}ii(B_,"onAnimationEnd");ii(z_,"onAnimationIteration");ii(V_,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(U_,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wa("onBeforeInput",["compositionend","keypress","textInput","paste"]);wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hB=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function A1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,d$(r,e,void 0,t),t.currentTarget=null}function H_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;A1(s,a,c),o=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;A1(s,a,c),o=l}}}if(Lh)throw t=vv,Lh=!1,vv=null,t}function dt(t,e){var n=e[_v];n===void 0&&(n=e[_v]=new Set);var r=t+"__bubble";n.has(r)||(K_(e,t,2,!1),n.add(r))}function Ag(t,e,n){var r=0;e&&(r|=4),K_(n,t,r,e)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function Yu(t){if(!t[Rf]){t[Rf]=!0,ZP.forEach(function(n){n!=="selectionchange"&&(hB.has(n)||Ag(n,!1,t),Ag(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rf]||(e[Rf]=!0,Ag("selectionchange",!1,e))}}function K_(t,e,n,r){switch(N_(e)){case 1:var s=P$;break;case 4:s=_$;break;default:s=Jw}n=s.bind(null,e,n,t),s=void 0,!yv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Og(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Oi(a),i===null)return;if(l=i.tag,l===5||l===6){r=o=i;continue e}a=a.parentNode}}r=r.return}m_(function(){var c=o,u=Hw(n),d=[];e:{var f=W_.get(t);if(f!==void 0){var p=Qw,y=t;switch(t){case"keypress":if(gh(n)===0)break e;case"keydown":case"keyup":p=U$;break;case"focusin":y="focus",p=Tg;break;case"focusout":y="blur",p=Tg;break;case"beforeblur":case"afterblur":p=Tg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=x1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=M$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=K$;break;case B_:case z_:case V_:p=j$;break;case U_:p=G$;break;case"scroll":p=N$;break;case"wheel":p=Y$;break;case"copy":case"cut":case"paste":p=I$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=S1}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,v!==null&&(C=Wu(x,v),C!=null&&m.push(Qu(x,C,b)))),w)break;x=x.return}0<m.length&&(f=new p(f,y,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==mv&&(y=n.relatedTarget||n.fromElement)&&(Oi(y)||y[Hs]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Oi(y):null,y!==null&&(w=xa(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(m=x1,C="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=S1,C="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:sl(p),b=y==null?f:sl(y),f=new m(C,x+"leave",p,n,u),f.target=w,f.relatedTarget=b,C=null,Oi(u)===c&&(m=new m(v,x+"enter",y,n,u),m.target=b,m.relatedTarget=w,C=m),w=C,p&&y)t:{for(m=p,v=y,x=0,b=m;b;b=Fa(b))x++;for(b=0,C=v;C;C=Fa(C))b++;for(;0<x-b;)m=Fa(m),x--;for(;0<b-x;)v=Fa(v),b--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Fa(m),v=Fa(v)}m=null}else m=null;p!==null&&O1(d,f,p,m,!1),y!==null&&w!==null&&O1(d,w,y,m,!0)}}e:{if(f=c?sl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=rB;else if(k1(f))if(D_)E=aB;else{E=oB;var k=sB}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=iB);if(E&&(E=E(t,c))){j_(d,E,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&uv(f,"number",f.value)}switch(k=c?sl(c):window,t){case"focusin":(k1(k)||k.contentEditable==="true")&&(nl=k,Sv=c,Su=null);break;case"focusout":Su=Sv=nl=null;break;case"mousedown":Cv=!0;break;case"contextmenu":case"mouseup":case"dragend":Cv=!1,R1(d,n,u);break;case"selectionchange":if(uB)break;case"keydown":case"keyup":R1(d,n,u)}var P;if(Zw)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else tl?A_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(M_&&n.locale!=="ko"&&(tl||S!=="onCompositionStart"?S==="onCompositionEnd"&&tl&&(P=R_()):(Ro=u,Yw="value"in Ro?Ro.value:Ro.textContent,tl=!0)),k=Vh(c,S),0<k.length&&(S=new b1(S,t,null,n,u),d.push({event:S,listeners:k}),P?S.data=P:(P=O_(n),P!==null&&(S.data=P)))),(P=X$?Z$(t,n):eB(t,n))&&(c=Vh(c,"onBeforeInput"),0<c.length&&(u=new b1("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=P))}H_(d,e)})}function Qu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Wu(t,n),o!=null&&r.unshift(Qu(t,o,s)),o=Wu(t,e),o!=null&&r.push(Qu(t,o,s))),t=t.return}return r}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O1(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Wu(n,o),l!=null&&i.unshift(Qu(n,l,a))):s||(l=Wu(n,o),l!=null&&i.push(Qu(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var pB=/\r\n?/g,mB=/\u0000|\uFFFD/g;function j1(t){return(typeof t=="string"?t:""+t).replace(pB,`
`).replace(mB,"")}function Mf(t,e,n){if(e=j1(e),j1(t)!==e&&n)throw Error(ne(425))}function Uh(){}var Ev=null,kv=null;function Tv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,gB=typeof clearTimeout=="function"?clearTimeout:void 0,D1=typeof Promise=="function"?Promise:void 0,yB=typeof queueMicrotask=="function"?queueMicrotask:typeof D1<"u"?function(t){return D1.resolve(null).then(t).catch(vB)}:Pv;function vB(t){setTimeout(function(){throw t})}function jg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),qu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qu(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function I1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wc=Math.random().toString(36).slice(2),ps="__reactFiber$"+wc,Xu="__reactProps$"+wc,Hs="__reactContainer$"+wc,_v="__reactEvents$"+wc,wB="__reactListeners$"+wc,xB="__reactHandles$"+wc;function Oi(t){var e=t[ps];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hs]||n[ps]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=I1(t);t!==null;){if(n=t[ps])return n;t=I1(t)}return e}t=n,n=t.parentNode}return null}function Bd(t){return t=t[ps]||t[Hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Qp(t){return t[Xu]||null}var Nv=[],ol=-1;function ai(t){return{current:t}}function ft(t){0>ol||(t.current=Nv[ol],Nv[ol]=null,ol--)}function lt(t,e){ol++,Nv[ol]=t.current,t.current=e}var Xo={},Sn=ai(Xo),Kn=ai(!1),na=Xo;function Gl(t,e){var n=t.type.contextTypes;if(!n)return Xo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qn(t){return t=t.childContextTypes,t!=null}function Wh(){ft(Kn),ft(Sn)}function L1(t,e,n){if(Sn.current!==Xo)throw Error(ne(168));lt(Sn,e),lt(Kn,n)}function q_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,s$(t)||"Unknown",s));return Ct({},n,r)}function Hh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xo,na=Sn.current,lt(Sn,t),lt(Kn,Kn.current),!0}function F1(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=q_(t,e,na),r.__reactInternalMemoizedMergedChildContext=t,ft(Kn),ft(Sn),lt(Sn,t)):ft(Kn),lt(Kn,n)}var Is=null,Xp=!1,Dg=!1;function G_(t){Is===null?Is=[t]:Is.push(t)}function bB(t){Xp=!0,G_(t)}function li(){if(!Dg&&Is!==null){Dg=!0;var t=0,e=rt;try{var n=Is;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Is=null,Xp=!1}catch(s){throw Is!==null&&(Is=Is.slice(t+1)),w_(Kw,li),s}finally{rt=e,Dg=!1}}return null}var il=[],al=0,Kh=null,qh=0,Sr=[],Cr=0,ra=null,Ls=1,Fs="";function Si(t,e){il[al++]=qh,il[al++]=Kh,Kh=t,qh=e}function J_(t,e,n){Sr[Cr++]=Ls,Sr[Cr++]=Fs,Sr[Cr++]=ra,ra=t;var r=Ls;t=Fs;var s=32-Kr(r)-1;r&=~(1<<s),n+=1;var o=32-Kr(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ls=1<<32-Kr(e)+s|n<<s|r,Fs=o+t}else Ls=1<<o|n<<s|r,Fs=t}function tx(t){t.return!==null&&(Si(t,1),J_(t,1,0))}function nx(t){for(;t===Kh;)Kh=il[--al],il[al]=null,qh=il[--al],il[al]=null;for(;t===ra;)ra=Sr[--Cr],Sr[Cr]=null,Fs=Sr[--Cr],Sr[Cr]=null,Ls=Sr[--Cr],Sr[Cr]=null}var lr=null,ar=null,pt=!1,Ur=null;function Y_(t,e){var n=kr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lr=t,ar=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lr=t,ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ra!==null?{id:Ls,overflow:Fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lr=t,ar=null,!0):!1;default:return!1}}function Rv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mv(t){if(pt){var e=ar;if(e){var n=e;if(!$1(t,e)){if(Rv(t))throw Error(ne(418));e=$o(n.nextSibling);var r=lr;e&&$1(t,e)?Y_(r,n):(t.flags=t.flags&-4097|2,pt=!1,lr=t)}}else{if(Rv(t))throw Error(ne(418));t.flags=t.flags&-4097|2,pt=!1,lr=t}}}function B1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lr=t}function Af(t){if(t!==lr)return!1;if(!pt)return B1(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tv(t.type,t.memoizedProps)),e&&(e=ar)){if(Rv(t))throw Q_(),Error(ne(418));for(;e;)Y_(t,e),e=$o(e.nextSibling)}if(B1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ar=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ar=null}}else ar=lr?$o(t.stateNode.nextSibling):null;return!0}function Q_(){for(var t=ar;t;)t=$o(t.nextSibling)}function Jl(){ar=lr=null,pt=!1}function rx(t){Ur===null?Ur=[t]:Ur.push(t)}var SB=Zs.ReactCurrentBatchConfig;function Uc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Of(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function z1(t){var e=t._init;return e(t._payload)}function X_(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Uo(v,x),v.index=0,v.sibling=null,v}function o(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,C){return x===null||x.tag!==6?(x=Vg(b,v.mode,C),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,C){var E=b.type;return E===el?u(v,x,b.props.children,C,b.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===po&&z1(E)===x.type)?(C=s(x,b.props),C.ref=Uc(v,x,b),C.return=v,C):(C=Ch(b.type,b.key,b.props,null,v.mode,C),C.ref=Uc(v,x,b),C.return=v,C)}function c(v,x,b,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Ug(b,v.mode,C),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function u(v,x,b,C,E){return x===null||x.tag!==7?(x=Ji(b,v.mode,C,E),x.return=v,x):(x=s(x,b),x.return=v,x)}function d(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Vg(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sf:return b=Ch(x.type,x.key,x.props,null,v.mode,b),b.ref=Uc(v,null,x),b.return=v,b;case Za:return x=Ug(x,v.mode,b),x.return=v,x;case po:var C=x._init;return d(v,C(x._payload),b)}if(ru(x)||Fc(x))return x=Ji(x,v.mode,b,null),x.return=v,x;Of(v,x)}return null}function f(v,x,b,C){var E=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(v,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sf:return b.key===E?l(v,x,b,C):null;case Za:return b.key===E?c(v,x,b,C):null;case po:return E=b._init,f(v,x,E(b._payload),C)}if(ru(b)||Fc(b))return E!==null?null:u(v,x,b,C,null);Of(v,b)}return null}function p(v,x,b,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(b)||null,a(x,v,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sf:return v=v.get(C.key===null?b:C.key)||null,l(x,v,C,E);case Za:return v=v.get(C.key===null?b:C.key)||null,c(x,v,C,E);case po:var k=C._init;return p(v,x,b,k(C._payload),E)}if(ru(C)||Fc(C))return v=v.get(b)||null,u(x,v,C,E,null);Of(x,C)}return null}function y(v,x,b,C){for(var E=null,k=null,P=x,S=x=0,T=null;P!==null&&S<b.length;S++){P.index>S?(T=P,P=null):T=P.sibling;var _=f(v,P,b[S],C);if(_===null){P===null&&(P=T);break}t&&P&&_.alternate===null&&e(v,P),x=o(_,x,S),k===null?E=_:k.sibling=_,k=_,P=T}if(S===b.length)return n(v,P),pt&&Si(v,S),E;if(P===null){for(;S<b.length;S++)P=d(v,b[S],C),P!==null&&(x=o(P,x,S),k===null?E=P:k.sibling=P,k=P);return pt&&Si(v,S),E}for(P=r(v,P);S<b.length;S++)T=p(P,v,S,b[S],C),T!==null&&(t&&T.alternate!==null&&P.delete(T.key===null?S:T.key),x=o(T,x,S),k===null?E=T:k.sibling=T,k=T);return t&&P.forEach(function(R){return e(v,R)}),pt&&Si(v,S),E}function m(v,x,b,C){var E=Fc(b);if(typeof E!="function")throw Error(ne(150));if(b=E.call(b),b==null)throw Error(ne(151));for(var k=E=null,P=x,S=x=0,T=null,_=b.next();P!==null&&!_.done;S++,_=b.next()){P.index>S?(T=P,P=null):T=P.sibling;var R=f(v,P,_.value,C);if(R===null){P===null&&(P=T);break}t&&P&&R.alternate===null&&e(v,P),x=o(R,x,S),k===null?E=R:k.sibling=R,k=R,P=T}if(_.done)return n(v,P),pt&&Si(v,S),E;if(P===null){for(;!_.done;S++,_=b.next())_=d(v,_.value,C),_!==null&&(x=o(_,x,S),k===null?E=_:k.sibling=_,k=_);return pt&&Si(v,S),E}for(P=r(v,P);!_.done;S++,_=b.next())_=p(P,v,S,_.value,C),_!==null&&(t&&_.alternate!==null&&P.delete(_.key===null?S:_.key),x=o(_,x,S),k===null?E=_:k.sibling=_,k=_);return t&&P.forEach(function(j){return e(v,j)}),pt&&Si(v,S),E}function w(v,x,b,C){if(typeof b=="object"&&b!==null&&b.type===el&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Sf:e:{for(var E=b.key,k=x;k!==null;){if(k.key===E){if(E=b.type,E===el){if(k.tag===7){n(v,k.sibling),x=s(k,b.props.children),x.return=v,v=x;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===po&&z1(E)===k.type){n(v,k.sibling),x=s(k,b.props),x.ref=Uc(v,k,b),x.return=v,v=x;break e}n(v,k);break}else e(v,k);k=k.sibling}b.type===el?(x=Ji(b.props.children,v.mode,C,b.key),x.return=v,v=x):(C=Ch(b.type,b.key,b.props,null,v.mode,C),C.ref=Uc(v,x,b),C.return=v,v=C)}return i(v);case Za:e:{for(k=b.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Ug(b,v.mode,C),x.return=v,v=x}return i(v);case po:return k=b._init,w(v,x,k(b._payload),C)}if(ru(b))return y(v,x,b,C);if(Fc(b))return m(v,x,b,C);Of(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=Vg(b,v.mode,C),x.return=v,v=x),i(v)):n(v,x)}return w}var Yl=X_(!0),Z_=X_(!1),Gh=ai(null),Jh=null,ll=null,sx=null;function ox(){sx=ll=Jh=null}function ix(t){var e=Gh.current;ft(Gh),t._currentValue=e}function Av(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sl(t,e){Jh=t,sx=ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function Mr(t){var e=t._currentValue;if(sx!==t)if(t={context:t,memoizedValue:e,next:null},ll===null){if(Jh===null)throw Error(ne(308));ll=t,Jh.dependencies={lanes:0,firstContext:t}}else ll=ll.next=t;return e}var ji=null;function ax(t){ji===null?ji=[t]:ji.push(t)}function eN(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ax(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ks(t,r)}function Ks(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mo=!1;function lx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ks(t,n)}return s=r.interleaved,s===null?(e.next=e,ax(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ks(t,n)}function yh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}function V1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yh(t,e,n,r){var s=t.updateQueue;mo=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?o=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=s.baseState;i=0,u=c=l=null,a=o;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,m=a;switch(f=e,p=n,m.tag){case 1:if(y=m.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=Ct({},d,f);break e;case 2:mo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,i|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);oa|=i,t.lanes=i,t.memoizedState=d}}function U1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var zd={},ys=ai(zd),Zu=ai(zd),ed=ai(zd);function Di(t){if(t===zd)throw Error(ne(174));return t}function cx(t,e){switch(lt(ed,e),lt(Zu,t),lt(ys,zd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fv(e,t)}ft(ys),lt(ys,e)}function Ql(){ft(ys),ft(Zu),ft(ed)}function nN(t){Di(ed.current);var e=Di(ys.current),n=fv(e,t.type);e!==n&&(lt(Zu,t),lt(ys,n))}function ux(t){Zu.current===t&&(ft(ys),ft(Zu))}var vt=ai(0);function Qh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ig=[];function dx(){for(var t=0;t<Ig.length;t++)Ig[t]._workInProgressVersionPrimary=null;Ig.length=0}var vh=Zs.ReactCurrentDispatcher,Lg=Zs.ReactCurrentBatchConfig,sa=0,St=null,Bt=null,Ht=null,Xh=!1,Cu=!1,td=0,CB=0;function hn(){throw Error(ne(321))}function fx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yr(t[n],e[n]))return!1;return!0}function hx(t,e,n,r,s,o){if(sa=o,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vh.current=t===null||t.memoizedState===null?PB:_B,t=n(r,s),Cu){o=0;do{if(Cu=!1,td=0,25<=o)throw Error(ne(301));o+=1,Ht=Bt=null,e.updateQueue=null,vh.current=NB,t=n(r,s)}while(Cu)}if(vh.current=Zh,e=Bt!==null&&Bt.next!==null,sa=0,Ht=Bt=St=null,Xh=!1,e)throw Error(ne(300));return t}function px(){var t=td!==0;return td=0,t}function as(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?St.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Ar(){if(Bt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Bt.next;var e=Ht===null?St.memoizedState:Ht.next;if(e!==null)Ht=e,Bt=t;else{if(t===null)throw Error(ne(310));Bt=t,t={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Ht===null?St.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function nd(t,e){return typeof e=="function"?e(t):e}function Fg(t){var e=Ar(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Bt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,l=null,c=o;do{var u=c.lane;if((sa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,St.lanes|=u,oa|=u}c=c.next}while(c!==null&&c!==o);l===null?i=r:l.next=a,Yr(r,e.memoizedState)||(Hn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,St.lanes|=o,oa|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $g(t){var e=Ar(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);Yr(o,e.memoizedState)||(Hn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function rN(){}function sN(t,e){var n=St,r=Ar(),s=e(),o=!Yr(r.memoizedState,s);if(o&&(r.memoizedState=s,Hn=!0),r=r.queue,mx(aN.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,rd(9,iN.bind(null,n,r,s,e),void 0,null),qt===null)throw Error(ne(349));sa&30||oN(n,e,s)}return s}function oN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iN(t,e,n,r){e.value=n,e.getSnapshot=r,lN(e)&&cN(t)}function aN(t,e,n){return n(function(){lN(e)&&cN(t)})}function lN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yr(t,n)}catch{return!0}}function cN(t){var e=Ks(t,1);e!==null&&qr(e,t,1,-1)}function W1(t){var e=as();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:t},e.queue=t,t=t.dispatch=TB.bind(null,St,t),[e.memoizedState,t]}function rd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uN(){return Ar().memoizedState}function wh(t,e,n,r){var s=as();St.flags|=t,s.memoizedState=rd(1|e,n,void 0,r===void 0?null:r)}function Zp(t,e,n,r){var s=Ar();r=r===void 0?null:r;var o=void 0;if(Bt!==null){var i=Bt.memoizedState;if(o=i.destroy,r!==null&&fx(r,i.deps)){s.memoizedState=rd(e,n,o,r);return}}St.flags|=t,s.memoizedState=rd(1|e,n,o,r)}function H1(t,e){return wh(8390656,8,t,e)}function mx(t,e){return Zp(2048,8,t,e)}function dN(t,e){return Zp(4,2,t,e)}function fN(t,e){return Zp(4,4,t,e)}function hN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pN(t,e,n){return n=n!=null?n.concat([t]):null,Zp(4,4,hN.bind(null,e,t),n)}function gx(){}function mN(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gN(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yN(t,e,n){return sa&21?(Yr(n,e)||(n=S_(),St.lanes|=n,oa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n)}function EB(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=Lg.transition;Lg.transition={};try{t(!1),e()}finally{rt=n,Lg.transition=r}}function vN(){return Ar().memoizedState}function kB(t,e,n){var r=Vo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wN(t))xN(e,n);else if(n=eN(t,e,n,r),n!==null){var s=_n();qr(n,t,r,s),bN(n,e,r)}}function TB(t,e,n){var r=Vo(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wN(t))xN(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Yr(a,i)){var l=e.interleaved;l===null?(s.next=s,ax(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=eN(t,e,s,r),n!==null&&(s=_n(),qr(n,t,r,s),bN(n,e,r))}}function wN(t){var e=t.alternate;return t===St||e!==null&&e===St}function xN(t,e){Cu=Xh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qw(t,n)}}var Zh={readContext:Mr,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},PB={readContext:Mr,useCallback:function(t,e){return as().memoizedState=[t,e===void 0?null:e],t},useContext:Mr,useEffect:H1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wh(4194308,4,hN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wh(4194308,4,t,e)},useInsertionEffect:function(t,e){return wh(4,2,t,e)},useMemo:function(t,e){var n=as();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=as();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kB.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=as();return t={current:t},e.memoizedState=t},useState:W1,useDebugValue:gx,useDeferredValue:function(t){return as().memoizedState=t},useTransition:function(){var t=W1(!1),e=t[0];return t=EB.bind(null,t[1]),as().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=as();if(pt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),qt===null)throw Error(ne(349));sa&30||oN(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,H1(aN.bind(null,r,o,t),[t]),r.flags|=2048,rd(9,iN.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=as(),e=qt.identifierPrefix;if(pt){var n=Fs,r=Ls;n=(r&~(1<<32-Kr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=td++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_B={readContext:Mr,useCallback:mN,useContext:Mr,useEffect:mx,useImperativeHandle:pN,useInsertionEffect:dN,useLayoutEffect:fN,useMemo:gN,useReducer:Fg,useRef:uN,useState:function(){return Fg(nd)},useDebugValue:gx,useDeferredValue:function(t){var e=Ar();return yN(e,Bt.memoizedState,t)},useTransition:function(){var t=Fg(nd)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:rN,useSyncExternalStore:sN,useId:vN,unstable_isNewReconciler:!1},NB={readContext:Mr,useCallback:mN,useContext:Mr,useEffect:mx,useImperativeHandle:pN,useInsertionEffect:dN,useLayoutEffect:fN,useMemo:gN,useReducer:$g,useRef:uN,useState:function(){return $g(nd)},useDebugValue:gx,useDeferredValue:function(t){var e=Ar();return Bt===null?e.memoizedState=t:yN(e,Bt.memoizedState,t)},useTransition:function(){var t=$g(nd)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:rN,useSyncExternalStore:sN,useId:vN,unstable_isNewReconciler:!1};function Fr(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ov(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var em={isMounted:function(t){return(t=t._reactInternals)?xa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Vo(t),o=Bs(r,s);o.payload=e,n!=null&&(o.callback=n),e=Bo(t,o,s),e!==null&&(qr(e,t,s,r),yh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_n(),s=Vo(t),o=Bs(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Bo(t,o,s),e!==null&&(qr(e,t,s,r),yh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_n(),r=Vo(t),s=Bs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bo(t,s,r),e!==null&&(qr(e,t,r,n),yh(e,t,r))}};function K1(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!Ju(n,r)||!Ju(s,o):!0}function SN(t,e,n){var r=!1,s=Xo,o=e.contextType;return typeof o=="object"&&o!==null?o=Mr(o):(s=qn(e)?na:Sn.current,r=e.contextTypes,o=(r=r!=null)?Gl(t,s):Xo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=em,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function q1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&em.enqueueReplaceState(e,e.state,null)}function jv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lx(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Mr(o):(o=qn(e)?na:Sn.current,s.context=Gl(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ov(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&em.enqueueReplaceState(s,s.state,null),Yh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Xl(t,e){try{var n="",r=e;do n+=r$(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Bg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RB=typeof WeakMap=="function"?WeakMap:Map;function CN(t,e,n){n=Bs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tp||(tp=!0,Hv=r),Dv(t,e)},n}function EN(t,e,n){n=Bs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Dv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Dv(t,e),typeof r!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function G1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RB;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WB.bind(null,t,e,n),e.then(t,t))}function J1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Y1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bs(-1,1),e.tag=2,Bo(n,e,1))),n.lanes|=1),t)}var MB=Zs.ReactCurrentOwner,Hn=!1;function Pn(t,e,n,r){e.child=t===null?Z_(e,null,n,r):Yl(e,t.child,n,r)}function Q1(t,e,n,r,s){n=n.render;var o=e.ref;return Sl(e,s),r=hx(t,e,n,r,o,s),n=px(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(pt&&n&&tx(e),e.flags|=1,Pn(t,e,r,s),e.child)}function X1(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!Ex(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,kN(t,e,o,r,s)):(t=Ch(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ju,n(i,r)&&t.ref===e.ref)return qs(t,e,s)}return e.flags|=1,t=Uo(o,r),t.ref=e.ref,t.return=e,e.child=t}function kN(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ju(o,r)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,qs(t,e,s)}return Iv(t,e,n,r,s)}function TN(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ul,rr),rr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(ul,rr),rr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,lt(ul,rr),rr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,lt(ul,rr),rr|=r;return Pn(t,e,s,n),e.child}function PN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Iv(t,e,n,r,s){var o=qn(n)?na:Sn.current;return o=Gl(e,o),Sl(e,s),n=hx(t,e,n,r,o,s),r=px(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(pt&&r&&tx(e),e.flags|=1,Pn(t,e,n,s),e.child)}function Z1(t,e,n,r,s){if(qn(n)){var o=!0;Hh(e)}else o=!1;if(Sl(e,s),e.stateNode===null)xh(t,e),SN(e,n,r),jv(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Mr(c):(c=qn(n)?na:Sn.current,c=Gl(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&q1(e,i,r,c),mo=!1;var f=e.memoizedState;i.state=f,Yh(e,r,i,s),l=e.memoizedState,a!==r||f!==l||Kn.current||mo?(typeof u=="function"&&(Ov(e,n,u,r),l=e.memoizedState),(a=mo||K1(e,n,a,r,f,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,tN(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Fr(e.type,a),i.props=c,d=e.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mr(l):(l=qn(n)?na:Sn.current,l=Gl(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&q1(e,i,r,l),mo=!1,f=e.memoizedState,i.state=f,Yh(e,r,i,s);var y=e.memoizedState;a!==d||f!==y||Kn.current||mo?(typeof p=="function"&&(Ov(e,n,p,r),y=e.memoizedState),(c=mo||K1(e,n,c,r,f,y,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),i.props=r,i.state=y,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Lv(t,e,n,r,o,s)}function Lv(t,e,n,r,s,o){PN(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&F1(e,n,!1),qs(t,e,o);r=e.stateNode,MB.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Yl(e,t.child,null,o),e.child=Yl(e,null,a,o)):Pn(t,e,a,o),e.memoizedState=r.state,s&&F1(e,n,!0),e.child}function _N(t){var e=t.stateNode;e.pendingContext?L1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&L1(t,e.context,!1),cx(t,e.containerInfo)}function eC(t,e,n,r,s){return Jl(),rx(s),e.flags|=256,Pn(t,e,n,r),e.child}var Fv={dehydrated:null,treeContext:null,retryLane:0};function $v(t){return{baseLanes:t,cachePool:null,transitions:null}}function NN(t,e,n){var r=e.pendingProps,s=vt.current,o=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),lt(vt,s&1),t===null)return Mv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=rm(i,r,0,null),t=Ji(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=$v(n),e.memoizedState=Fv,t):yx(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return AB(t,e,i,r,a,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Uo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Uo(a,o):(o=Ji(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?$v(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=Fv,r}return o=t.child,t=o.sibling,r=Uo(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yx(t,e){return e=rm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jf(t,e,n,r){return r!==null&&rx(r),Yl(e,t.child,null,n),t=yx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AB(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=Bg(Error(ne(422))),jf(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=rm({mode:"visible",children:r.children},s,0,null),o=Ji(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yl(e,t.child,null,i),e.child.memoizedState=$v(i),e.memoizedState=Fv,o);if(!(e.mode&1))return jf(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=Bg(o,r,void 0),jf(t,e,i,r)}if(a=(i&t.childLanes)!==0,Hn||a){if(r=qt,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ks(t,s),qr(r,t,s,-1))}return Cx(),r=Bg(Error(ne(421))),jf(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HB.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,ar=$o(s.nextSibling),lr=e,pt=!0,Ur=null,t!==null&&(Sr[Cr++]=Ls,Sr[Cr++]=Fs,Sr[Cr++]=ra,Ls=t.id,Fs=t.overflow,ra=e),e=yx(e,r.children),e.flags|=4096,e)}function tC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Av(t.return,e,n)}function zg(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function RN(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Pn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tC(t,n,e);else if(t.tag===19)tC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zg(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zg(e,!0,n,null,o);break;case"together":zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Uo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Uo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OB(t,e,n){switch(e.tag){case 3:_N(e),Jl();break;case 5:nN(e);break;case 1:qn(e.type)&&Hh(e);break;case 4:cx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;lt(Gh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?NN(t,e,n):(lt(vt,vt.current&1),t=qs(t,e,n),t!==null?t.sibling:null);lt(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RN(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),lt(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,TN(t,e,n)}return qs(t,e,n)}var MN,Bv,AN,ON;MN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bv=function(){};AN=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Di(ys.current);var o=null;switch(n){case"input":s=lv(t,s),r=lv(t,r),o=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),o=[];break;case"textarea":s=dv(t,s),r=dv(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uh)}hv(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Vu.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Vu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&dt("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};ON=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wc(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jB(t,e,n){var r=e.pendingProps;switch(nx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(e),null;case 1:return qn(e.type)&&Wh(),pn(e),null;case 3:return r=e.stateNode,Ql(),ft(Kn),ft(Sn),dx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Af(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(Gv(Ur),Ur=null))),Bv(t,e),pn(e),null;case 5:ux(e);var s=Di(ed.current);if(n=e.type,t!==null&&e.stateNode!=null)AN(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return pn(e),null}if(t=Di(ys.current),Af(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ps]=e,r[Xu]=o,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(s=0;s<ou.length;s++)dt(ou[s],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":u1(r,o),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},dt("invalid",r);break;case"textarea":f1(r,o),dt("invalid",r)}hv(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Mf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Mf(r.textContent,a,t),s=["children",""+a]):Vu.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&dt("scroll",r)}switch(n){case"input":Cf(r),d1(r,o,!0);break;case"textarea":Cf(r),h1(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Uh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[ps]=e,t[Xu]=r,MN(t,e,!1,!1),e.stateNode=t;e:{switch(i=pv(n,r),n){case"dialog":dt("cancel",t),dt("close",t),s=r;break;case"iframe":case"object":case"embed":dt("load",t),s=r;break;case"video":case"audio":for(s=0;s<ou.length;s++)dt(ou[s],t);s=r;break;case"source":dt("error",t),s=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),s=r;break;case"details":dt("toggle",t),s=r;break;case"input":u1(t,r),s=lv(t,r),dt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),dt("invalid",t);break;case"textarea":f1(t,r),s=dv(t,r),dt("invalid",t);break;default:s=r}hv(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?u_(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&l_(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Uu(t,l):typeof l=="number"&&Uu(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vu.hasOwnProperty(o)?l!=null&&o==="onScroll"&&dt("scroll",t):l!=null&&zw(t,o,l,i))}switch(n){case"input":Cf(t),d1(t,r,!1);break;case"textarea":Cf(t),h1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?vl(t,!!r.multiple,o,!1):r.defaultValue!=null&&vl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pn(e),null;case 6:if(t&&e.stateNode!=null)ON(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Di(ed.current),Di(ys.current),Af(e)){if(r=e.stateNode,n=e.memoizedProps,r[ps]=e,(o=r.nodeValue!==n)&&(t=lr,t!==null))switch(t.tag){case 3:Mf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mf(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=e,e.stateNode=r}return pn(e),null;case 13:if(ft(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&ar!==null&&e.mode&1&&!(e.flags&128))Q_(),Jl(),e.flags|=98560,o=!1;else if(o=Af(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[ps]=e}else Jl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pn(e),o=!1}else Ur!==null&&(Gv(Ur),Ur=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Vt===0&&(Vt=3):Cx())),e.updateQueue!==null&&(e.flags|=4),pn(e),null);case 4:return Ql(),Bv(t,e),t===null&&Yu(e.stateNode.containerInfo),pn(e),null;case 10:return ix(e.type._context),pn(e),null;case 17:return qn(e.type)&&Wh(),pn(e),null;case 19:if(ft(vt),o=e.memoizedState,o===null)return pn(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)Wc(o,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Qh(t),i!==null){for(e.flags|=128,Wc(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(vt,vt.current&1|2),e.child}t=t.sibling}o.tail!==null&&jt()>Zl&&(e.flags|=128,r=!0,Wc(o,!1),e.lanes=4194304)}else{if(!r)if(t=Qh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!pt)return pn(e),null}else 2*jt()-o.renderingStartTime>Zl&&n!==1073741824&&(e.flags|=128,r=!0,Wc(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=jt(),e.sibling=null,n=vt.current,lt(vt,r?n&1|2:n&1),e):(pn(e),null);case 22:case 23:return Sx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rr&1073741824&&(pn(e),e.subtreeFlags&6&&(e.flags|=8192)):pn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function DB(t,e){switch(nx(e),e.tag){case 1:return qn(e.type)&&Wh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ql(),ft(Kn),ft(Sn),dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ux(e),null;case 13:if(ft(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Jl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(vt),null;case 4:return Ql(),null;case 10:return ix(e.type._context),null;case 22:case 23:return Sx(),null;case 24:return null;default:return null}}var Df=!1,vn=!1,IB=typeof WeakSet=="function"?WeakSet:Set,ue=null;function cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function zv(t,e,n){try{n()}catch(r){_t(t,e,r)}}var nC=!1;function LB(t,e){if(Ev=Bh,t=F_(),ex(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=i+s),d!==o||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=i),f===o&&++u===r&&(l=i),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kv={focusedElem:t,selectionRange:n},Bh=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,w=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Fr(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(C){_t(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return y=nC,nC=!1,y}function Eu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&zv(e,n,o)}s=s.next}while(s!==r)}}function tm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jN(t){var e=t.alternate;e!==null&&(t.alternate=null,jN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ps],delete e[Xu],delete e[_v],delete e[wB],delete e[xB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DN(t){return t.tag===5||t.tag===3||t.tag===4}function rC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uh));else if(r!==4&&(t=t.child,t!==null))for(Uv(t,e,n),t=t.sibling;t!==null;)Uv(t,e,n),t=t.sibling}function Wv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wv(t,e,n),t=t.sibling;t!==null;)Wv(t,e,n),t=t.sibling}var tn=null,Br=!1;function no(t,e,n){for(n=n.child;n!==null;)IN(t,e,n),n=n.sibling}function IN(t,e,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(qp,n)}catch{}switch(n.tag){case 5:vn||cl(n,e);case 6:var r=tn,s=Br;tn=null,no(t,e,n),tn=r,Br=s,tn!==null&&(Br?(t=tn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tn.removeChild(n.stateNode));break;case 18:tn!==null&&(Br?(t=tn,n=n.stateNode,t.nodeType===8?jg(t.parentNode,n):t.nodeType===1&&jg(t,n),qu(t)):jg(tn,n.stateNode));break;case 4:r=tn,s=Br,tn=n.stateNode.containerInfo,Br=!0,no(t,e,n),tn=r,Br=s;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&zv(n,e,i),s=s.next}while(s!==r)}no(t,e,n);break;case 1:if(!vn&&(cl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}no(t,e,n);break;case 21:no(t,e,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,no(t,e,n),vn=r):no(t,e,n);break;default:no(t,e,n)}}function sC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IB),e.forEach(function(r){var s=KB.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:tn=a.stateNode,Br=!1;break e;case 3:tn=a.stateNode.containerInfo,Br=!0;break e;case 4:tn=a.stateNode.containerInfo,Br=!0;break e}a=a.return}if(tn===null)throw Error(ne(160));IN(o,i,s),tn=null,Br=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){_t(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LN(e,t),e=e.sibling}function LN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),ss(t),r&4){try{Eu(3,t,t.return),tm(3,t)}catch(m){_t(t,t.return,m)}try{Eu(5,t,t.return)}catch(m){_t(t,t.return,m)}}break;case 1:Dr(e,t),ss(t),r&512&&n!==null&&cl(n,n.return);break;case 5:if(Dr(e,t),ss(t),r&512&&n!==null&&cl(n,n.return),t.flags&32){var s=t.stateNode;try{Uu(s,"")}catch(m){_t(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&o_(s,o),pv(a,i);var c=pv(a,o);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?u_(s,d):u==="dangerouslySetInnerHTML"?l_(s,d):u==="children"?Uu(s,d):zw(s,u,d,c)}switch(a){case"input":cv(s,o);break;case"textarea":i_(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?vl(s,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?vl(s,!!o.multiple,o.defaultValue,!0):vl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Xu]=o}catch(m){_t(t,t.return,m)}}break;case 6:if(Dr(e,t),ss(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(m){_t(t,t.return,m)}}break;case 3:if(Dr(e,t),ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qu(e.containerInfo)}catch(m){_t(t,t.return,m)}break;case 4:Dr(e,t),ss(t);break;case 13:Dr(e,t),ss(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(xx=jt())),r&4&&sC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vn=(c=vn)||u,Dr(e,t),vn=c):Dr(e,t),ss(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ue=t,u=t.child;u!==null;){for(d=ue=u;ue!==null;){switch(f=ue,p=f.child,f.tag){case 0:case 11:case 14:case 15:Eu(4,f,f.return);break;case 1:cl(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(m){_t(r,n,m)}}break;case 5:cl(f,f.return);break;case 22:if(f.memoizedState!==null){iC(d);continue}}p!==null?(p.return=f,ue=p):iC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=c_("display",i))}catch(m){_t(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){_t(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Dr(e,t),ss(t),r&4&&sC(t);break;case 21:break;default:Dr(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(DN(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Uu(s,""),r.flags&=-33);var o=rC(t);Wv(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=rC(t);Uv(t,a,i);break;default:throw Error(ne(161))}}catch(l){_t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FB(t,e,n){ue=t,FN(t)}function FN(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Df;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||vn;a=Df;var c=vn;if(Df=i,(vn=l)&&!c)for(ue=s;ue!==null;)i=ue,l=i.child,i.tag===22&&i.memoizedState!==null?aC(s):l!==null?(l.return=i,ue=l):aC(s);for(;o!==null;)ue=o,FN(o),o=o.sibling;ue=s,Df=a,vn=c}oC(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ue=o):oC(t)}}function oC(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||tm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Fr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&U1(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}U1(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&qu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}vn||e.flags&512&&Vv(e)}catch(f){_t(e,e.return,f)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function iC(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function aC(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tm(4,e)}catch(l){_t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){_t(e,s,l)}}var o=e.return;try{Vv(e)}catch(l){_t(e,o,l)}break;case 5:var i=e.return;try{Vv(e)}catch(l){_t(e,i,l)}}}catch(l){_t(e,e.return,l)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var $B=Math.ceil,ep=Zs.ReactCurrentDispatcher,vx=Zs.ReactCurrentOwner,Pr=Zs.ReactCurrentBatchConfig,Je=0,qt=null,Lt=null,ln=0,rr=0,ul=ai(0),Vt=0,sd=null,oa=0,nm=0,wx=0,ku=null,zn=null,xx=0,Zl=1/0,Os=null,tp=!1,Hv=null,zo=null,If=!1,Mo=null,np=0,Tu=0,Kv=null,bh=-1,Sh=0;function _n(){return Je&6?jt():bh!==-1?bh:bh=jt()}function Vo(t){return t.mode&1?Je&2&&ln!==0?ln&-ln:SB.transition!==null?(Sh===0&&(Sh=S_()),Sh):(t=rt,t!==0||(t=window.event,t=t===void 0?16:N_(t.type)),t):1}function qr(t,e,n,r){if(50<Tu)throw Tu=0,Kv=null,Error(ne(185));Fd(t,n,r),(!(Je&2)||t!==qt)&&(t===qt&&(!(Je&2)&&(nm|=n),Vt===4&&xo(t,ln)),Gn(t,r),n===1&&Je===0&&!(e.mode&1)&&(Zl=jt()+500,Xp&&li()))}function Gn(t,e){var n=t.callbackNode;S$(t,e);var r=$h(t,t===qt?ln:0);if(r===0)n!==null&&g1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&g1(n),e===1)t.tag===0?bB(lC.bind(null,t)):G_(lC.bind(null,t)),yB(function(){!(Je&6)&&li()}),n=null;else{switch(C_(r)){case 1:n=Kw;break;case 4:n=x_;break;case 16:n=Fh;break;case 536870912:n=b_;break;default:n=Fh}n=KN(n,$N.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $N(t,e){if(bh=-1,Sh=0,Je&6)throw Error(ne(327));var n=t.callbackNode;if(Cl()&&t.callbackNode!==n)return null;var r=$h(t,t===qt?ln:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rp(t,r);else{e=r;var s=Je;Je|=2;var o=zN();(qt!==t||ln!==e)&&(Os=null,Zl=jt()+500,Gi(t,e));do try{VB();break}catch(a){BN(t,a)}while(!0);ox(),ep.current=o,Je=s,Lt!==null?e=0:(qt=null,ln=0,e=Vt)}if(e!==0){if(e===2&&(s=wv(t),s!==0&&(r=s,e=qv(t,s))),e===1)throw n=sd,Gi(t,0),xo(t,r),Gn(t,jt()),n;if(e===6)xo(t,r);else{if(s=t.current.alternate,!(r&30)&&!BB(s)&&(e=rp(t,r),e===2&&(o=wv(t),o!==0&&(r=o,e=qv(t,o))),e===1))throw n=sd,Gi(t,0),xo(t,r),Gn(t,jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Ci(t,zn,Os);break;case 3:if(xo(t,r),(r&130023424)===r&&(e=xx+500-jt(),10<e)){if($h(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pv(Ci.bind(null,t,zn,Os),e);break}Ci(t,zn,Os);break;case 4:if(xo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-Kr(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$B(r/1960))-r,10<r){t.timeoutHandle=Pv(Ci.bind(null,t,zn,Os),r);break}Ci(t,zn,Os);break;case 5:Ci(t,zn,Os);break;default:throw Error(ne(329))}}}return Gn(t,jt()),t.callbackNode===n?$N.bind(null,t):null}function qv(t,e){var n=ku;return t.current.memoizedState.isDehydrated&&(Gi(t,e).flags|=256),t=rp(t,e),t!==2&&(e=zn,zn=n,e!==null&&Gv(e)),t}function Gv(t){zn===null?zn=t:zn.push.apply(zn,t)}function BB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Yr(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xo(t,e){for(e&=~wx,e&=~nm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kr(e),r=1<<n;t[n]=-1,e&=~r}}function lC(t){if(Je&6)throw Error(ne(327));Cl();var e=$h(t,0);if(!(e&1))return Gn(t,jt()),null;var n=rp(t,e);if(t.tag!==0&&n===2){var r=wv(t);r!==0&&(e=r,n=qv(t,r))}if(n===1)throw n=sd,Gi(t,0),xo(t,e),Gn(t,jt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,zn,Os),Gn(t,jt()),null}function bx(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Zl=jt()+500,Xp&&li())}}function ia(t){Mo!==null&&Mo.tag===0&&!(Je&6)&&Cl();var e=Je;Je|=1;var n=Pr.transition,r=rt;try{if(Pr.transition=null,rt=1,t)return t()}finally{rt=r,Pr.transition=n,Je=e,!(Je&6)&&li()}}function Sx(){rr=ul.current,ft(ul)}function Gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gB(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(nx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wh();break;case 3:Ql(),ft(Kn),ft(Sn),dx();break;case 5:ux(r);break;case 4:Ql();break;case 13:ft(vt);break;case 19:ft(vt);break;case 10:ix(r.type._context);break;case 22:case 23:Sx()}n=n.return}if(qt=t,Lt=t=Uo(t.current,null),ln=rr=e,Vt=0,sd=null,wx=nm=oa=0,zn=ku=null,ji!==null){for(e=0;e<ji.length;e++)if(n=ji[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}ji=null}return t}function BN(t,e){do{var n=Lt;try{if(ox(),vh.current=Zh,Xh){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xh=!1}if(sa=0,Ht=Bt=St=null,Cu=!1,td=0,vx.current=null,n===null||n.return===null){Vt=1,sd=e,Lt=null;break}e:{var o=t,i=n.return,a=n,l=e;if(e=ln,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=J1(i);if(p!==null){p.flags&=-257,Y1(p,i,a,o,e),p.mode&1&&G1(o,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var m=new Set;m.add(l),e.updateQueue=m}else y.add(l);break e}else{if(!(e&1)){G1(o,c,e),Cx();break e}l=Error(ne(426))}}else if(pt&&a.mode&1){var w=J1(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Y1(w,i,a,o,e),rx(Xl(l,a));break e}}o=l=Xl(l,a),Vt!==4&&(Vt=2),ku===null?ku=[o]:ku.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=CN(o,l,e);V1(o,v);break e;case 1:a=l;var x=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zo===null||!zo.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=EN(o,a,e);V1(o,C);break e}}o=o.return}while(o!==null)}UN(n)}catch(E){e=E,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function zN(){var t=ep.current;return ep.current=Zh,t===null?Zh:t}function Cx(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),qt===null||!(oa&268435455)&&!(nm&268435455)||xo(qt,ln)}function rp(t,e){var n=Je;Je|=2;var r=zN();(qt!==t||ln!==e)&&(Os=null,Gi(t,e));do try{zB();break}catch(s){BN(t,s)}while(!0);if(ox(),Je=n,ep.current=r,Lt!==null)throw Error(ne(261));return qt=null,ln=0,Vt}function zB(){for(;Lt!==null;)VN(Lt)}function VB(){for(;Lt!==null&&!h$();)VN(Lt)}function VN(t){var e=HN(t.alternate,t,rr);t.memoizedProps=t.pendingProps,e===null?UN(t):Lt=e,vx.current=null}function UN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DB(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Lt=null;return}}else if(n=jB(n,e,rr),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Vt===0&&(Vt=5)}function Ci(t,e,n){var r=rt,s=Pr.transition;try{Pr.transition=null,rt=1,UB(t,e,n,r)}finally{Pr.transition=s,rt=r}return null}function UB(t,e,n,r){do Cl();while(Mo!==null);if(Je&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(C$(t,o),t===qt&&(Lt=qt=null,ln=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||If||(If=!0,KN(Fh,function(){return Cl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pr.transition,Pr.transition=null;var i=rt;rt=1;var a=Je;Je|=4,vx.current=null,LB(t,n),LN(n,t),cB(kv),Bh=!!Ev,kv=Ev=null,t.current=n,FB(n),p$(),Je=a,rt=i,Pr.transition=o}else t.current=n;if(If&&(If=!1,Mo=t,np=s),o=t.pendingLanes,o===0&&(zo=null),y$(n.stateNode),Gn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tp)throw tp=!1,t=Hv,Hv=null,t;return np&1&&t.tag!==0&&Cl(),o=t.pendingLanes,o&1?t===Kv?Tu++:(Tu=0,Kv=t):Tu=0,li(),null}function Cl(){if(Mo!==null){var t=C_(np),e=Pr.transition,n=rt;try{if(Pr.transition=null,rt=16>t?16:t,Mo===null)var r=!1;else{if(t=Mo,Mo=null,np=0,Je&6)throw Error(ne(331));var s=Je;for(Je|=4,ue=t.current;ue!==null;){var o=ue,i=o.child;if(ue.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ue=c;ue!==null;){var u=ue;switch(u.tag){case 0:case 11:case 15:Eu(8,u,o)}var d=u.child;if(d!==null)d.return=u,ue=d;else for(;ue!==null;){u=ue;var f=u.sibling,p=u.return;if(jN(u),u===c){ue=null;break}if(f!==null){f.return=p,ue=f;break}ue=p}}}var y=o.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ue=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ue=i;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Eu(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,ue=v;break e}ue=o.return}}var x=t.current;for(ue=x;ue!==null;){i=ue;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,ue=b;else e:for(i=x;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tm(9,a)}}catch(E){_t(a,a.return,E)}if(a===i){ue=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ue=C;break e}ue=a.return}}if(Je=s,li(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(qp,t)}catch{}r=!0}return r}finally{rt=n,Pr.transition=e}}return!1}function cC(t,e,n){e=Xl(n,e),e=CN(t,e,1),t=Bo(t,e,1),e=_n(),t!==null&&(Fd(t,1,e),Gn(t,e))}function _t(t,e,n){if(t.tag===3)cC(t,t,n);else for(;e!==null;){if(e.tag===3){cC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zo===null||!zo.has(r))){t=Xl(n,t),t=EN(e,t,1),e=Bo(e,t,1),t=_n(),e!==null&&(Fd(e,1,t),Gn(e,t));break}}e=e.return}}function WB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(ln&n)===n&&(Vt===4||Vt===3&&(ln&130023424)===ln&&500>jt()-xx?Gi(t,0):wx|=n),Gn(t,e)}function WN(t,e){e===0&&(t.mode&1?(e=Tf,Tf<<=1,!(Tf&130023424)&&(Tf=4194304)):e=1);var n=_n();t=Ks(t,e),t!==null&&(Fd(t,e,n),Gn(t,n))}function HB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WN(t,n)}function KB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),WN(t,n)}var HN;HN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kn.current)Hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hn=!1,OB(t,e,n);Hn=!!(t.flags&131072)}else Hn=!1,pt&&e.flags&1048576&&J_(e,qh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xh(t,e),t=e.pendingProps;var s=Gl(e,Sn.current);Sl(e,n),s=hx(null,e,r,t,s,n);var o=px();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(o=!0,Hh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lx(e),s.updater=em,e.stateNode=s,s._reactInternals=e,jv(e,r,t,n),e=Lv(null,e,r,!0,o,n)):(e.tag=0,pt&&o&&tx(e),Pn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=GB(r),t=Fr(r,t),s){case 0:e=Iv(null,e,r,t,n);break e;case 1:e=Z1(null,e,r,t,n);break e;case 11:e=Q1(null,e,r,t,n);break e;case 14:e=X1(null,e,r,Fr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fr(r,s),Iv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fr(r,s),Z1(t,e,r,s,n);case 3:e:{if(_N(e),t===null)throw Error(ne(387));r=e.pendingProps,o=e.memoizedState,s=o.element,tN(t,e),Yh(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Xl(Error(ne(423)),e),e=eC(t,e,r,n,s);break e}else if(r!==s){s=Xl(Error(ne(424)),e),e=eC(t,e,r,n,s);break e}else for(ar=$o(e.stateNode.containerInfo.firstChild),lr=e,pt=!0,Ur=null,n=Z_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jl(),r===s){e=qs(t,e,n);break e}Pn(t,e,r,n)}e=e.child}return e;case 5:return nN(e),t===null&&Mv(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Tv(r,s)?i=null:o!==null&&Tv(r,o)&&(e.flags|=32),PN(t,e),Pn(t,e,i,n),e.child;case 6:return t===null&&Mv(e),null;case 13:return NN(t,e,n);case 4:return cx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yl(e,null,r,n):Pn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fr(r,s),Q1(t,e,r,s,n);case 7:return Pn(t,e,e.pendingProps,n),e.child;case 8:return Pn(t,e,e.pendingProps.children,n),e.child;case 12:return Pn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,lt(Gh,r._currentValue),r._currentValue=i,o!==null)if(Yr(o.value,i)){if(o.children===s.children&&!Kn.current){e=qs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Bs(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Av(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Av(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Pn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Sl(e,n),s=Mr(s),r=r(s),e.flags|=1,Pn(t,e,r,n),e.child;case 14:return r=e.type,s=Fr(r,e.pendingProps),s=Fr(r.type,s),X1(t,e,r,s,n);case 15:return kN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Fr(r,s),xh(t,e),e.tag=1,qn(r)?(t=!0,Hh(e)):t=!1,Sl(e,n),SN(e,r,s),jv(e,r,s,n),Lv(null,e,r,!0,t,n);case 19:return RN(t,e,n);case 22:return TN(t,e,n)}throw Error(ne(156,e.tag))};function KN(t,e){return w_(t,e)}function qB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,e,n,r){return new qB(t,e,n,r)}function Ex(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GB(t){if(typeof t=="function")return Ex(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uw)return 11;if(t===Ww)return 14}return 2}function Uo(t,e){var n=t.alternate;return n===null?(n=kr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ch(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")Ex(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case el:return Ji(n.children,s,o,e);case Vw:i=8,s|=8;break;case sv:return t=kr(12,n,e,s|2),t.elementType=sv,t.lanes=o,t;case ov:return t=kr(13,n,e,s),t.elementType=ov,t.lanes=o,t;case iv:return t=kr(19,n,e,s),t.elementType=iv,t.lanes=o,t;case n_:return rm(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e_:i=10;break e;case t_:i=9;break e;case Uw:i=11;break e;case Ww:i=14;break e;case po:i=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=kr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function Ji(t,e,n,r){return t=kr(7,t,r,e),t.lanes=n,t}function rm(t,e,n,r){return t=kr(22,t,r,e),t.elementType=n_,t.lanes=n,t.stateNode={isHidden:!1},t}function Vg(t,e,n){return t=kr(6,t,null,e),t.lanes=n,t}function Ug(t,e,n){return e=kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cg(0),this.expirationTimes=Cg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kx(t,e,n,r,s,o,i,a,l){return t=new JB(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=kr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(o),t}function YB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Za,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qN(t){if(!t)return Xo;t=t._reactInternals;e:{if(xa(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(qn(n))return q_(t,n,e)}return e}function GN(t,e,n,r,s,o,i,a,l){return t=kx(n,r,!0,t,s,o,i,a,l),t.context=qN(null),n=t.current,r=_n(),s=Vo(n),o=Bs(r,s),o.callback=e??null,Bo(n,o,s),t.current.lanes=s,Fd(t,s,r),Gn(t,r),t}function sm(t,e,n,r){var s=e.current,o=_n(),i=Vo(s);return n=qN(n),e.context===null?e.context=n:e.pendingContext=n,e=Bs(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bo(s,e,i),t!==null&&(qr(t,s,i,o),yh(t,s,i)),i}function sp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tx(t,e){uC(t,e),(t=t.alternate)&&uC(t,e)}function QB(){return null}var JN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Px(t){this._internalRoot=t}om.prototype.render=Px.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));sm(t,e,null,null)};om.prototype.unmount=Px.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ia(function(){sm(null,t,null,null)}),e[Hs]=null}};function om(t){this._internalRoot=t}om.prototype.unstable_scheduleHydration=function(t){if(t){var e=T_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wo.length&&e!==0&&e<wo[n].priority;n++);wo.splice(n,0,t),n===0&&__(t)}};function _x(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dC(){}function XB(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=sp(i);o.call(c)}}var i=GN(e,r,t,0,null,!1,!1,"",dC);return t._reactRootContainer=i,t[Hs]=i.current,Yu(t.nodeType===8?t.parentNode:t),ia(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=sp(l);a.call(c)}}var l=kx(t,0,!1,null,null,!1,!1,"",dC);return t._reactRootContainer=l,t[Hs]=l.current,Yu(t.nodeType===8?t.parentNode:t),ia(function(){sm(e,l,n,r)}),l}function am(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var l=sp(i);a.call(l)}}sm(e,i,t,s)}else i=XB(n,e,t,s,r);return sp(i)}E_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=su(e.pendingLanes);n!==0&&(qw(e,n|1),Gn(e,jt()),!(Je&6)&&(Zl=jt()+500,li()))}break;case 13:ia(function(){var r=Ks(t,1);if(r!==null){var s=_n();qr(r,t,1,s)}}),Tx(t,1)}};Gw=function(t){if(t.tag===13){var e=Ks(t,134217728);if(e!==null){var n=_n();qr(e,t,134217728,n)}Tx(t,134217728)}};k_=function(t){if(t.tag===13){var e=Vo(t),n=Ks(t,e);if(n!==null){var r=_n();qr(n,t,e,r)}Tx(t,e)}};T_=function(){return rt};P_=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};gv=function(t,e,n){switch(e){case"input":if(cv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qp(r);if(!s)throw Error(ne(90));s_(r),cv(r,s)}}}break;case"textarea":i_(t,n);break;case"select":e=n.value,e!=null&&vl(t,!!n.multiple,e,!1)}};h_=bx;p_=ia;var ZB={usingClientEntryPoint:!1,Events:[Bd,sl,Qp,d_,f_,bx]},Hc={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ez={bundleType:Hc.bundleType,version:Hc.version,rendererPackageName:Hc.rendererPackageName,rendererConfig:Hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y_(t),t===null?null:t.stateNode},findFiberByHostInstance:Hc.findFiberByHostInstance||QB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{qp=Lf.inject(ez),gs=Lf}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZB;pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(e))throw Error(ne(200));return YB(t,e,null,n)};pr.createRoot=function(t,e){if(!_x(t))throw Error(ne(299));var n=!1,r="",s=JN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kx(t,1,!1,null,null,n,!1,r,s),t[Hs]=e.current,Yu(t.nodeType===8?t.parentNode:t),new Px(e)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=y_(e),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return ia(t)};pr.hydrate=function(t,e,n){if(!im(e))throw Error(ne(200));return am(null,t,e,!0,n)};pr.hydrateRoot=function(t,e,n){if(!_x(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=JN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=GN(e,null,t,1,n??null,s,!1,o,i),t[Hs]=e.current,Yu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new om(e)};pr.render=function(t,e,n){if(!im(e))throw Error(ne(200));return am(null,t,e,!1,n)};pr.unmountComponentAtNode=function(t){if(!im(t))throw Error(ne(40));return t._reactRootContainer?(ia(function(){am(null,null,t,!1,function(){t._reactRootContainer=null,t[Hs]=null})}),!0):!1};pr.unstable_batchedUpdates=bx;pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!im(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return am(t,e,n,!1,r)};pr.version="18.3.1-next-f1338f8080-20240426";function YN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YN)}catch(t){console.error(t)}}YN(),YP.exports=pr;var Cs=YP.exports;const Vd=Ow(Cs),tz=FP({__proto__:null,default:Vd},[Cs]);var fC=Cs;nv.createRoot=fC.createRoot,nv.hydrateRoot=fC.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ht(){return ht=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ht.apply(this,arguments)}var It;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(It||(It={}));const hC="popstate";function nz(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return od("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ud(s)}return sz(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ec(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rz(){return Math.random().toString(36).substr(2,8)}function pC(t,e){return{usr:t.state,key:t.key,idx:e}}function od(t,e,n,r){return n===void 0&&(n=null),ht({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ci(e):e,{state:n,key:e&&e.key||r||rz()})}function Ud(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sz(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=It.Pop,l=null,c=u();c==null&&(c=0,i.replaceState(ht({},i.state,{idx:c}),""));function u(){return(i.state||{idx:null}).idx}function d(){a=It.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:m.location,delta:v})}function f(w,v){a=It.Push;let x=od(m.location,w,v);c=u()+1;let b=pC(x,c),C=m.createHref(x);try{i.pushState(b,"",C)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(C)}o&&l&&l({action:a,location:m.location,delta:1})}function p(w,v){a=It.Replace;let x=od(m.location,w,v);c=u();let b=pC(x,c),C=m.createHref(x);i.replaceState(b,"",C),o&&l&&l({action:a,location:m.location,delta:0})}function y(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Ud(w);return x=x.replace(/ $/,"%20"),Ke(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return a},get location(){return t(s,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(hC,d),l=w,()=>{s.removeEventListener(hC,d),l=null}},createHref(w){return e(s,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return i.go(w)}};return m}var st;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(st||(st={}));const oz=new Set(["lazy","caseSensitive","path","id","index","children"]);function iz(t){return t.index===!0}function op(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,o)=>{let i=[...n,String(o)],a=typeof s.id=="string"?s.id:i.join("-");if(Ke(s.index!==!0||!s.children,"Cannot specify children on an index route"),Ke(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),iz(s)){let l=ht({},s,e(s),{id:a});return r[a]=l,l}else{let l=ht({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=op(s.children,e,i,r)),l}})}function Pi(t,e,n){return n===void 0&&(n="/"),Eh(t,e,n,!1)}function Eh(t,e,n,r){let s=typeof e=="string"?ci(e):e,o=Wd(s.pathname||"/",n);if(o==null)return null;let i=QN(t);lz(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=wz(o);a=yz(i[l],c,r)}return a}function az(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function QN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};l.relativePath.startsWith("/")&&(Ke(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Wo([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),QN(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:mz(c,o.index),routesMeta:u})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let l of XN(o.path))s(o,i,l)}),e}function XN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=XN(r.join("/")),a=[];return a.push(...i.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lz(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cz=/^:[\w-]+$/,uz=3,dz=2,fz=1,hz=10,pz=-2,mC=t=>t==="*";function mz(t,e){let n=t.split("/"),r=n.length;return n.some(mC)&&(r+=pz),e&&(r+=dz),n.filter(s=>!mC(s)).reduce((s,o)=>s+(cz.test(o)?uz:o===""?fz:hz),r)}function gz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yz(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},o="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=gC({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=gC({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:Wo([o,d.pathname]),pathnameBase:Sz(Wo([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=Wo([o,d.pathnameBase]))}return i}function gC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vz(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=a[d]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:i,pattern:t}}function vz(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ec(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ec(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xz(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ci(t):t;return{pathname:n?n.startsWith("/")?n:bz(n,e):e,search:Cz(r),hash:Ez(s)}}function bz(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Wg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eR(t,e){let n=ZN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tR(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ci(t):(s=ht({},t),Ke(!s.pathname||!s.pathname.includes("?"),Wg("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),Wg("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),Wg("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=xz(s,a),c=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Wo=t=>t.join("/").replace(/\/\/+/g,"/"),Sz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ez=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ip{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function lm(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nR=["post","put","patch","delete"],kz=new Set(nR),Tz=["get",...nR],Pz=new Set(Tz),_z=new Set([301,302,303,307,308]),Nz=new Set([307,308]),Hg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Rz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Kc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mz=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),rR="remix-router-transitions";function Az(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ke(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let A=t.detectErrorBoundary;s=L=>({hasErrorBoundary:A(L)})}else s=Mz;let o={},i=op(t.routes,s,void 0,o),a,l=t.basename||"/",c=t.dataStrategy||Iz,u=t.patchRoutesOnNavigation,d=ht({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,p=new Set,y=null,m=null,w=null,v=t.hydrationData!=null,x=Pi(i,t.history.location,l),b=null;if(x==null&&!u){let A=Bn(404,{pathname:t.history.location.pathname}),{matches:L,route:z}=PC(i);x=L,b={[z.id]:A}}x&&!t.hydrationData&&gf(x,i,t.history.location.pathname).active&&(x=null);let C;if(x)if(x.some(A=>A.route.lazy))C=!1;else if(!x.some(A=>A.route.loader))C=!0;else if(d.v7_partialHydration){let A=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null;if(L){let z=x.findIndex(X=>L[X.route.id]!==void 0);C=x.slice(0,z+1).every(X=>!Yv(X.route,A,L))}else C=x.every(z=>!Yv(z.route,A,L))}else C=t.hydrationData!=null;else if(C=!1,x=[],d.v7_partialHydration){let A=gf(null,i,t.history.location.pathname);A.active&&A.matches&&(x=A.matches)}let E,k={historyAction:t.history.action,location:t.history.location,matches:x,initialized:C,navigation:Hg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},P=It.Pop,S=!1,T,_=!1,R=new Map,j=null,V=!1,B=!1,te=[],K=new Set,I=new Map,N=0,O=-1,$=new Map,U=new Set,M=new Map,F=new Map,J=new Set,Y=new Map,W=new Map,H;function G(){if(f=t.history.listen(A=>{let{action:L,location:z,delta:X}=A;if(H){H(),H=void 0;return}ec(W.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=et({currentLocation:k.location,nextLocation:z,historyAction:L});if(de&&X!=null){let Se=new Promise(Ae=>{H=Ae});t.history.go(X*-1),Ne(de,{state:"blocked",location:z,proceed(){Ne(de,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),Se.then(()=>t.history.go(X))},reset(){let Ae=new Map(k.blockers);Ae.set(de,Kc),Q({blockers:Ae})}});return}return ge(L,z)}),n){Yz(e,R);let A=()=>Qz(e,R);e.addEventListener("pagehide",A),j=()=>e.removeEventListener("pagehide",A)}return k.initialized||ge(It.Pop,k.location,{initialHydration:!0}),E}function oe(){f&&f(),j&&j(),p.clear(),T&&T.abort(),k.fetchers.forEach((A,L)=>yt(L)),k.blockers.forEach((A,L)=>Oa(L))}function re(A){return p.add(A),()=>p.delete(A)}function Q(A,L){L===void 0&&(L={}),k=ht({},k,A);let z=[],X=[];d.v7_fetcherPersist&&k.fetchers.forEach((de,Se)=>{de.state==="idle"&&(J.has(Se)?X.push(Se):z.push(Se))}),[...p].forEach(de=>de(k,{deletedFetchers:X,viewTransitionOpts:L.viewTransitionOpts,flushSync:L.flushSync===!0})),d.v7_fetcherPersist&&(z.forEach(de=>k.fetchers.delete(de)),X.forEach(de=>yt(de)))}function q(A,L,z){var X,de;let{flushSync:Se}=z===void 0?{}:z,Ae=k.actionData!=null&&k.navigation.formMethod!=null&&zr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((X=A.state)==null?void 0:X._isRedirect)!==!0,pe;L.actionData?Object.keys(L.actionData).length>0?pe=L.actionData:pe=null:Ae?pe=k.actionData:pe=null;let ye=L.loaderData?kC(k.loaderData,L.loaderData,L.matches||[],L.errors):k.loaderData,fe=k.blockers;fe.size>0&&(fe=new Map(fe),fe.forEach((Ge,en)=>fe.set(en,Kc)));let Ce=S===!0||k.navigation.formMethod!=null&&zr(k.navigation.formMethod)&&((de=A.state)==null?void 0:de._isRedirect)!==!0;a&&(i=a,a=void 0),V||P===It.Pop||(P===It.Push?t.history.push(A,A.state):P===It.Replace&&t.history.replace(A,A.state));let Ve;if(P===It.Pop){let Ge=R.get(k.location.pathname);Ge&&Ge.has(A.pathname)?Ve={currentLocation:k.location,nextLocation:A}:R.has(A.pathname)&&(Ve={currentLocation:A,nextLocation:k.location})}else if(_){let Ge=R.get(k.location.pathname);Ge?Ge.add(A.pathname):(Ge=new Set([A.pathname]),R.set(k.location.pathname,Ge)),Ve={currentLocation:k.location,nextLocation:A}}Q(ht({},L,{actionData:pe,loaderData:ye,historyAction:P,location:A,initialized:!0,navigation:Hg,revalidation:"idle",restoreScrollPosition:mf(A,L.matches||k.matches),preventScrollReset:Ce,blockers:fe}),{viewTransitionOpts:Ve,flushSync:Se===!0}),P=It.Pop,S=!1,_=!1,V=!1,B=!1,te=[]}async function ce(A,L){if(typeof A=="number"){t.history.go(A);return}let z=Jv(k.location,k.matches,l,d.v7_prependBasename,A,d.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:X,submission:de,error:Se}=yC(d.v7_normalizeFormMethod,!1,z,L),Ae=k.location,pe=od(k.location,X,L&&L.state);pe=ht({},pe,t.history.encodeLocation(pe));let ye=L&&L.replace!=null?L.replace:void 0,fe=It.Push;ye===!0?fe=It.Replace:ye===!1||de!=null&&zr(de.formMethod)&&de.formAction===k.location.pathname+k.location.search&&(fe=It.Replace);let Ce=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,Ve=(L&&L.flushSync)===!0,Ge=et({currentLocation:Ae,nextLocation:pe,historyAction:fe});if(Ge){Ne(Ge,{state:"blocked",location:pe,proceed(){Ne(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),ce(A,L)},reset(){let en=new Map(k.blockers);en.set(Ge,Kc),Q({blockers:en})}});return}return await ge(fe,pe,{submission:de,pendingError:Se,preventScrollReset:Ce,replace:L&&L.replace,enableViewTransition:L&&L.viewTransition,flushSync:Ve})}function ae(){if(Mt(),Q({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){ge(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}ge(P||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:_===!0})}}async function ge(A,L,z){T&&T.abort(),T=null,P=A,V=(z&&z.startUninterruptedRevalidation)===!0,ja(k.location,k.matches),S=(z&&z.preventScrollReset)===!0,_=(z&&z.enableViewTransition)===!0;let X=a||i,de=z&&z.overrideNavigation,Se=Pi(X,L,l),Ae=(z&&z.flushSync)===!0,pe=gf(Se,X,L.pathname);if(pe.active&&pe.matches&&(Se=pe.matches),!Se){let{error:it,notFoundMatches:Xe,route:Et}=qe(L.pathname);q(L,{matches:Xe,loaderData:{},errors:{[Et.id]:it}},{flushSync:Ae});return}if(k.initialized&&!B&&Vz(k.location,L)&&!(z&&z.submission&&zr(z.submission.formMethod))){q(L,{matches:Se},{flushSync:Ae});return}T=new AbortController;let ye=$a(t.history,L,T.signal,z&&z.submission),fe;if(z&&z.pendingError)fe=[_i(Se).route.id,{type:st.error,error:z.pendingError}];else if(z&&z.submission&&zr(z.submission.formMethod)){let it=await Re(ye,L,z.submission,Se,pe.active,{replace:z.replace,flushSync:Ae});if(it.shortCircuited)return;if(it.pendingActionResult){let[Xe,Et]=it.pendingActionResult;if(sr(Et)&&lm(Et.error)&&Et.error.status===404){T=null,q(L,{matches:it.matches,loaderData:{},errors:{[Xe]:Et.error}});return}}Se=it.matches||Se,fe=it.pendingActionResult,de=Kg(L,z.submission),Ae=!1,pe.active=!1,ye=$a(t.history,ye.url,ye.signal)}let{shortCircuited:Ce,matches:Ve,loaderData:Ge,errors:en}=await Ee(ye,L,Se,pe.active,de,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,Ae,fe);Ce||(T=null,q(L,ht({matches:Ve||Se},TC(fe),{loaderData:Ge,errors:en})))}async function Re(A,L,z,X,de,Se){Se===void 0&&(Se={}),Mt();let Ae=Gz(L,z);if(Q({navigation:Ae},{flushSync:Se.flushSync===!0}),de){let fe=await yf(X,L.pathname,A.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let Ce=_i(fe.partialMatches).route.id;return{matches:fe.partialMatches,pendingActionResult:[Ce,{type:st.error,error:fe.error}]}}else if(fe.matches)X=fe.matches;else{let{notFoundMatches:Ce,error:Ve,route:Ge}=qe(L.pathname);return{matches:Ce,pendingActionResult:[Ge.id,{type:st.error,error:Ve}]}}}let pe,ye=iu(X,L);if(!ye.route.action&&!ye.route.lazy)pe={type:st.error,error:Bn(405,{method:A.method,pathname:L.pathname,routeId:ye.route.id})};else if(pe=(await $t("action",k,A,[ye],X,null))[ye.route.id],A.signal.aborted)return{shortCircuited:!0};if(Ii(pe)){let fe;return Se&&Se.replace!=null?fe=Se.replace:fe=SC(pe.response.headers.get("Location"),new URL(A.url),l)===k.location.pathname+k.location.search,await Ye(A,pe,!0,{submission:z,replace:fe}),{shortCircuited:!0}}if(Ao(pe))throw Bn(400,{type:"defer-action"});if(sr(pe)){let fe=_i(X,ye.route.id);return(Se&&Se.replace)!==!0&&(P=It.Push),{matches:X,pendingActionResult:[fe.route.id,pe]}}return{matches:X,pendingActionResult:[ye.route.id,pe]}}async function Ee(A,L,z,X,de,Se,Ae,pe,ye,fe,Ce){let Ve=de||Kg(L,Se),Ge=Se||Ae||NC(Ve),en=!V&&(!d.v7_partialHydration||!ye);if(X){if(en){let kt=Be(Ce);Q(ht({navigation:Ve},kt!==void 0?{actionData:kt}:{}),{flushSync:fe})}let Qe=await yf(z,L.pathname,A.signal);if(Qe.type==="aborted")return{shortCircuited:!0};if(Qe.type==="error"){let kt=_i(Qe.partialMatches).route.id;return{matches:Qe.partialMatches,loaderData:{},errors:{[kt]:Qe.error}}}else if(Qe.matches)z=Qe.matches;else{let{error:kt,notFoundMatches:Ia,route:Lc}=qe(L.pathname);return{matches:Ia,loaderData:{},errors:{[Lc.id]:kt}}}}let it=a||i,[Xe,Et]=wC(t.history,k,z,Ge,L,d.v7_partialHydration&&ye===!0,d.v7_skipActionErrorRevalidation,B,te,K,J,M,U,it,l,Ce);if(Zt(Qe=>!(z&&z.some(kt=>kt.route.id===Qe))||Xe&&Xe.some(kt=>kt.route.id===Qe)),O=++N,Xe.length===0&&Et.length===0){let Qe=eo();return q(L,ht({matches:z,loaderData:{},errors:Ce&&sr(Ce[1])?{[Ce[0]]:Ce[1].error}:null},TC(Ce),Qe?{fetchers:new Map(k.fetchers)}:{}),{flushSync:fe}),{shortCircuited:!0}}if(en){let Qe={};if(!X){Qe.navigation=Ve;let kt=Be(Ce);kt!==void 0&&(Qe.actionData=kt)}Et.length>0&&(Qe.fetchers=Te(Et)),Q(Qe,{flushSync:fe})}Et.forEach(Qe=>{At(Qe.key),Qe.controller&&I.set(Qe.key,Qe.controller)});let Da=()=>Et.forEach(Qe=>At(Qe.key));T&&T.signal.addEventListener("abort",Da);let{loaderResults:Dc,fetcherResults:Ns}=await Ze(k,z,Xe,Et,A);if(A.signal.aborted)return{shortCircuited:!0};T&&T.signal.removeEventListener("abort",Da),Et.forEach(Qe=>I.delete(Qe.key));let rs=Ff(Dc);if(rs)return await Ye(A,rs.result,!0,{replace:pe}),{shortCircuited:!0};if(rs=Ff(Ns),rs)return U.add(rs.key),await Ye(A,rs.result,!0,{replace:pe}),{shortCircuited:!0};let{loaderData:gg,errors:Ic}=EC(k,z,Dc,Ce,Et,Ns,Y);Y.forEach((Qe,kt)=>{Qe.subscribe(Ia=>{(Ia||Qe.done)&&Y.delete(kt)})}),d.v7_partialHydration&&ye&&k.errors&&(Ic=ht({},k.errors,Ic));let wi=eo(),vf=to(O),wf=wi||vf||Et.length>0;return ht({matches:z,loaderData:gg,errors:Ic},wf?{fetchers:new Map(k.fetchers)}:{})}function Be(A){if(A&&!sr(A[1]))return{[A[0]]:A[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Te(A){return A.forEach(L=>{let z=k.fetchers.get(L.key),X=qc(void 0,z?z.data:void 0);k.fetchers.set(L.key,X)}),new Map(k.fetchers)}function mt(A,L,z,X){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");At(A);let de=(X&&X.flushSync)===!0,Se=a||i,Ae=Jv(k.location,k.matches,l,d.v7_prependBasename,z,d.v7_relativeSplatPath,L,X==null?void 0:X.relative),pe=Pi(Se,Ae,l),ye=gf(pe,Se,Ae);if(ye.active&&ye.matches&&(pe=ye.matches),!pe){gt(A,L,Bn(404,{pathname:Ae}),{flushSync:de});return}let{path:fe,submission:Ce,error:Ve}=yC(d.v7_normalizeFormMethod,!0,Ae,X);if(Ve){gt(A,L,Ve,{flushSync:de});return}let Ge=iu(pe,fe),en=(X&&X.preventScrollReset)===!0;if(Ce&&zr(Ce.formMethod)){Qt(A,L,fe,Ge,pe,ye.active,de,en,Ce);return}M.set(A,{routeId:L,path:fe}),Xt(A,L,fe,Ge,pe,ye.active,de,en,Ce)}async function Qt(A,L,z,X,de,Se,Ae,pe,ye){Mt(),M.delete(A);function fe(Dt){if(!Dt.route.action&&!Dt.route.lazy){let La=Bn(405,{method:ye.formMethod,pathname:z,routeId:L});return gt(A,L,La,{flushSync:Ae}),!0}return!1}if(!Se&&fe(X))return;let Ce=k.fetchers.get(A);nt(A,Jz(ye,Ce),{flushSync:Ae});let Ve=new AbortController,Ge=$a(t.history,z,Ve.signal,ye);if(Se){let Dt=await yf(de,z,Ge.signal);if(Dt.type==="aborted")return;if(Dt.type==="error"){gt(A,L,Dt.error,{flushSync:Ae});return}else if(Dt.matches){if(de=Dt.matches,X=iu(de,z),fe(X))return}else{gt(A,L,Bn(404,{pathname:z}),{flushSync:Ae});return}}I.set(A,Ve);let en=N,Xe=(await $t("action",k,Ge,[X],de,A))[X.route.id];if(Ge.signal.aborted){I.get(A)===Ve&&I.delete(A);return}if(d.v7_fetcherPersist&&J.has(A)){if(Ii(Xe)||sr(Xe)){nt(A,oo(void 0));return}}else{if(Ii(Xe))if(I.delete(A),O>en){nt(A,oo(void 0));return}else return U.add(A),nt(A,qc(ye)),Ye(Ge,Xe,!1,{fetcherSubmission:ye,preventScrollReset:pe});if(sr(Xe)){gt(A,L,Xe.error);return}}if(Ao(Xe))throw Bn(400,{type:"defer-action"});let Et=k.navigation.location||k.location,Da=$a(t.history,Et,Ve.signal),Dc=a||i,Ns=k.navigation.state!=="idle"?Pi(Dc,k.navigation.location,l):k.matches;Ke(Ns,"Didn't find any matches after fetcher action");let rs=++N;$.set(A,rs);let gg=qc(ye,Xe.data);k.fetchers.set(A,gg);let[Ic,wi]=wC(t.history,k,Ns,ye,Et,!1,d.v7_skipActionErrorRevalidation,B,te,K,J,M,U,Dc,l,[X.route.id,Xe]);wi.filter(Dt=>Dt.key!==A).forEach(Dt=>{let La=Dt.key,n1=k.fetchers.get(La),_F=qc(void 0,n1?n1.data:void 0);k.fetchers.set(La,_F),At(La),Dt.controller&&I.set(La,Dt.controller)}),Q({fetchers:new Map(k.fetchers)});let vf=()=>wi.forEach(Dt=>At(Dt.key));Ve.signal.addEventListener("abort",vf);let{loaderResults:wf,fetcherResults:Qe}=await Ze(k,Ns,Ic,wi,Da);if(Ve.signal.aborted)return;Ve.signal.removeEventListener("abort",vf),$.delete(A),I.delete(A),wi.forEach(Dt=>I.delete(Dt.key));let kt=Ff(wf);if(kt)return Ye(Da,kt.result,!1,{preventScrollReset:pe});if(kt=Ff(Qe),kt)return U.add(kt.key),Ye(Da,kt.result,!1,{preventScrollReset:pe});let{loaderData:Ia,errors:Lc}=EC(k,Ns,wf,void 0,wi,Qe,Y);if(k.fetchers.has(A)){let Dt=oo(Xe.data);k.fetchers.set(A,Dt)}to(rs),k.navigation.state==="loading"&&rs>O?(Ke(P,"Expected pending action"),T&&T.abort(),q(k.navigation.location,{matches:Ns,loaderData:Ia,errors:Lc,fetchers:new Map(k.fetchers)})):(Q({errors:Lc,loaderData:kC(k.loaderData,Ia,Ns,Lc),fetchers:new Map(k.fetchers)}),B=!1)}async function Xt(A,L,z,X,de,Se,Ae,pe,ye){let fe=k.fetchers.get(A);nt(A,qc(ye,fe?fe.data:void 0),{flushSync:Ae});let Ce=new AbortController,Ve=$a(t.history,z,Ce.signal);if(Se){let Xe=await yf(de,z,Ve.signal);if(Xe.type==="aborted")return;if(Xe.type==="error"){gt(A,L,Xe.error,{flushSync:Ae});return}else if(Xe.matches)de=Xe.matches,X=iu(de,z);else{gt(A,L,Bn(404,{pathname:z}),{flushSync:Ae});return}}I.set(A,Ce);let Ge=N,it=(await $t("loader",k,Ve,[X],de,A))[X.route.id];if(Ao(it)&&(it=await Rx(it,Ve.signal,!0)||it),I.get(A)===Ce&&I.delete(A),!Ve.signal.aborted){if(J.has(A)){nt(A,oo(void 0));return}if(Ii(it))if(O>Ge){nt(A,oo(void 0));return}else{U.add(A),await Ye(Ve,it,!1,{preventScrollReset:pe});return}if(sr(it)){gt(A,L,it.error);return}Ke(!Ao(it),"Unhandled fetcher deferred data"),nt(A,oo(it.data))}}async function Ye(A,L,z,X){let{submission:de,fetcherSubmission:Se,preventScrollReset:Ae,replace:pe}=X===void 0?{}:X;L.response.headers.has("X-Remix-Revalidate")&&(B=!0);let ye=L.response.headers.get("Location");Ke(ye,"Expected a Location header on the redirect Response"),ye=SC(ye,new URL(A.url),l);let fe=od(k.location,ye,{_isRedirect:!0});if(n){let Xe=!1;if(L.response.headers.has("X-Remix-Reload-Document"))Xe=!0;else if(Nx.test(ye)){const Et=t.history.createURL(ye);Xe=Et.origin!==e.location.origin||Wd(Et.pathname,l)==null}if(Xe){pe?e.location.replace(ye):e.location.assign(ye);return}}T=null;let Ce=pe===!0||L.response.headers.has("X-Remix-Replace")?It.Replace:It.Push,{formMethod:Ve,formAction:Ge,formEncType:en}=k.navigation;!de&&!Se&&Ve&&Ge&&en&&(de=NC(k.navigation));let it=de||Se;if(Nz.has(L.response.status)&&it&&zr(it.formMethod))await ge(Ce,fe,{submission:ht({},it,{formAction:ye}),preventScrollReset:Ae||S,enableViewTransition:z?_:void 0});else{let Xe=Kg(fe,de);await ge(Ce,fe,{overrideNavigation:Xe,fetcherSubmission:Se,preventScrollReset:Ae||S,enableViewTransition:z?_:void 0})}}async function $t(A,L,z,X,de,Se){let Ae,pe={};try{Ae=await Lz(c,A,L,z,X,de,Se,o,s)}catch(ye){return X.forEach(fe=>{pe[fe.route.id]={type:st.error,error:ye}}),pe}for(let[ye,fe]of Object.entries(Ae))if(Uz(fe)){let Ce=fe.result;pe[ye]={type:st.redirect,response:Bz(Ce,z,ye,de,l,d.v7_relativeSplatPath)}}else pe[ye]=await $z(fe);return pe}async function Ze(A,L,z,X,de){let Se=A.matches,Ae=$t("loader",A,de,z,L,null),pe=Promise.all(X.map(async Ce=>{if(Ce.matches&&Ce.match&&Ce.controller){let Ge=(await $t("loader",A,$a(t.history,Ce.path,Ce.controller.signal),[Ce.match],Ce.matches,Ce.key))[Ce.match.route.id];return{[Ce.key]:Ge}}else return Promise.resolve({[Ce.key]:{type:st.error,error:Bn(404,{pathname:Ce.path})}})})),ye=await Ae,fe=(await pe).reduce((Ce,Ve)=>Object.assign(Ce,Ve),{});return await Promise.all([Kz(L,ye,de.signal,Se,A.loaderData),qz(L,fe,X)]),{loaderResults:ye,fetcherResults:fe}}function Mt(){B=!0,te.push(...Zt()),M.forEach((A,L)=>{I.has(L)&&K.add(L),At(L)})}function nt(A,L,z){z===void 0&&(z={}),k.fetchers.set(A,L),Q({fetchers:new Map(k.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function gt(A,L,z,X){X===void 0&&(X={});let de=_i(k.matches,L);yt(A),Q({errors:{[de.route.id]:z},fetchers:new Map(k.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function fn(A){return d.v7_fetcherPersist&&(F.set(A,(F.get(A)||0)+1),J.has(A)&&J.delete(A)),k.fetchers.get(A)||Rz}function yt(A){let L=k.fetchers.get(A);I.has(A)&&!(L&&L.state==="loading"&&$.has(A))&&At(A),M.delete(A),$.delete(A),U.delete(A),J.delete(A),K.delete(A),k.fetchers.delete(A)}function Ut(A){if(d.v7_fetcherPersist){let L=(F.get(A)||0)-1;L<=0?(F.delete(A),J.add(A)):F.set(A,L)}else yt(A);Q({fetchers:new Map(k.fetchers)})}function At(A){let L=I.get(A);L&&(L.abort(),I.delete(A))}function Zn(A){for(let L of A){let z=fn(L),X=oo(z.data);k.fetchers.set(L,X)}}function eo(){let A=[],L=!1;for(let z of U){let X=k.fetchers.get(z);Ke(X,"Expected fetcher: "+z),X.state==="loading"&&(U.delete(z),A.push(z),L=!0)}return Zn(A),L}function to(A){let L=[];for(let[z,X]of $)if(X<A){let de=k.fetchers.get(z);Ke(de,"Expected fetcher: "+z),de.state==="loading"&&(At(z),$.delete(z),L.push(z))}return Zn(L),L.length>0}function gr(A,L){let z=k.blockers.get(A)||Kc;return W.get(A)!==L&&W.set(A,L),z}function Oa(A){k.blockers.delete(A),W.delete(A)}function Ne(A,L){let z=k.blockers.get(A)||Kc;Ke(z.state==="unblocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="blocked"||z.state==="blocked"&&L.state==="proceeding"||z.state==="blocked"&&L.state==="unblocked"||z.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+L.state);let X=new Map(k.blockers);X.set(A,L),Q({blockers:X})}function et(A){let{currentLocation:L,nextLocation:z,historyAction:X}=A;if(W.size===0)return;W.size>1&&ec(!1,"A router only supports one blocker at a time");let de=Array.from(W.entries()),[Se,Ae]=de[de.length-1],pe=k.blockers.get(Se);if(!(pe&&pe.state==="proceeding")&&Ae({currentLocation:L,nextLocation:z,historyAction:X}))return Se}function qe(A){let L=Bn(404,{pathname:A}),z=a||i,{matches:X,route:de}=PC(z);return Zt(),{notFoundMatches:X,route:de,error:L}}function Zt(A){let L=[];return Y.forEach((z,X)=>{(!A||A(X))&&(z.cancel(),L.push(X),Y.delete(X))}),L}function En(A,L,z){if(y=A,w=L,m=z||null,!v&&k.navigation===Hg){v=!0;let X=mf(k.location,k.matches);X!=null&&Q({restoreScrollPosition:X})}return()=>{y=null,w=null,m=null}}function _s(A,L){return m&&m(A,L.map(X=>az(X,k.loaderData)))||A.key}function ja(A,L){if(y&&w){let z=_s(A,L);y[z]=w()}}function mf(A,L){if(y){let z=_s(A,L),X=y[z];if(typeof X=="number")return X}return null}function gf(A,L,z){if(u)if(A){if(Object.keys(A[0].params).length>0)return{active:!0,matches:Eh(L,z,l,!0)}}else return{active:!0,matches:Eh(L,z,l,!0)||[]};return{active:!1,matches:null}}async function yf(A,L,z){if(!u)return{type:"success",matches:A};let X=A;for(;;){let de=a==null,Se=a||i,Ae=o;try{await u({path:L,matches:X,patch:(fe,Ce)=>{z.aborted||bC(fe,Ce,Se,Ae,s)}})}catch(fe){return{type:"error",error:fe,partialMatches:X}}finally{de&&!z.aborted&&(i=[...i])}if(z.aborted)return{type:"aborted"};let pe=Pi(Se,L,l);if(pe)return{type:"success",matches:pe};let ye=Eh(Se,L,l,!0);if(!ye||X.length===ye.length&&X.every((fe,Ce)=>fe.route.id===ye[Ce].route.id))return{type:"success",matches:null};X=ye}}function TF(A){o={},a=op(A,s,void 0,o)}function PF(A,L){let z=a==null;bC(A,L,a||i,o,s),z&&(i=[...i],Q({}))}return E={get basename(){return l},get future(){return d},get state(){return k},get routes(){return i},get window(){return e},initialize:G,subscribe:re,enableScrollRestoration:En,navigate:ce,fetch:mt,revalidate:ae,createHref:A=>t.history.createHref(A),encodeLocation:A=>t.history.encodeLocation(A),getFetcher:fn,deleteFetcher:Ut,dispose:oe,getBlocker:gr,deleteBlocker:Oa,patchRoutes:PF,_internalFetchControllers:I,_internalActiveDeferreds:Y,_internalSetRoutes:TF},E}function Oz(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Jv(t,e,n,r,s,o,i,a){let l,c;if(i){l=[];for(let d of e)if(l.push(d),d.route.id===i){c=d;break}}else l=e,c=e[e.length-1];let u=tR(s||".",eR(l,o),Wd(t.pathname,n)||t.pathname,a==="path");if(s==null&&(u.search=t.search,u.hash=t.hash),(s==null||s===""||s===".")&&c){let d=Mx(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let f=new URLSearchParams(u.search),p=f.getAll("index");f.delete("index"),p.filter(m=>m).forEach(m=>f.append("index",m));let y=f.toString();u.search=y?"?"+y:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Wo([n,u.pathname])),Ud(u)}function yC(t,e,n,r){if(!r||!Oz(r))return{path:n};if(r.formMethod&&!Hz(r.formMethod))return{path:n,error:Bn(405,{method:r.formMethod})};let s=()=>({path:n,error:Bn(400,{type:"invalid-body"})}),o=r.formMethod||"get",i=t?o.toUpperCase():o.toLowerCase(),a=iR(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!zr(i))return s();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,y)=>{let[m,w]=y;return""+p+m+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:i,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!zr(i))return s();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:i,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return s()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Qv(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Qv(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=CC(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=CC(l)}catch{return s()}let u={formMethod:i,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(zr(u.formMethod))return{path:n,submission:u};let d=ci(n);return e&&d.search&&Mx(d.search)&&l.append("index",""),d.search="?"+l,{path:Ud(d),submission:u}}function vC(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(s=>s.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function wC(t,e,n,r,s,o,i,a,l,c,u,d,f,p,y,m){let w=m?sr(m[1])?m[1].error:m[1].data:void 0,v=t.createURL(e.location),x=t.createURL(s),b=n;o&&e.errors?b=vC(n,Object.keys(e.errors)[0],!0):m&&sr(m[1])&&(b=vC(n,m[0]));let C=m?m[1].statusCode:void 0,E=i&&C&&C>=400,k=b.filter((S,T)=>{let{route:_}=S;if(_.lazy)return!0;if(_.loader==null)return!1;if(o)return Yv(_,e.loaderData,e.errors);if(jz(e.loaderData,e.matches[T],S)||l.some(V=>V===S.route.id))return!0;let R=e.matches[T],j=S;return xC(S,ht({currentUrl:v,currentParams:R.params,nextUrl:x,nextParams:j.params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:E?!1:a||v.pathname+v.search===x.pathname+x.search||v.search!==x.search||sR(R,j)}))}),P=[];return d.forEach((S,T)=>{if(o||!n.some(B=>B.route.id===S.routeId)||u.has(T))return;let _=Pi(p,S.path,y);if(!_){P.push({key:T,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(T),j=iu(_,S.path),V=!1;f.has(T)?V=!1:c.has(T)?(c.delete(T),V=!0):R&&R.state!=="idle"&&R.data===void 0?V=a:V=xC(j,ht({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:w,actionStatus:C,defaultShouldRevalidate:E?!1:a})),V&&P.push({key:T,routeId:S.routeId,path:S.path,matches:_,match:j,controller:new AbortController})}),[k,P]}function Yv(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function jz(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function sR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function xC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function bC(t,e,n,r,s){var o;let i;if(t){let c=r[t];Ke(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),i=c.children}else i=n;let a=e.filter(c=>!i.some(u=>oR(c,u))),l=op(a,s,[t||"_","patch",String(((o=i)==null?void 0:o.length)||"0")],r);i.push(...l)}function oR(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var s;return(s=e.children)==null?void 0:s.some(o=>oR(n,o))}):!1}async function Dz(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];Ke(s,"No route found in manifest");let o={};for(let i in r){let l=s[i]!==void 0&&i!=="hasErrorBoundary";ec(!l,'Route "'+s.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!l&&!oz.has(i)&&(o[i]=r[i])}Object.assign(s,o),Object.assign(s,ht({},e(s),{lazy:void 0}))}async function Iz(t){let{matches:e}=t,n=e.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,o,i)=>Object.assign(s,{[n[i].route.id]:o}),{})}async function Lz(t,e,n,r,s,o,i,a,l,c){let u=o.map(p=>p.route.lazy?Dz(p.route,l,a):void 0),d=o.map((p,y)=>{let m=u[y],w=s.some(x=>x.route.id===p.route.id);return ht({},p,{shouldLoad:w,resolve:async x=>(x&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(w=!0),w?Fz(e,r,p,m,x,c):Promise.resolve({type:st.data,result:void 0}))})}),f=await t({matches:d,request:r,params:o[0].params,fetcherKey:i,context:c});try{await Promise.all(u)}catch{}return f}async function Fz(t,e,n,r,s,o){let i,a,l=c=>{let u,d=new Promise((y,m)=>u=m);a=()=>u(),e.signal.addEventListener("abort",a);let f=y=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:o},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(m=>f(m)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,d])};try{let c=n.route[t];if(r)if(c){let u,[d]=await Promise.all([l(c).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,c=n.route[t],c)i=await l(c);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw Bn(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:st.data,result:void 0};else if(c)i=await l(c);else{let u=new URL(e.url),d=u.pathname+u.search;throw Bn(404,{pathname:d})}Ke(i.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:st.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return i}async function $z(t){let{result:e,type:n}=t;if(aR(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(u){return{type:st.error,error:u}}return n===st.error?{type:st.error,error:new ip(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:st.data,data:c,statusCode:e.status,headers:e.headers}}if(n===st.error){if(_C(e)){var r;if(e.data instanceof Error){var s;return{type:st.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new ip(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:st.error,error:e,statusCode:lm(e)?e.status:void 0}}if(Wz(e)){var o,i;return{type:st.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((i=e.init)==null?void 0:i.headers)&&new Headers(e.init.headers)}}if(_C(e)){var a,l;return{type:st.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:st.data,data:e}}function Bz(t,e,n,r,s,o){let i=t.headers.get("Location");if(Ke(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!Nx.test(i)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);i=Jv(new URL(e.url),a,s,!0,i,o),t.headers.set("Location",i)}return t}function SC(t,e,n){if(Nx.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Wd(s.pathname,n)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}return t}function $a(t,e,n,r){let s=t.createURL(iR(e)).toString(),o={signal:n};if(r&&zr(r.formMethod)){let{formMethod:i,formEncType:a}=r;o.method=i.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=Qv(r.formData):o.body=r.formData}return new Request(s,o)}function Qv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function CC(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function zz(t,e,n,r,s){let o={},i=null,a,l=!1,c={},u=n&&sr(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,p=e[f];if(Ke(!Ii(p),"Cannot handle redirect results in processLoaderData"),sr(p)){let y=p.error;u!==void 0&&(y=u,u=void 0),i=i||{};{let m=_i(t,f);i[m.route.id]==null&&(i[m.route.id]=y)}o[f]=void 0,l||(l=!0,a=lm(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else Ao(p)?(r.set(f,p.deferredData),o[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)):(o[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers))}),u!==void 0&&n&&(i={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:i,statusCode:a||200,loaderHeaders:c}}function EC(t,e,n,r,s,o,i){let{loaderData:a,errors:l}=zz(e,n,r,i);return s.forEach(c=>{let{key:u,match:d,controller:f}=c,p=o[u];if(Ke(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(sr(p)){let y=_i(t.matches,d==null?void 0:d.route.id);l&&l[y.route.id]||(l=ht({},l,{[y.route.id]:p.error})),t.fetchers.delete(u)}else if(Ii(p))Ke(!1,"Unhandled fetcher revalidation redirect");else if(Ao(p))Ke(!1,"Unhandled fetcher deferred data");else{let y=oo(p.data);t.fetchers.set(u,y)}}),{loaderData:a,errors:l}}function kC(t,e,n,r){let s=ht({},e);for(let o of n){let i=o.route.id;if(e.hasOwnProperty(i)?e[i]!==void 0&&(s[i]=e[i]):t[i]!==void 0&&o.route.loader&&(s[i]=t[i]),r&&r.hasOwnProperty(i))break}return s}function TC(t){return t?sr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function _i(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function PC(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Bn(t,e){let{pathname:n,routeId:r,method:s,type:o,message:i}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s&&n&&r?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new ip(t||500,a,new Error(l),!0)}function Ff(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(Ii(s))return{key:r,result:s}}}function iR(t){let e=typeof t=="string"?ci(t):t;return Ud(ht({},e,{hash:""}))}function Vz(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Uz(t){return aR(t.result)&&_z.has(t.result.status)}function Ao(t){return t.type===st.deferred}function sr(t){return t.type===st.error}function Ii(t){return(t&&t.type)===st.redirect}function _C(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Wz(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function aR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Hz(t){return Pz.has(t.toLowerCase())}function zr(t){return kz.has(t.toLowerCase())}async function Kz(t,e,n,r,s){let o=Object.entries(e);for(let i=0;i<o.length;i++){let[a,l]=o[i],c=t.find(f=>(f==null?void 0:f.route.id)===a);if(!c)continue;let u=r.find(f=>f.route.id===c.route.id),d=u!=null&&!sR(u,c)&&(s&&s[c.route.id])!==void 0;Ao(l)&&d&&await Rx(l,n,!1).then(f=>{f&&(e[a]=f)})}}async function qz(t,e,n){for(let r=0;r<n.length;r++){let{key:s,routeId:o,controller:i}=n[r],a=e[s];t.find(c=>(c==null?void 0:c.route.id)===o)&&Ao(a)&&(Ke(i,"Expected an AbortController for revalidating fetcher deferred result"),await Rx(a,i.signal,!0).then(c=>{c&&(e[s]=c)}))}}async function Rx(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:st.data,data:t.deferredData.unwrappedData}}catch(s){return{type:st.error,error:s}}return{type:st.data,data:t.deferredData.data}}}function Mx(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function iu(t,e){let n=typeof e=="string"?ci(e).search:e.search;if(t[t.length-1].route.index&&Mx(n||""))return t[t.length-1];let r=ZN(t);return r[r.length-1]}function NC(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:o,json:i}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(i!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function Kg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Gz(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Jz(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function oo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Yz(t,e){try{let n=t.sessionStorage.getItem(rR);if(n){let r=JSON.parse(n);for(let[s,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(s,new Set(o||[]))}}catch{}}function Qz(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(rR,JSON.stringify(n))}catch(r){ec(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(this,arguments)}const cm=g.createContext(null),lR=g.createContext(null),um=g.createContext(null),Ax=g.createContext(null),ba=g.createContext({outlet:null,matches:[],isDataRoute:!1}),cR=g.createContext(null);function dm(){return g.useContext(Ax)!=null}function uR(){return dm()||Ke(!1),g.useContext(Ax).location}function dR(t){g.useContext(um).static||g.useLayoutEffect(t)}function fR(){let{isDataRoute:t}=g.useContext(ba);return t?u4():Xz()}function Xz(){dm()||Ke(!1);let t=g.useContext(cm),{basename:e,future:n,navigator:r}=g.useContext(um),{matches:s}=g.useContext(ba),{pathname:o}=uR(),i=JSON.stringify(eR(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return dR(()=>{a.current=!0}),g.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=tR(c,JSON.parse(i),o,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wo([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,i,o,t])}function Zz(){let{matches:t}=g.useContext(ba),e=t[t.length-1];return e?e.params:{}}function e4(t,e,n,r){dm()||Ke(!1);let{navigator:s}=g.useContext(um),{matches:o}=g.useContext(ba),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c=uR(),u;u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=Pi(t,{pathname:f});return o4(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:Wo([l,s.encodeLocation?s.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:Wo([l,s.encodeLocation?s.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r)}function t4(){let t=c4(),e=lm(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const n4=g.createElement(t4,null);class r4 extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ba.Provider,{value:this.props.routeContext},g.createElement(cR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function s4(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(cm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ba.Provider,{value:e},r)}function o4(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=i.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ke(!1),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,f)=>{let p,y=!1,m=null,w=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||n4,l&&(c<0&&f===0?(y=!0,w=null):c===f&&(y=!0,w=d.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,f+1)),x=()=>{let b;return p?b=m:y?b=w:d.route.Component?b=g.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,g.createElement(s4,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?g.createElement(r4,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var hR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hR||{}),lp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lp||{});function i4(t){let e=g.useContext(cm);return e||Ke(!1),e}function a4(t){let e=g.useContext(lR);return e||Ke(!1),e}function l4(t){let e=g.useContext(ba);return e||Ke(!1),e}function pR(t){let e=l4(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function c4(){var t;let e=g.useContext(cR),n=a4(lp.UseRouteError),r=pR(lp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function u4(){let{router:t}=i4(hR.UseNavigateStable),e=pR(lp.UseNavigateStable),n=g.useRef(!1);return dR(()=>{n.current=!0}),g.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ap({fromRouteId:e},o)))},[t,e])}function d4(t){let{basename:e="/",children:n=null,location:r,navigationType:s=It.Pop,navigator:o,static:i=!1,future:a}=t;dm()&&Ke(!1);let l=e.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:o,static:i,future:ap({v7_relativeSplatPath:!1},a)}),[l,a,o,i]);typeof r=="string"&&(r=ci(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:y="default"}=r,m=g.useMemo(()=>{let w=Wd(u,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:p,key:y},navigationType:s}},[l,u,d,f,p,y,s]);return m==null?null:g.createElement(um.Provider,{value:c},g.createElement(Ax.Provider,{children:n,value:m}))}new Promise(()=>{});function f4(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:g.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cp.apply(this,arguments)}const h4="6";try{window.__reactRouterVersion=h4}catch{}function p4(t,e){return Az({basename:void 0,future:cp({},void 0,{v7_prependBasename:!0}),history:nz({window:void 0}),hydrationData:m4(),routes:t,mapRouteProperties:f4,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function m4(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=cp({},e,{errors:g4(e.errors)})),e}function g4(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new ip(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let i=new o(s.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let o=new Error(s.message);o.stack="",n[r]=o}}else n[r]=s;return n}const y4=g.createContext({isTransitioning:!1}),v4=g.createContext(new Map),w4="startTransition",RC=Fw[w4],x4="flushSync",MC=tz[x4];function b4(t){RC?RC(t):t()}function Gc(t){MC?MC(t):t()}let S4=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function C4(t){let{fallbackElement:e,router:n,future:r}=t,[s,o]=g.useState(n.state),[i,a]=g.useState(),[l,c]=g.useState({isTransitioning:!1}),[u,d]=g.useState(),[f,p]=g.useState(),[y,m]=g.useState(),w=g.useRef(new Map),{v7_startTransition:v}=r||{},x=g.useCallback(S=>{v?b4(S):S()},[v]),b=g.useCallback((S,T)=>{let{deletedFetchers:_,flushSync:R,viewTransitionOpts:j}=T;_.forEach(B=>w.current.delete(B)),S.fetchers.forEach((B,te)=>{B.data!==void 0&&w.current.set(te,B.data)});let V=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!j||V){R?Gc(()=>o(S)):x(()=>o(S));return}if(R){Gc(()=>{f&&(u&&u.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:j.currentLocation,nextLocation:j.nextLocation})});let B=n.window.document.startViewTransition(()=>{Gc(()=>o(S))});B.finished.finally(()=>{Gc(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),Gc(()=>p(B));return}f?(u&&u.resolve(),f.skipTransition(),m({state:S,currentLocation:j.currentLocation,nextLocation:j.nextLocation})):(a(S),c({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}))},[n.window,f,u,w,x]);g.useLayoutEffect(()=>n.subscribe(b),[n,b]),g.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new S4)},[l]),g.useEffect(()=>{if(u&&i&&n.window){let S=i,T=u.promise,_=n.window.document.startViewTransition(async()=>{x(()=>o(S)),await T});_.finished.finally(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(_)}},[x,i,u,n.window]),g.useEffect(()=>{u&&i&&s.location.key===i.location.key&&u.resolve()},[u,f,s.location,i]),g.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),m(void 0))},[l.isTransitioning,y]),g.useEffect(()=>{},[]);let C=g.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,T,_)=>n.navigate(S,{state:T,preventScrollReset:_==null?void 0:_.preventScrollReset}),replace:(S,T,_)=>n.navigate(S,{replace:!0,state:T,preventScrollReset:_==null?void 0:_.preventScrollReset})}),[n]),E=n.basename||"/",k=g.useMemo(()=>({router:n,navigator:C,static:!1,basename:E}),[n,C,E]),P=g.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return g.createElement(g.Fragment,null,g.createElement(cm.Provider,{value:k},g.createElement(lR.Provider,{value:s},g.createElement(v4.Provider,{value:w.current},g.createElement(y4.Provider,{value:l},g.createElement(d4,{basename:E,location:s.location,navigationType:s.historyAction,navigator:C,future:P},s.initialized||n.future.v7_partialHydration?g.createElement(E4,{routes:n.routes,future:n.future,state:s}):e))))),null)}const E4=g.memo(k4);function k4(t){let{routes:e,future:n,state:r}=t;return e4(e,void 0,r,n)}var AC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(AC||(AC={}));var OC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(OC||(OC={}));function T4(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function fm(...t){return e=>t.forEach(n=>T4(n,e))}function $e(...t){return g.useCallback(fm(...t),t)}var Gs=g.forwardRef((t,e)=>{const{children:n,...r}=t,s=g.Children.toArray(n),o=s.find(_4);if(o){const i=o.props.children,a=s.map(l=>l===o?g.Children.count(i)>1?g.Children.only(null):g.isValidElement(i)?i.props.children:null:l);return h.jsx(Xv,{...r,ref:e,children:g.isValidElement(i)?g.cloneElement(i,void 0,a):null})}return h.jsx(Xv,{...r,ref:e,children:n})});Gs.displayName="Slot";var Xv=g.forwardRef((t,e)=>{const{children:n,...r}=t;if(g.isValidElement(n)){const s=R4(n);return g.cloneElement(n,{...N4(r,n.props),ref:e?fm(e,s):s})}return g.Children.count(n)>1?g.Children.only(null):null});Xv.displayName="SlotClone";var P4=({children:t})=>h.jsx(h.Fragment,{children:t});function _4(t){return g.isValidElement(t)&&t.type===P4}function N4(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function R4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=mR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=mR(t))&&(r&&(r+=" "),r+=e);return r}const jC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,DC=gR,Sa=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return DC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=o==null?void 0:o[c];if(u===null)return null;const f=jC(u)||jC(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(y=>{let[m,w]=y;return Array.isArray(w)?w.includes({...o,...a}[m]):{...o,...a}[m]===w})?[...c,d,f]:c},[]);return DC(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},Ox="-",M4=t=>{const e=O4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(Ox);return a[0]===""&&a.length!==1&&a.shift(),yR(a,e)||A4(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},yR=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?yR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Ox);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},IC=/^\[(.+)\]$/,A4=t=>{if(IC.test(t)){const e=IC.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},O4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return D4(Object.entries(t.classGroups),n).forEach(([o,i])=>{Zv(i,r,o,e)}),r},Zv=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:LC(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(j4(s)){Zv(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{Zv(i,LC(e,o),n,r)})})},LC=(t,e)=>{let n=t;return e.split(Ox).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},j4=t=>t.isThemeGetter,D4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[n,s]}):t,I4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},vR="!",L4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,i=a=>{const l=[];let c=0,u=0,d;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===s&&(r||a.slice(w,w+o)===e)){l.push(a.slice(u,w)),u=w+o;continue}if(v==="/"){d=w;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(vR),y=p?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},F4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},$4=t=>({cache:I4(t.cacheSize),parseClassName:L4(t),...M4(t)}),B4=/\s+/,z4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(B4);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let y=!!p,m=r(y?f.substring(0,p):f);if(!m){if(!y){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}y=!1}const w=F4(u).join(":"),v=d?w+vR:w,x=v+m;if(o.includes(x))continue;o.push(x);const b=s(m,y);for(let C=0;C<b.length;++C){const E=b[C];o.push(v+E)}a=c+(a.length>0?" "+a:a)}return a};function V4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wR(e))&&(r&&(r+=" "),r+=n);return r}const wR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wR(t[r]))&&(n&&(n+=" "),n+=e);return n};function U4(t,...e){let n,r,s,o=i;function i(l){const c=e.reduce((u,d)=>d(u),t());return n=$4(c),r=n.cache.get,s=n.cache.set,o=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=z4(l,n);return s(l,u),u}return function(){return o(V4.apply(null,arguments))}}const ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},xR=/^\[(?:([a-z-]+):)?(.+)\]$/i,W4=/^\d+\/\d+$/,H4=new Set(["px","full","screen"]),K4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,q4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,G4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,J4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Y4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rs=t=>El(t)||H4.has(t)||W4.test(t),ro=t=>xc(t,"length",sV),El=t=>!!t&&!Number.isNaN(Number(t)),qg=t=>xc(t,"number",El),Jc=t=>!!t&&Number.isInteger(Number(t)),Q4=t=>t.endsWith("%")&&El(t.slice(0,-1)),je=t=>xR.test(t),so=t=>K4.test(t),X4=new Set(["length","size","percentage"]),Z4=t=>xc(t,X4,bR),eV=t=>xc(t,"position",bR),tV=new Set(["image","url"]),nV=t=>xc(t,tV,iV),rV=t=>xc(t,"",oV),Yc=()=>!0,xc=(t,e,n)=>{const r=xR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},sV=t=>q4.test(t)&&!G4.test(t),bR=()=>!1,oV=t=>J4.test(t),iV=t=>Y4.test(t),aV=()=>{const t=ut("colors"),e=ut("spacing"),n=ut("blur"),r=ut("brightness"),s=ut("borderColor"),o=ut("borderRadius"),i=ut("borderSpacing"),a=ut("borderWidth"),l=ut("contrast"),c=ut("grayscale"),u=ut("hueRotate"),d=ut("invert"),f=ut("gap"),p=ut("gradientColorStops"),y=ut("gradientColorStopPositions"),m=ut("inset"),w=ut("margin"),v=ut("opacity"),x=ut("padding"),b=ut("saturate"),C=ut("scale"),E=ut("sepia"),k=ut("skew"),P=ut("space"),S=ut("translate"),T=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",je,e],j=()=>[je,e],V=()=>["",Rs,ro],B=()=>["auto",El,je],te=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",je],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[El,je];return{cacheSize:500,separator:":",theme:{colors:[Yc],spacing:[Rs,ro],blur:["none","",so,je],brightness:U(),borderColor:[t],borderRadius:["none","","full",so,je],borderSpacing:j(),borderWidth:V(),contrast:U(),grayscale:O(),hueRotate:U(),invert:O(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[Q4,ro],inset:R(),margin:R(),opacity:U(),padding:j(),saturate:U(),scale:U(),sepia:O(),skew:U(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[so]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...te(),je]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jc,je]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Jc,je]}],"grid-cols":[{"grid-cols":[Yc]}],"col-start-end":[{col:["auto",{span:["full",Jc,je]},je]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Yc]}],"row-start-end":[{row:["auto",{span:[Jc,je]},je]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",je,e]}],"min-w":[{"min-w":[je,e,"min","max","fit"]}],"max-w":[{"max-w":[je,e,"none","full","min","max","fit","prose",{screen:[so]},so]}],h:[{h:[je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",so,ro]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qg]}],"font-family":[{font:[Yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",El,qg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rs,je]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rs,ro]}],"underline-offset":[{"underline-offset":["auto",Rs,je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...te(),eV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Z4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nV]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Rs,je]}],"outline-w":[{outline:[Rs,ro]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Rs,ro]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",so,rV]}],"shadow-color":[{shadow:[Yc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",so,je]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Jc,je]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rs,ro,qg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lV=U4(aV);function ie(...t){return lV(gR(t))}const cV=Sa("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xe=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const i=r?Gs:"button";return h.jsx(i,{className:ie(cV({variant:e,size:n,className:t})),ref:o,...s})});xe.displayName="Button";const Ca=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ie("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ca.displayName="Card";const Ea=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ie("flex flex-col space-y-1.5 p-6",t),...e}));Ea.displayName="CardHeader";const Hd=g.forwardRef(({className:t,...e},n)=>h.jsx("h3",{ref:n,className:ie("text-2xl font-semibold leading-none tracking-tight",t),...e}));Hd.displayName="CardTitle";const uV=g.forwardRef(({className:t,...e},n)=>h.jsx("p",{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));uV.displayName="CardDescription";const ka=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ie("p-6 pt-0",t),...e}));ka.displayName="CardContent";const dV=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ie("flex items-center p-6 pt-0",t),...e}));dV.displayName="CardFooter";function se(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function fV(t,e){const n=g.createContext(e),r=o=>{const{children:i,...a}=o,l=g.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function s(o){const i=g.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function Es(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),l=n.length;n=[...n,i];const c=d=>{var v;const{scope:f,children:p,...y}=d,m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:w,children:p})};c.displayName=o+"Provider";function u(d,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[c,u]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,hV(s,...e)]}function hV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var un=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},pV=Fw.useId||(()=>{}),mV=0;function Gr(t){const[e,n]=g.useState(pV());return un(()=>{n(r=>r??String(mV++))},[t]),e?`radix-${e}`:""}function wt(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Qr({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=gV({defaultProp:e,onChange:n}),o=t!==void 0,i=o?t:r,a=wt(n),l=g.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[o,t,s,a]);return[i,l]}function gV({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),o=wt(e);return g.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var yV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],be=yV.reduce((t,e)=>{const n=g.forwardRef((r,s)=>{const{asChild:o,...i}=r,a=o?Gs:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(a,{...i,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function jx(t,e){t&&Cs.flushSync(()=>t.dispatchEvent(e))}function vV(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var wV="DismissableLayer",e0="dismissableLayer.update",xV="dismissableLayer.pointerDownOutside",bV="dismissableLayer.focusOutside",FC,SR=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bc=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...l}=t,c=g.useContext(SR),[u,d]=g.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),y=$e(e,P=>d(P)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),x=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=v,E=CV(P=>{const S=P.target,T=[...c.branches].some(_=>_.contains(S));!C||T||(s==null||s(P),i==null||i(P),P.defaultPrevented||a==null||a())},f),k=EV(P=>{const S=P.target;[...c.branches].some(_=>_.contains(S))||(o==null||o(P),i==null||i(P),P.defaultPrevented||a==null||a())},f);return vV(P=>{x===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),g.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(FC=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),$C(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=FC)}},[u,f,n,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),$C())},[u,c]),g.useEffect(()=>{const P=()=>p({});return document.addEventListener(e0,P),()=>document.removeEventListener(e0,P)},[]),h.jsx(be.div,{...l,ref:y,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:se(t.onFocusCapture,k.onFocusCapture),onBlurCapture:se(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:se(t.onPointerDownCapture,E.onPointerDownCapture)})});bc.displayName=wV;var SV="DismissableLayerBranch",CR=g.forwardRef((t,e)=>{const n=g.useContext(SR),r=g.useRef(null),s=$e(e,r);return g.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),h.jsx(be.div,{...t,ref:s})});CR.displayName=SV;function CV(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){ER(xV,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function EV(t,e=globalThis==null?void 0:globalThis.document){const n=wt(t),r=g.useRef(!1);return g.useEffect(()=>{const s=o=>{o.target&&!r.current&&ER(bV,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $C(){const t=new CustomEvent(e0);document.dispatchEvent(t)}function ER(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?jx(s,o):s.dispatchEvent(o)}var kV=bc,TV=CR,Gg="focusScope.autoFocusOnMount",Jg="focusScope.autoFocusOnUnmount",BC={bubbles:!1,cancelable:!0},PV="FocusScope",Kd=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[a,l]=g.useState(null),c=wt(s),u=wt(o),d=g.useRef(null),f=$e(e,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const C=b.target;a.contains(C)?d.current=C:io(d.current,{select:!0})},w=function(b){if(p.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||io(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const E of b)E.removedNodes.length>0&&io(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),g.useEffect(()=>{if(a){VC.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Gg,BC);a.addEventListener(Gg,c),a.dispatchEvent(v),v.defaultPrevented||(_V(OV(kR(a)),{select:!0}),document.activeElement===m&&io(a))}return()=>{a.removeEventListener(Gg,c),setTimeout(()=>{const v=new CustomEvent(Jg,BC);a.addEventListener(Jg,u),a.dispatchEvent(v),v.defaultPrevented||io(m??document.body,{select:!0}),a.removeEventListener(Jg,u),VC.remove(p)},0)}}},[a,c,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[b,C]=NV(x);b&&C?!m.shiftKey&&v===C?(m.preventDefault(),n&&io(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&io(C,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(be.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});Kd.displayName=PV;function _V(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(io(r,{select:e}),document.activeElement!==n)return}function NV(t){const e=kR(t),n=zC(e,t),r=zC(e.reverse(),t);return[n,r]}function kR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zC(t,e){for(const n of t)if(!RV(n,{upTo:e}))return n}function RV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function MV(t){return t instanceof HTMLInputElement&&"select"in t}function io(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&MV(t)&&e&&t.select()}}var VC=AV();function AV(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=UC(t,e),t.unshift(e)},remove(e){var n;t=UC(t,e),(n=t[0])==null||n.resume()}}}function UC(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function OV(t){return t.filter(e=>e.tagName!=="A")}var jV="Portal",Sc=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,o]=g.useState(!1);un(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?Vd.createPortal(h.jsx(be.div,{...r,ref:e}),i):null});Sc.displayName=jV;function DV(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var dn=t=>{const{present:e,children:n}=t,r=IV(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),o=$e(r.ref,LV(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:o}):null};dn.displayName="Presence";function IV(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),o=g.useRef("none"),i=t?"mounted":"unmounted",[a,l]=DV(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=$f(r.current);o.current=a==="mounted"?c:"none"},[a]),un(()=>{const c=r.current,u=s.current;if(u!==t){const f=o.current,p=$f(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),un(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const m=$f(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(o.current=$f(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function $f(t){return(t==null?void 0:t.animationName)||"none"}function LV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Yg=0;function hm(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??WC()),document.body.insertAdjacentElement("beforeend",t[1]??WC()),Yg++,()=>{Yg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Yg--}},[])}function WC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wn=function(){return wn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},wn.apply(this,arguments)};function Dx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function TR(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Pu="right-scroll-bar-position",_u="width-before-scroll-bar",FV="with-scroll-bars-hidden",$V="--removed-body-scroll-bar-size";function Qg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BV(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var zV=typeof window<"u"?g.useLayoutEffect:g.useEffect,HC=new WeakMap;function PR(t,e){var n=BV(null,function(r){return t.forEach(function(s){return Qg(s,r)})});return zV(function(){var r=HC.get(n);if(r){var s=new Set(r),o=new Set(t),i=n.current;s.forEach(function(a){o.has(a)||Qg(a,null)}),o.forEach(function(a){s.has(a)||Qg(a,i)})}HC.set(n,t)},[t]),n}function VV(t){return t}function UV(t,e){e===void 0&&(e=VV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var i=e(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var l=function(){var u=i;i=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return s}function _R(t){t===void 0&&(t={});var e=UV(null);return e.options=wn({async:!0,ssr:!1},t),e}var NR=function(t){var e=t.sideCar,n=Dx(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,wn({},n))};NR.isSideCarExport=!0;function RR(t,e){return t.useMedium(e),NR}var MR=_R(),Xg=function(){},pm=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Xg,onWheelCapture:Xg,onTouchMoveCapture:Xg}),s=r[0],o=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,y=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,x=t.gapMode,b=Dx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,E=PR([n,e]),k=wn(wn({},b),s);return g.createElement(g.Fragment,null,u&&g.createElement(C,{sideCar:MR,removeScrollBar:c,shards:d,noIsolation:p,inert:y,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?g.cloneElement(g.Children.only(a),wn(wn({},k),{ref:E})):g.createElement(v,wn({},k,{className:l,ref:E}),a))});pm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pm.classNames={fullWidth:_u,zeroRight:Pu};var WV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=WV();return e&&t.setAttribute("nonce",e),t}function KV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function qV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var GV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=HV())&&(KV(e,n),qV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JV=function(){var t=GV();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Ix=function(){var t=JV(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},YV={left:0,top:0,right:0,gap:0},Zg=function(t){return parseInt(t||"",10)||0},QV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Zg(n),Zg(r),Zg(s)]},XV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return YV;var e=QV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},ZV=Ix(),kl="data-scroll-locked",eU=function(t,e,n,r){var s=t.left,o=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(FV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(kl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Pu,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_u,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Pu," .").concat(Pu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_u," .").concat(_u,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kl,`] {
    `).concat($V,": ").concat(a,`px;
  }
`)},KC=function(){var t=parseInt(document.body.getAttribute(kl)||"0",10);return isFinite(t)?t:0},tU=function(){g.useEffect(function(){return document.body.setAttribute(kl,(KC()+1).toString()),function(){var t=KC()-1;t<=0?document.body.removeAttribute(kl):document.body.setAttribute(kl,t.toString())}},[])},AR=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;tU();var o=g.useMemo(function(){return XV(s)},[s]);return g.createElement(ZV,{styles:eU(o,!e,s,n?"":"!important")})},t0=!1;if(typeof window<"u")try{var Bf=Object.defineProperty({},"passive",{get:function(){return t0=!0,!0}});window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch{t0=!1}var Ba=t0?{passive:!1}:!1,nU=function(t){return t.tagName==="TEXTAREA"},OR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nU(t)&&n[e]==="visible")},rU=function(t){return OR(t,"overflowY")},sU=function(t){return OR(t,"overflowX")},qC=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=jR(t,r);if(s){var o=DR(t,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},iU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},jR=function(t,e){return t==="v"?rU(e):sU(e)},DR=function(t,e){return t==="v"?oU(e):iU(e)},aU=function(t,e){return t==="h"&&e==="rtl"?-1:1},lU=function(t,e,n,r,s){var o=aU(t,window.getComputedStyle(e).direction),i=o*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,f=0;do{var p=DR(t,a),y=p[0],m=p[1],w=p[2],v=m-w-o*y;(y||v)&&jR(t,a)&&(d+=v,f+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!s)||!u&&(Math.abs(f)<1||!s))&&(c=!0),c},zf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},GC=function(t){return[t.deltaX,t.deltaY]},JC=function(t){return t&&"current"in t?t.current:t},cU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dU=0,za=[];function fU(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(dU++)[0],o=g.useState(Ix)[0],i=g.useRef(t);g.useEffect(function(){i.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=TR([t.lockRef.current],(t.shards||[]).map(JC),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var v=zf(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-v[0],C="deltaY"in m?m.deltaY:x[1]-v[1],E,k=m.target,P=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in m&&P==="h"&&k.type==="range")return!1;var S=qC(P,k);if(!S)return!0;if(S?E=P:(E=P==="v"?"h":"v",S=qC(P,k)),!S)return!1;if(!r.current&&"changedTouches"in m&&(b||C)&&(r.current=E),!E)return!0;var T=r.current||E;return lU(T,w,m,T==="h"?b:C,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!za.length||za[za.length-1]!==o)){var v="deltaY"in w?GC(w):zf(w),x=e.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&cU(E.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(i.current.shards||[]).map(JC).filter(Boolean).filter(function(E){return E.contains(w.target)}),C=b.length>0?a(w,b[0]):!i.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,x){var b={name:m,delta:w,target:v,should:x,shadowParent:hU(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),u=g.useCallback(function(m){n.current=zf(m),r.current=void 0},[]),d=g.useCallback(function(m){c(m.type,GC(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,zf(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return za.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ba),document.addEventListener("touchmove",l,Ba),document.addEventListener("touchstart",u,Ba),function(){za=za.filter(function(m){return m!==o}),document.removeEventListener("wheel",l,Ba),document.removeEventListener("touchmove",l,Ba),document.removeEventListener("touchstart",u,Ba)}},[]);var p=t.removeScrollBar,y=t.inert;return g.createElement(g.Fragment,null,y?g.createElement(o,{styles:uU(s)}):null,p?g.createElement(AR,{gapMode:t.gapMode}):null)}function hU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pU=RR(MR,fU);var qd=g.forwardRef(function(t,e){return g.createElement(pm,wn({},t,{ref:e,sideCar:pU}))});qd.classNames=pm.classNames;var mU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Va=new WeakMap,Vf=new WeakMap,Uf={},ey=0,IR=function(t){return t&&(t.host||IR(t.parentNode))},gU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},yU=function(t,e,n,r){var s=gU(e,Array.isArray(t)?t:[t]);Uf[n]||(Uf[n]=new WeakMap);var o=Uf[n],i=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",m=(Va.get(f)||0)+1,w=(o.get(f)||0)+1;Va.set(f,m),o.set(f,w),i.push(f),m===1&&y&&Vf.set(f,!0),w===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),ey++,function(){i.forEach(function(d){var f=Va.get(d)-1,p=o.get(d)-1;Va.set(d,f),o.set(d,p),f||(Vf.has(d)||d.removeAttribute(r),Vf.delete(d)),p||d.removeAttribute(n)}),ey--,ey||(Va=new WeakMap,Va=new WeakMap,Vf=new WeakMap,Uf={})}},Gd=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=mU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),yU(r,s,n,"aria-hidden")):function(){return null}},Lx="Dialog",[LR,Ioe]=Es(Lx),[vU,ts]=LR(Lx),FR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,a=g.useRef(null),l=g.useRef(null),[c=!1,u]=Qr({prop:r,defaultProp:s,onChange:o});return h.jsx(vU,{scope:e,triggerRef:a,contentRef:l,contentId:Gr(),titleId:Gr(),descriptionId:Gr(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};FR.displayName=Lx;var $R="DialogTrigger",BR=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts($R,n),o=$e(e,s.triggerRef);return h.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Bx(s.open),...r,ref:o,onClick:se(t.onClick,s.onOpenToggle)})});BR.displayName=$R;var Fx="DialogPortal",[wU,zR]=LR(Fx,{forceMount:void 0}),VR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=ts(Fx,e);return h.jsx(wU,{scope:e,forceMount:n,children:g.Children.map(r,i=>h.jsx(dn,{present:n||o.open,children:h.jsx(Sc,{asChild:!0,container:s,children:i})}))})};VR.displayName=Fx;var up="DialogOverlay",UR=g.forwardRef((t,e)=>{const n=zR(up,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=ts(up,t.__scopeDialog);return o.modal?h.jsx(dn,{present:r||o.open,children:h.jsx(xU,{...s,ref:e})}):null});UR.displayName=up;var xU=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(up,n);return h.jsx(qd,{as:Gs,allowPinchZoom:!0,shards:[s.contentRef],children:h.jsx(be.div,{"data-state":Bx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),aa="DialogContent",WR=g.forwardRef((t,e)=>{const n=zR(aa,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=ts(aa,t.__scopeDialog);return h.jsx(dn,{present:r||o.open,children:o.modal?h.jsx(bU,{...s,ref:e}):h.jsx(SU,{...s,ref:e})})});WR.displayName=aa;var bU=g.forwardRef((t,e)=>{const n=ts(aa,t.__scopeDialog),r=g.useRef(null),s=$e(e,n.contentRef,r);return g.useEffect(()=>{const o=r.current;if(o)return Gd(o)},[]),h.jsx(HR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:se(t.onFocusOutside,o=>o.preventDefault())})}),SU=g.forwardRef((t,e)=>{const n=ts(aa,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return h.jsx(HR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),HR=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,a=ts(aa,n),l=g.useRef(null),c=$e(e,l);return hm(),h.jsxs(h.Fragment,{children:[h.jsx(Kd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(bc,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Bx(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(CU,{titleId:a.titleId}),h.jsx(kU,{contentRef:l,descriptionId:a.descriptionId})]})]})}),$x="DialogTitle",KR=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts($x,n);return h.jsx(be.h2,{id:s.titleId,...r,ref:e})});KR.displayName=$x;var qR="DialogDescription",GR=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(qR,n);return h.jsx(be.p,{id:s.descriptionId,...r,ref:e})});GR.displayName=qR;var JR="DialogClose",YR=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(JR,n);return h.jsx(be.button,{type:"button",...r,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});YR.displayName=JR;function Bx(t){return t?"open":"closed"}var QR="DialogTitleWarning",[Loe,XR]=fV(QR,{contentName:aa,titleName:$x,docsSlug:"dialog"}),CU=({titleId:t})=>{const e=XR(QR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},EU="DialogDescriptionWarning",kU=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XR(EU).contentName}}.`;return g.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},ZR=FR,TU=BR,eM=VR,mm=UR,gm=WR,ym=KR,vm=GR,tM=YR;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},l)=>g.createElement("svg",{ref:l,..._U,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nM("lucide",s),...a},[...i.map(([c,u])=>g.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(t,e)=>{const n=g.forwardRef(({className:r,...s},o)=>g.createElement(NU,{ref:o,iconNode:e,className:nM(`lucide-${PU(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Rt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=Rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Rt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Rt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Rt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Rt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=Rt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=Rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Rt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=Rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=Rt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Rt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=Rt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iM=ZR,BU=TU,zU=eM,aM=g.forwardRef(({className:t,...e},n)=>h.jsx(mm,{className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));aM.displayName=mm.displayName;const VU=Sa("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Wx=g.forwardRef(({side:t="right",className:e,children:n,...r},s)=>h.jsxs(zU,{children:[h.jsx(aM,{}),h.jsxs(gm,{ref:s,className:ie(VU({side:t}),e),...r,children:[n,h.jsxs(tM,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(ui,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wx.displayName=gm.displayName;const lM=({className:t,...e})=>h.jsx("div",{className:ie("flex flex-col space-y-2 text-center sm:text-left",t),...e});lM.displayName="SheetHeader";const cM=g.forwardRef(({className:t,...e},n)=>h.jsx(ym,{ref:n,className:ie("text-lg font-semibold text-foreground",t),...e}));cM.displayName=ym.displayName;const UU=g.forwardRef(({className:t,...e},n)=>h.jsx(vm,{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));UU.displayName=vm.displayName;const ty=768;function di(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${ty-1}px)`),r=()=>{e(window.innerWidth<ty)};return n.addEventListener("change",r),e(window.innerWidth<ty),()=>n.removeEventListener("change",r)},[]),!!t}function WU(t){return Object.prototype.toString.call(t)==="[object Object]"}function YC(t){return WU(t)||Array.isArray(t)}function HU(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Hx(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(t.breakpoints||{})),o=JSON.stringify(Object.keys(e.breakpoints||{}));return s!==o?!1:n.every(i=>{const a=t[i],l=e[i];return typeof a=="function"?`${a}`==`${l}`:!YC(a)||!YC(l)?a===l:Hx(a,l)})}function QC(t){return t.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function KU(t,e){if(t.length!==e.length)return!1;const n=QC(t),r=QC(e);return n.every((s,o)=>{const i=r[o];return Hx(s,i)})}function Kx(t){return typeof t=="number"}function n0(t){return typeof t=="string"}function xm(t){return typeof t=="boolean"}function XC(t){return Object.prototype.toString.call(t)==="[object Object]"}function xt(t){return Math.abs(t)}function qx(t){return Math.sign(t)}function Nu(t,e){return xt(t-e)}function qU(t,e){if(t===0||e===0||xt(t)<=xt(e))return 0;const n=Nu(xt(t),xt(e));return xt(n/t)}function ad(t){return ld(t).map(Number)}function Jr(t){return t[Jd(t)]}function Jd(t){return Math.max(0,t.length-1)}function Gx(t,e){return e===Jd(t)}function ZC(t,e=0){return Array.from(Array(t),(n,r)=>e+r)}function ld(t){return Object.keys(t)}function uM(t,e){return[t,e].reduce((n,r)=>(ld(r).forEach(s=>{const o=n[s],i=r[s],a=XC(o)&&XC(i);n[s]=a?uM(o,i):i}),n),{})}function r0(t,e){return typeof e.MouseEvent<"u"&&t instanceof e.MouseEvent}function GU(t,e){const n={start:r,center:s,end:o};function r(){return 0}function s(l){return o(l)/2}function o(l){return e-l}function i(l,c){return n0(t)?n[t](l):t(e,l,c)}return{measure:i}}function cd(){let t=[];function e(s,o,i,a={passive:!0}){let l;if("addEventListener"in s)s.addEventListener(o,i,a),l=()=>s.removeEventListener(o,i,a);else{const c=s;c.addListener(i),l=()=>c.removeListener(i)}return t.push(l),r}function n(){t=t.filter(s=>s())}const r={add:e,clear:n};return r}function JU(t,e,n,r){const s=cd(),o=1e3/60;let i=null,a=0,l=0;function c(){s.add(t,"visibilitychange",()=>{t.hidden&&y()})}function u(){p(),s.clear()}function d(w){if(!l)return;i||(i=w);const v=w-i;for(i=w,a+=v;a>=o;)n(o),a-=o;const x=a/o;r(x),l&&e.requestAnimationFrame(d)}function f(){l||(l=e.requestAnimationFrame(d))}function p(){e.cancelAnimationFrame(l),i=null,a=0,l=0}function y(){i=null,a=0}return{init:c,destroy:u,start:f,stop:p,update:()=>n(o),render:r}}function YU(t,e){const n=e==="rtl",r=t==="y",s=r?"y":"x",o=r?"x":"y",i=!r&&n?-1:1,a=u(),l=d();function c(y){const{height:m,width:w}=y;return r?m:w}function u(){return r?"top":n?"right":"left"}function d(){return r?"bottom":n?"left":"right"}function f(y){return y*i}return{scroll:s,cross:o,startEdge:a,endEdge:l,measureSize:c,direction:f}}function ca(t=0,e=0){const n=xt(t-e);function r(c){return c<t}function s(c){return c>e}function o(c){return r(c)||s(c)}function i(c){return o(c)?r(c)?t:e:c}function a(c){return n?c-n*Math.ceil((c-e)/n):c}return{length:n,max:e,min:t,constrain:i,reachedAny:o,reachedMax:s,reachedMin:r,removeOffset:a}}function dM(t,e,n){const{constrain:r}=ca(0,t),s=t+1;let o=i(e);function i(f){return n?xt((s+f)%s):r(f)}function a(){return o}function l(f){return o=i(f),d}function c(f){return u().set(a()+f)}function u(){return dM(t,a(),n)}const d={get:a,set:l,add:c,clone:u};return d}function QU(t,e,n,r,s,o,i,a,l,c,u,d,f,p,y,m,w,v,x){const{cross:b,direction:C}=t,E=["INPUT","SELECT","TEXTAREA"],k={passive:!1},P=cd(),S=cd(),T=ca(50,225).constrain(p.measure(20)),_={mouse:300,touch:400},R={mouse:500,touch:600},j=y?43:25;let V=!1,B=0,te=0,K=!1,I=!1,N=!1,O=!1;function $(q){if(!x)return;function ce(ge){(xm(x)||x(q,ge))&&W(ge)}const ae=e;P.add(ae,"dragstart",ge=>ge.preventDefault(),k).add(ae,"touchmove",()=>{},k).add(ae,"touchend",()=>{}).add(ae,"touchstart",ce).add(ae,"mousedown",ce).add(ae,"touchcancel",G).add(ae,"contextmenu",G).add(ae,"click",oe,!0)}function U(){P.clear(),S.clear()}function M(){const q=O?n:e;S.add(q,"touchmove",H,k).add(q,"touchend",G).add(q,"mousemove",H,k).add(q,"mouseup",G)}function F(q){const ce=q.nodeName||"";return E.includes(ce)}function J(){return(y?R:_)[O?"mouse":"touch"]}function Y(q,ce){const ae=d.add(qx(q)*-1),ge=u.byDistance(q,!y).distance;return y||xt(q)<T?ge:w&&ce?ge*.5:u.byIndex(ae.get(),0).distance}function W(q){const ce=r0(q,r);O=ce,N=y&&ce&&!q.buttons&&V,V=Nu(s.get(),i.get())>=2,!(ce&&q.button!==0)&&(F(q.target)||(K=!0,o.pointerDown(q),c.useFriction(0).useDuration(0),s.set(i),M(),B=o.readPoint(q),te=o.readPoint(q,b),f.emit("pointerDown")))}function H(q){if(!r0(q,r)&&q.touches.length>=2)return G(q);const ae=o.readPoint(q),ge=o.readPoint(q,b),Re=Nu(ae,B),Ee=Nu(ge,te);if(!I&&!O&&(!q.cancelable||(I=Re>Ee,!I)))return G(q);const Be=o.pointerMove(q);Re>m&&(N=!0),c.useFriction(.3).useDuration(.75),a.start(),s.add(C(Be)),q.preventDefault()}function G(q){const ae=u.byDistance(0,!1).index!==d.get(),ge=o.pointerUp(q)*J(),Re=Y(C(ge),ae),Ee=qU(ge,Re),Be=j-10*Ee,Te=v+Ee/50;I=!1,K=!1,S.clear(),c.useDuration(Be).useFriction(Te),l.distance(Re,!y),O=!1,f.emit("pointerUp")}function oe(q){N&&(q.stopPropagation(),q.preventDefault(),N=!1)}function re(){return K}return{init:$,destroy:U,pointerDown:re}}function XU(t,e){let r,s;function o(d){return d.timeStamp}function i(d,f){const y=`client${(f||t.scroll)==="x"?"X":"Y"}`;return(r0(d,e)?d:d.touches[0])[y]}function a(d){return r=d,s=d,i(d)}function l(d){const f=i(d)-i(s),p=o(d)-o(r)>170;return s=d,p&&(r=d),f}function c(d){if(!r||!s)return 0;const f=i(s)-i(r),p=o(d)-o(r),y=o(d)-o(s)>170,m=f/p;return p&&!y&&xt(m)>.1?m:0}return{pointerDown:a,pointerMove:l,pointerUp:c,readPoint:i}}function ZU(){function t(n){const{offsetTop:r,offsetLeft:s,offsetWidth:o,offsetHeight:i}=n;return{top:r,right:s+o,bottom:r+i,left:s,width:o,height:i}}return{measure:t}}function e3(t){function e(r){return t*(r/100)}return{measure:e}}function t3(t,e,n,r,s,o,i){const a=[t].concat(r);let l,c,u=[],d=!1;function f(w){return s.measureSize(i.measure(w))}function p(w){if(!o)return;c=f(t),u=r.map(f);function v(x){for(const b of x){if(d)return;const C=b.target===t,E=r.indexOf(b.target),k=C?c:u[E],P=f(C?t:r[E]);if(xt(P-k)>=.5){w.reInit(),e.emit("resize");break}}}l=new ResizeObserver(x=>{(xm(o)||o(w,x))&&v(x)}),n.requestAnimationFrame(()=>{a.forEach(x=>l.observe(x))})}function y(){d=!0,l&&l.disconnect()}return{init:p,destroy:y}}function n3(t,e,n,r,s,o){let i=0,a=0,l=s,c=o,u=t.get(),d=0;function f(k){const P=k/1e3,S=l*P,T=r.get()-t.get(),_=!l;let R=0;return _?(i=0,n.set(r),t.set(r),R=T):(n.set(t),i+=T/S,i*=c,u+=i,t.add(i*P),R=u-d),a=qx(R),d=u,E}function p(){const k=r.get()-e.get();return xt(k)<.001}function y(){return l}function m(){return a}function w(){return i}function v(){return b(s)}function x(){return C(o)}function b(k){return l=k,E}function C(k){return c=k,E}const E={direction:m,duration:y,velocity:w,seek:f,settled:p,useBaseFriction:x,useBaseDuration:v,useFriction:C,useDuration:b};return E}function r3(t,e,n,r,s){const o=s.measure(10),i=s.measure(50),a=ca(.1,.99);let l=!1;function c(){return!(l||!t.reachedAny(n.get())||!t.reachedAny(e.get()))}function u(p){if(!c())return;const y=t.reachedMin(e.get())?"min":"max",m=xt(t[y]-e.get()),w=n.get()-e.get(),v=a.constrain(m/i);n.subtract(w*v),!p&&xt(w)<o&&(n.set(t.constrain(n.get())),r.useDuration(25).useBaseFriction())}function d(p){l=!p}return{shouldConstrain:c,constrain:u,toggleActive:d}}function s3(t,e,n,r,s){const o=ca(-e+t,0),i=d(),a=u(),l=f();function c(y,m){return Nu(y,m)<1}function u(){const y=i[0],m=Jr(i),w=i.lastIndexOf(y),v=i.indexOf(m)+1;return ca(w,v)}function d(){return n.map((y,m)=>{const{min:w,max:v}=o,x=o.constrain(y),b=!m,C=Gx(n,m);return b?v:C||c(w,x)?w:c(v,x)?v:x}).map(y=>parseFloat(y.toFixed(3)))}function f(){if(e<=t+s)return[o.max];if(r==="keepSnaps")return i;const{min:y,max:m}=a;return i.slice(y,m)}return{snapsContained:l,scrollContainLimit:a}}function o3(t,e,n){const r=e[0],s=n?r-t:Jr(e);return{limit:ca(s,r)}}function i3(t,e,n,r){const o=e.min+.1,i=e.max+.1,{reachedMin:a,reachedMax:l}=ca(o,i);function c(f){return f===1?l(n.get()):f===-1?a(n.get()):!1}function u(f){if(!c(f))return;const p=t*(f*-1);r.forEach(y=>y.add(p))}return{loop:u}}function a3(t){const{max:e,length:n}=t;function r(o){const i=o-e;return n?i/-n:0}return{get:r}}function l3(t,e,n,r,s){const{startEdge:o,endEdge:i}=t,{groupSlides:a}=s,l=d().map(e.measure),c=f(),u=p();function d(){return a(r).map(m=>Jr(m)[i]-m[0][o]).map(xt)}function f(){return r.map(m=>n[o]-m[o]).map(m=>-xt(m))}function p(){return a(c).map(m=>m[0]).map((m,w)=>m+l[w])}return{snaps:c,snapsAligned:u}}function c3(t,e,n,r,s,o){const{groupSlides:i}=s,{min:a,max:l}=r,c=u();function u(){const f=i(o),p=!t||e==="keepSnaps";return n.length===1?[o]:p?f:f.slice(a,l).map((y,m,w)=>{const v=!m,x=Gx(w,m);if(v){const b=Jr(w[0])+1;return ZC(b)}if(x){const b=Jd(o)-Jr(w)[0]+1;return ZC(b,Jr(w)[0])}return y})}return{slideRegistry:c}}function u3(t,e,n,r,s){const{reachedAny:o,removeOffset:i,constrain:a}=r;function l(y){return y.concat().sort((m,w)=>xt(m)-xt(w))[0]}function c(y){const m=t?i(y):a(y),w=e.map((x,b)=>({diff:u(x-m,0),index:b})).sort((x,b)=>xt(x.diff)-xt(b.diff)),{index:v}=w[0];return{index:v,distance:m}}function u(y,m){const w=[y,y+n,y-n];if(!t)return y;if(!m)return l(w);const v=w.filter(x=>qx(x)===m);return v.length?l(v):Jr(w)-n}function d(y,m){const w=e[y]-s.get(),v=u(w,m);return{index:y,distance:v}}function f(y,m){const w=s.get()+y,{index:v,distance:x}=c(w),b=!t&&o(w);if(!m||b)return{index:v,distance:y};const C=e[v]-x,E=y+u(C,0);return{index:v,distance:E}}return{byDistance:f,byIndex:d,shortcut:u}}function d3(t,e,n,r,s,o,i){function a(d){const f=d.distance,p=d.index!==e.get();o.add(f),f&&(r.duration()?t.start():(t.update(),t.render(1),t.update())),p&&(n.set(e.get()),e.set(d.index),i.emit("select"))}function l(d,f){const p=s.byDistance(d,f);a(p)}function c(d,f){const p=e.clone().set(d),y=s.byIndex(p.get(),f);a(y)}return{distance:l,index:c}}function f3(t,e,n,r,s,o,i,a){const l={passive:!0,capture:!0};let c=0;function u(p){if(!a)return;function y(m){if(new Date().getTime()-c>10)return;i.emit("slideFocusStart"),t.scrollLeft=0;const x=n.findIndex(b=>b.includes(m));Kx(x)&&(s.useDuration(0),r.index(x,0),i.emit("slideFocus"))}o.add(document,"keydown",d,!1),e.forEach((m,w)=>{o.add(m,"focus",v=>{(xm(a)||a(p,v))&&y(w)},l)})}function d(p){p.code==="Tab"&&(c=new Date().getTime())}return{init:u}}function au(t){let e=t;function n(){return e}function r(l){e=i(l)}function s(l){e+=i(l)}function o(l){e-=i(l)}function i(l){return Kx(l)?l:l.get()}return{get:n,set:r,add:s,subtract:o}}function fM(t,e){const n=t.scroll==="x"?o:i,r=e.style;let s=!1;function o(d){return`translate3d(${d}px,0px,0px)`}function i(d){return`translate3d(0px,${d}px,0px)`}function a(d){s||(r.transform=n(t.direction(d)))}function l(d){s=!d}function c(){s||(r.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:c,to:a,toggleActive:l}}function h3(t,e,n,r,s,o,i,a,l){const u=ad(s),d=ad(s).reverse(),f=v().concat(x());function p(P,S){return P.reduce((T,_)=>T-s[_],S)}function y(P,S){return P.reduce((T,_)=>p(T,S)>0?T.concat([_]):T,[])}function m(P){return o.map((S,T)=>({start:S-r[T]+.5+P,end:S+e-.5+P}))}function w(P,S,T){const _=m(S);return P.map(R=>{const j=T?0:-n,V=T?n:0,B=T?"end":"start",te=_[R][B];return{index:R,loopPoint:te,slideLocation:au(-1),translate:fM(t,l[R]),target:()=>a.get()>te?j:V}})}function v(){const P=i[0],S=y(d,P);return w(S,n,!1)}function x(){const P=e-i[0]-1,S=y(u,P);return w(S,-n,!0)}function b(){return f.every(({index:P})=>{const S=u.filter(T=>T!==P);return p(S,e)<=.1})}function C(){f.forEach(P=>{const{target:S,translate:T,slideLocation:_}=P,R=S();R!==_.get()&&(T.to(R),_.set(R))})}function E(){f.forEach(P=>P.translate.clear())}return{canLoop:b,clear:E,loop:C,loopPoints:f}}function p3(t,e,n){let r,s=!1;function o(l){if(!n)return;function c(u){for(const d of u)if(d.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}r=new MutationObserver(u=>{s||(xm(n)||n(l,u))&&c(u)}),r.observe(t,{childList:!0})}function i(){r&&r.disconnect(),s=!0}return{init:o,destroy:i}}function m3(t,e,n,r){const s={};let o=null,i=null,a,l=!1;function c(){a=new IntersectionObserver(y=>{l||(y.forEach(m=>{const w=e.indexOf(m.target);s[w]=m}),o=null,i=null,n.emit("slidesInView"))},{root:t.parentElement,threshold:r}),e.forEach(y=>a.observe(y))}function u(){a&&a.disconnect(),l=!0}function d(y){return ld(s).reduce((m,w)=>{const v=parseInt(w),{isIntersecting:x}=s[v];return(y&&x||!y&&!x)&&m.push(v),m},[])}function f(y=!0){if(y&&o)return o;if(!y&&i)return i;const m=d(y);return y&&(o=m),y||(i=m),m}return{init:c,destroy:u,get:f}}function g3(t,e,n,r,s,o){const{measureSize:i,startEdge:a,endEdge:l}=t,c=n[0]&&s,u=y(),d=m(),f=n.map(i),p=w();function y(){if(!c)return 0;const x=n[0];return xt(e[a]-x[a])}function m(){if(!c)return 0;const x=o.getComputedStyle(Jr(r));return parseFloat(x.getPropertyValue(`margin-${l}`))}function w(){return n.map((x,b,C)=>{const E=!b,k=Gx(C,b);return E?f[b]+u:k?f[b]+d:C[b+1][a]-x[a]}).map(xt)}return{slideSizes:f,slideSizesWithGaps:p,startGap:u,endGap:d}}function y3(t,e,n,r,s,o,i,a,l){const{startEdge:c,endEdge:u,direction:d}=t,f=Kx(n);function p(v,x){return ad(v).filter(b=>b%x===0).map(b=>v.slice(b,b+x))}function y(v){return v.length?ad(v).reduce((x,b,C)=>{const E=Jr(x)||0,k=E===0,P=b===Jd(v),S=s[c]-o[E][c],T=s[c]-o[b][u],_=!r&&k?d(i):0,R=!r&&P?d(a):0,j=xt(T-R-(S+_));return C&&j>e+l&&x.push(b),P&&x.push(v.length),x},[]).map((x,b,C)=>{const E=Math.max(C[b-1]||0);return v.slice(E,x)}):[]}function m(v){return f?p(v,n):y(v)}return{groupSlides:m}}function v3(t,e,n,r,s,o,i){const{align:a,axis:l,direction:c,startIndex:u,loop:d,duration:f,dragFree:p,dragThreshold:y,inViewThreshold:m,slidesToScroll:w,skipSnaps:v,containScroll:x,watchResize:b,watchSlides:C,watchDrag:E,watchFocus:k}=o,P=2,S=ZU(),T=S.measure(e),_=n.map(S.measure),R=YU(l,c),j=R.measureSize(T),V=e3(j),B=GU(a,j),te=!d&&!!x,K=d||!!x,{slideSizes:I,slideSizesWithGaps:N,startGap:O,endGap:$}=g3(R,T,_,n,K,s),U=y3(R,j,w,d,T,_,O,$,P),{snaps:M,snapsAligned:F}=l3(R,B,T,_,U),J=-Jr(M)+Jr(N),{snapsContained:Y,scrollContainLimit:W}=s3(j,J,F,x,P),H=te?Y:F,{limit:G}=o3(J,H,d),oe=dM(Jd(H),u,d),re=oe.clone(),Q=ad(n),q=({dragHandler:yt,scrollBody:Ut,scrollBounds:At,options:{loop:Zn}},eo)=>{Zn||At.constrain(yt.pointerDown()),Ut.seek(eo)},ce=({scrollBody:yt,translate:Ut,location:At,offsetLocation:Zn,scrollLooper:eo,slideLooper:to,dragHandler:gr,animation:Oa,eventHandler:Ne,scrollBounds:et,options:{loop:qe}},Zt)=>{const En=yt.settled(),_s=!et.shouldConstrain(),ja=qe?En:En&&_s;ja&&!gr.pointerDown()&&(Oa.stop(),Ne.emit("settle")),ja||Ne.emit("scroll");const mf=At.get()*Zt+Be.get()*(1-Zt);Zn.set(mf),qe&&(eo.loop(yt.direction()),to.loop()),Ut.to(Zn.get())},ae=JU(r,s,yt=>q(fn,yt),yt=>ce(fn,yt)),ge=.68,Re=H[oe.get()],Ee=au(Re),Be=au(Re),Te=au(Re),mt=au(Re),Qt=n3(Ee,Te,Be,mt,f,ge),Xt=u3(d,H,J,G,mt),Ye=d3(ae,oe,re,Qt,Xt,mt,i),$t=a3(G),Ze=cd(),Mt=m3(e,n,i,m),{slideRegistry:nt}=c3(te,x,H,W,U,Q),gt=f3(t,n,nt,Ye,Qt,Ze,i,k),fn={ownerDocument:r,ownerWindow:s,eventHandler:i,containerRect:T,slideRects:_,animation:ae,axis:R,dragHandler:QU(R,t,r,s,mt,XU(R,s),Ee,ae,Ye,Qt,Xt,oe,i,V,p,y,v,ge,E),eventStore:Ze,percentOfView:V,index:oe,indexPrevious:re,limit:G,location:Ee,offsetLocation:Te,previousLocation:Be,options:o,resizeHandler:t3(e,i,s,n,R,b,S),scrollBody:Qt,scrollBounds:r3(G,Te,mt,Qt,V),scrollLooper:i3(J,G,Te,[Ee,Te,Be,mt]),scrollProgress:$t,scrollSnapList:H.map($t.get),scrollSnaps:H,scrollTarget:Xt,scrollTo:Ye,slideLooper:h3(R,j,J,I,N,M,H,Te,n),slideFocus:gt,slidesHandler:p3(e,i,C),slidesInView:Mt,slideIndexes:Q,slideRegistry:nt,slidesToScroll:U,target:mt,translate:fM(R,e)};return fn}function w3(){let t={},e;function n(c){e=c}function r(c){return t[c]||[]}function s(c){return r(c).forEach(u=>u(e,c)),l}function o(c,u){return t[c]=r(c).concat([u]),l}function i(c,u){return t[c]=r(c).filter(d=>d!==u),l}function a(){t={}}const l={init:n,emit:s,off:i,on:o,clear:a};return l}const x3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function b3(t){function e(o,i){return uM(o,i||{})}function n(o){const i=o.breakpoints||{},a=ld(i).filter(l=>t.matchMedia(l).matches).map(l=>i[l]).reduce((l,c)=>e(l,c),{});return e(o,a)}function r(o){return o.map(i=>ld(i.breakpoints||{})).reduce((i,a)=>i.concat(a),[]).map(t.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:r}}function S3(t){let e=[];function n(o,i){return e=i.filter(({options:a})=>t.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(o,t)),i.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function r(){e=e.filter(o=>o.destroy())}return{init:n,destroy:r}}function dp(t,e,n){const r=t.ownerDocument,s=r.defaultView,o=b3(s),i=S3(o),a=cd(),l=w3(),{mergeOptions:c,optionsAtMedia:u,optionsMediaQueries:d}=o,{on:f,off:p,emit:y}=l,m=R;let w=!1,v,x=c(x3,dp.globalOptions),b=c(x),C=[],E,k,P;function S(){const{container:Q,slides:q}=b;k=(n0(Q)?t.querySelector(Q):Q)||t.children[0];const ae=n0(q)?k.querySelectorAll(q):q;P=[].slice.call(ae||k.children)}function T(Q){const q=v3(t,k,P,r,s,Q,l);if(Q.loop&&!q.slideLooper.canLoop()){const ce=Object.assign({},Q,{loop:!1});return T(ce)}return q}function _(Q,q){w||(x=c(x,Q),b=u(x),C=q||C,S(),v=T(b),d([x,...C.map(({options:ce})=>ce)]).forEach(ce=>a.add(ce,"change",R)),b.active&&(v.translate.to(v.location.get()),v.animation.init(),v.slidesInView.init(),v.slideFocus.init(re),v.eventHandler.init(re),v.resizeHandler.init(re),v.slidesHandler.init(re),v.options.loop&&v.slideLooper.loop(),k.offsetParent&&P.length&&v.dragHandler.init(re),E=i.init(re,C)))}function R(Q,q){const ce=U();j(),_(c({startIndex:ce},Q),q),l.emit("reInit")}function j(){v.dragHandler.destroy(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),v.slidesInView.destroy(),v.animation.destroy(),i.destroy(),a.clear()}function V(){w||(w=!0,a.clear(),j(),l.emit("destroy"),l.clear())}function B(Q,q,ce){!b.active||w||(v.scrollBody.useBaseFriction().useDuration(q===!0?0:b.duration),v.scrollTo.index(Q,ce||0))}function te(Q){const q=v.index.add(1).get();B(q,Q,-1)}function K(Q){const q=v.index.add(-1).get();B(q,Q,1)}function I(){return v.index.add(1).get()!==U()}function N(){return v.index.add(-1).get()!==U()}function O(){return v.scrollSnapList}function $(){return v.scrollProgress.get(v.location.get())}function U(){return v.index.get()}function M(){return v.indexPrevious.get()}function F(){return v.slidesInView.get()}function J(){return v.slidesInView.get(!1)}function Y(){return E}function W(){return v}function H(){return t}function G(){return k}function oe(){return P}const re={canScrollNext:I,canScrollPrev:N,containerNode:G,internalEngine:W,destroy:V,off:p,on:f,emit:y,plugins:Y,previousScrollSnap:M,reInit:m,rootNode:H,scrollNext:te,scrollPrev:K,scrollProgress:$,scrollSnapList:O,scrollTo:B,selectedScrollSnap:U,slideNodes:oe,slidesInView:F,slidesNotInView:J};return _(e,n),setTimeout(()=>l.emit("init"),0),re}dp.globalOptions=void 0;function Jx(t={},e=[]){const n=g.useRef(t),r=g.useRef(e),[s,o]=g.useState(),[i,a]=g.useState(),l=g.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return g.useEffect(()=>{Hx(n.current,t)||(n.current=t,l())},[t,l]),g.useEffect(()=>{KU(r.current,e)||(r.current=e,l())},[e,l]),g.useEffect(()=>{if(HU()&&i){dp.globalOptions=Jx.globalOptions;const c=dp(i,n.current,r.current);return o(c),()=>c.destroy()}else o(void 0)},[i,o]),[a,s]}Jx.globalOptions=void 0;const hM=g.createContext(null);function bm(){const t=g.useContext(hM);if(!t)throw new Error("useCarousel must be used within a <Carousel />");return t}const pM=g.forwardRef(({orientation:t="horizontal",opts:e,setApi:n,plugins:r,className:s,children:o,...i},a)=>{const[l,c]=Jx({...e,axis:t==="horizontal"?"x":"y"},r),[u,d]=g.useState(!1),[f,p]=g.useState(!1),y=g.useCallback(x=>{x&&(d(x.canScrollPrev()),p(x.canScrollNext()))},[]),m=g.useCallback(()=>{c==null||c.scrollPrev()},[c]),w=g.useCallback(()=>{c==null||c.scrollNext()},[c]),v=g.useCallback(x=>{x.key==="ArrowLeft"?(x.preventDefault(),m()):x.key==="ArrowRight"&&(x.preventDefault(),w())},[m,w]);return g.useEffect(()=>{!c||!n||n(c)},[c,n]),g.useEffect(()=>{if(c)return y(c),c.on("reInit",y),c.on("select",y),()=>{c==null||c.off("select",y)}},[c,y]),h.jsx(hM.Provider,{value:{carouselRef:l,api:c,opts:e,orientation:t||((e==null?void 0:e.axis)==="y"?"vertical":"horizontal"),scrollPrev:m,scrollNext:w,canScrollPrev:u,canScrollNext:f},children:h.jsx("div",{ref:a,onKeyDownCapture:v,className:ie("relative",s),role:"region","aria-roledescription":"carousel",...i,children:o})})});pM.displayName="Carousel";const mM=g.forwardRef(({className:t,...e},n)=>{const{carouselRef:r,orientation:s}=bm();return h.jsx("div",{ref:r,className:"overflow-hidden",children:h.jsx("div",{ref:n,className:ie("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",t),...e})})});mM.displayName="CarouselContent";const gM=g.forwardRef(({className:t,...e},n)=>{const{orientation:r}=bm();return h.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:ie("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",t),...e})});gM.displayName="CarouselItem";const yM=g.forwardRef(({className:t,variant:e="outline",size:n="icon",...r},s)=>{const{orientation:o,scrollPrev:i,canScrollPrev:a}=bm();return h.jsxs(xe,{ref:s,variant:e,size:n,className:ie("absolute  h-8 w-8 rounded-full",o==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!a,onClick:i,...r,children:[h.jsx(zx,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Previous slide"})]})});yM.displayName="CarouselPrevious";const vM=g.forwardRef(({className:t,variant:e="outline",size:n="icon",...r},s)=>{const{orientation:o,scrollNext:i,canScrollNext:a}=bm();return h.jsxs(xe,{ref:s,variant:e,size:n,className:ie("absolute h-8 w-8 rounded-full",o==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",t),disabled:!a,onClick:i,...r,children:[h.jsx(RU,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Next slide"})]})});vM.displayName="CarouselNext";const wM=g.createContext({});function Yx(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const Qx=g.createContext(null),Xx=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function C3(t=!0){const e=g.useContext(Qx);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=g.useId();g.useEffect(()=>{t&&s(o)},[t]);const i=g.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,i]:[!0]}const Zx=typeof window<"u",xM=Zx?g.useLayoutEffect:g.useEffect,cr=t=>t;let s0=cr;function eb(t){let e;return()=>(e===void 0&&(e=t()),e)}const nc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},zs=t=>t*1e3,Vs=t=>t/1e3,E3={skipAnimations:!1,useManualTiming:!1};function k3(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function a(c){o.has(c)&&(l.schedule(c),t()),c(i)}const l={schedule:(c,u=!1,d=!1)=>{const p=d&&r?e:n;return u&&o.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),o.delete(c)},process:c=>{if(i=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const Wf=["read","resolveKeyframes","update","preRender","render","postRender"],T3=40;function bM(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=Wf.reduce((v,x)=>(v[x]=k3(o),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=i,p=()=>{const v=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,T3),1),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:Wf.reduce((v,x)=>{const b=i[x];return v[x]=(C,E=!1,k=!1)=>(n||y(),b.schedule(C,E,k)),v},{}),cancel:v=>{for(let x=0;x<Wf.length;x++)i[Wf[x]].cancel(v)},state:s,steps:i}}const{schedule:ct,cancel:Js,state:rn,steps:ny}=bM(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0),SM=g.createContext({strict:!1}),eE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rc={};for(const t in eE)rc[t]={isEnabled:e=>eE[t].some(n=>!!e[n])};function P3(t){for(const e in t)rc[e]={...rc[e],...t[e]}}const _3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_3.has(t)}let CM=t=>!fp(t);function N3(t){t&&(CM=e=>e.startsWith("on")?!fp(e):t(e))}try{N3(require("@emotion/is-prop-valid").default)}catch{}function R3(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(CM(s)||n===!0&&fp(s)||!e&&!fp(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function M3(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Sm=g.createContext({});function ud(t){return typeof t=="string"||Array.isArray(t)}function Cm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const tb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nb=["initial",...tb];function Em(t){return Cm(t.animate)||nb.some(e=>ud(t[e]))}function EM(t){return!!(Em(t)||t.variants)}function A3(t,e){if(Em(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ud(n)?n:void 0,animate:ud(r)?r:void 0}}return t.inherit!==!1?e:{}}function O3(t){const{initial:e,animate:n}=A3(t,g.useContext(Sm));return g.useMemo(()=>({initial:e,animate:n}),[tE(e),tE(n)])}function tE(t){return Array.isArray(t)?t.join(" "):t}const j3=Symbol.for("motionComponentSymbol");function dl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function D3(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dl(n)&&(n.current=r))},[e])}const rb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I3="framerAppearId",kM="data-"+rb(I3),{schedule:sb,cancel:Foe}=bM(queueMicrotask,!1),TM=g.createContext({});function L3(t,e,n,r,s){var o,i;const{visualElement:a}=g.useContext(Sm),l=g.useContext(SM),c=g.useContext(Qx),u=g.useContext(Xx).reducedMotion,d=g.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=g.useContext(TM);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&F3(d.current,n,s,p);const y=g.useRef(!1);g.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const m=n[kM],w=g.useRef(!!m&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,m))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,m)));return xM(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),sb.render(f.render),w.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),w.current=!1))}),f}function F3(t,e,n,r){const{layoutId:s,layout:o,drag:i,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:PM(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!i||a&&dl(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function PM(t){if(t)return t.options.allowProjection!==!1?t.projection:PM(t.parent)}function $3({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var o,i;t&&P3(t);function a(c,u){let d;const f={...g.useContext(Xx),...c,layoutId:B3(c)},{isStatic:p}=f,y=O3(c),m=r(c,p);if(!p&&Zx){z3();const w=V3(f);d=w.MeasureLayout,y.visualElement=L3(s,m,f,e,w.ProjectionNode)}return h.jsxs(Sm.Provider,{value:y,children:[d&&y.visualElement?h.jsx(d,{visualElement:y.visualElement,...f}):null,n(s,c,D3(m,y.visualElement,u),m,p,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(i=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&i!==void 0?i:""})`}`;const l=g.forwardRef(a);return l[j3]=s,l}function B3({layoutId:t}){const e=g.useContext(wM).id;return e&&t!==void 0?e+"-"+t:t}function z3(t,e){g.useContext(SM).strict}function V3(t){const{drag:e,layout:n}=rc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const U3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ob(t){return typeof t!="string"||t.includes("-")?!1:!!(U3.indexOf(t)>-1||/[A-Z]/u.test(t))}function nE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ib(t,e,n,r){if(typeof e=="function"){const[s,o]=nE(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=nE(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const o0=t=>Array.isArray(t),W3=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),H3=t=>o0(t)?t[t.length-1]||0:t,xn=t=>!!(t&&t.getVelocity);function kh(t){const e=xn(t)?t.get():t;return W3(e)?e.toValue():e}function K3({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const i={latestValues:q3(r,s,o,t),renderState:e()};return n&&(i.onMount=a=>n({props:r,current:a,...i}),i.onUpdate=a=>n(a)),i}const _M=t=>(e,n)=>{const r=g.useContext(Sm),s=g.useContext(Qx),o=()=>K3(t,e,r,s);return n?o():Yx(o)};function q3(t,e,n,r){const s={},o=r(t,{});for(const f in o)s[f]=kh(o[f]);let{initial:i,animate:a}=t;const l=Em(t),c=EM(t);e&&c&&!l&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const d=u?a:i;if(d&&typeof d!="boolean"&&!Cm(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const y=ib(t,f[p]);if(y){const{transitionEnd:m,transition:w,...v}=y;for(const x in v){let b=v[x];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(s[x]=b)}for(const x in m)s[x]=m[x]}}}return s}const Ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ta=new Set(Ec),NM=t=>e=>typeof e=="string"&&e.startsWith(t),RM=NM("--"),G3=NM("var(--"),ab=t=>G3(t)?J3.test(t.split("/*")[0].trim()):!1,J3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,MM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ys=(t,e,n)=>n>e?e:n<t?t:n,kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dd={...kc,transform:t=>Ys(0,1,t)},Hf={...kc,default:1},Yd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ao=Yd("deg"),vs=Yd("%"),Pe=Yd("px"),Y3=Yd("vh"),Q3=Yd("vw"),rE={...vs,parse:t=>vs.parse(t)/100,transform:t=>vs.transform(t*100)},X3={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe},Z3={rotate:ao,rotateX:ao,rotateY:ao,rotateZ:ao,scale:Hf,scaleX:Hf,scaleY:Hf,scaleZ:Hf,skew:ao,skewX:ao,skewY:ao,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:dd,originX:rE,originY:rE,originZ:Pe},sE={...kc,transform:Math.round},lb={...X3,...Z3,zIndex:sE,size:Pe,fillOpacity:dd,strokeOpacity:dd,numOctaves:sE},e5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t5=Ec.length;function n5(t,e,n){let r="",s=!0;for(let o=0;o<t5;o++){const i=Ec[o],a=t[i];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(i.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=MM(a,lb[i]);if(!l){s=!1;const u=e5[i]||i;r+=`${u}(${c}) `}n&&(e[i]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function cb(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let i=!1,a=!1;for(const l in e){const c=e[l];if(Ta.has(l)){i=!0;continue}else if(RM(l)){s[l]=c;continue}else{const u=MM(c,lb[l]);l.startsWith("origin")?(a=!0,o[l]=u):r[l]=u}}if(e.transform||(i||n?r.transform=n5(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=o;r.transformOrigin=`${l} ${c} ${u}`}}const r5={offset:"stroke-dashoffset",array:"stroke-dasharray"},s5={offset:"strokeDashoffset",array:"strokeDasharray"};function o5(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?r5:s5;t[o.offset]=Pe.transform(-r);const i=Pe.transform(e),a=Pe.transform(n);t[o.array]=`${i} ${a}`}function oE(t,e,n){return typeof t=="string"?t:Pe.transform(e+n*t)}function i5(t,e,n){const r=oE(e,t.x,t.width),s=oE(n,t.y,t.height);return`${r} ${s}`}function ub(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(cb(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:y}=t;f.transform&&(y&&(p.transform=f.transform),delete f.transform),y&&(s!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=i5(y,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&o5(f,i,a,l,!1)}const db=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),AM=()=>({...db(),attrs:{}}),fb=t=>typeof t=="string"&&t.toLowerCase()==="svg";function OM(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const jM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DM(t,e,n,r){OM(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(jM.has(s)?s:rb(s),e.attrs[s])}const hp={};function a5(t){Object.assign(hp,t)}function IM(t,{layout:e,layoutId:n}){return Ta.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hp[t]||t==="opacity")}function hb(t,e,n){var r;const{style:s}=t,o={};for(const i in s)(xn(s[i])||e.style&&xn(e.style[i])||IM(i,t)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[i]=s[i]);return o}function LM(t,e,n){const r=hb(t,e,n);for(const s in t)if(xn(t[s])||xn(e[s])){const o=Ec.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function l5(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const iE=["x","y","width","height","cx","cy","r"],c5={useVisualState:_M({scrapeMotionValuesFromProps:LM,createRenderState:AM,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const a in s)if(Ta.has(a)){o=!0;break}}if(!o)return;let i=!e;if(e)for(let a=0;a<iE.length;a++){const l=iE[a];t[l]!==e[l]&&(i=!0)}i&&ct.read(()=>{l5(n,r),ct.render(()=>{ub(r,s,fb(n.tagName),t.transformTemplate),DM(n,r)})})}})},u5={useVisualState:_M({scrapeMotionValuesFromProps:hb,createRenderState:db})};function FM(t,e,n){for(const r in e)!xn(e[r])&&!IM(r,n)&&(t[r]=e[r])}function d5({transformTemplate:t},e){return g.useMemo(()=>{const n=db();return cb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function f5(t,e){const n=t.style||{},r={};return FM(r,n,t),Object.assign(r,d5(t,e)),r}function h5(t,e){const n={},r=f5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function p5(t,e,n,r){const s=g.useMemo(()=>{const o=AM();return ub(o,e,fb(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};FM(o,t.style,t),s.style={...o,...s.style}}return s}function m5(t=!1){return(n,r,s,{latestValues:o},i)=>{const l=(ob(n)?p5:h5)(r,o,i,n),c=R3(r,typeof n=="string",t),u=n!==g.Fragment?{...c,...l,ref:s}:{},{children:d}=r,f=g.useMemo(()=>xn(d)?d.get():d,[d]);return g.createElement(n,{...u,children:f})}}function g5(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const i={...ob(r)?c5:u5,preloadedFeatures:t,useRender:m5(s),createVisualElement:e,Component:r};return $3(i)}}function $M(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function km(t,e,n){const r=t.getProps();return ib(r,e,n!==void 0?n:r.custom,t)}const y5=eb(()=>window.ScrollTimeline!==void 0);class v5{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(y5()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class w5 extends v5{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function pb(t,e){return t?t[e]||t.default||t:void 0}const i0=2e4;function BM(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<i0;)e+=n,r=t.next(e);return e>=i0?1/0:e}function mb(t){return typeof t=="function"}function aE(t,e){t.timeline=e,t.onfinish=null}const gb=t=>Array.isArray(t)&&typeof t[0]=="number",x5={linearEasing:void 0};function b5(t,e){const n=eb(t);return()=>{var r;return(r=x5[e])!==null&&r!==void 0?r:n()}}const pp=b5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zM=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(nc(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function VM(t){return!!(typeof t=="function"&&pp()||!t||typeof t=="string"&&(t in a0||pp())||gb(t)||Array.isArray(t)&&t.every(VM))}const lu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,a0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lu([0,.65,.55,1]),circOut:lu([.55,0,1,.45]),backIn:lu([.31,.01,.66,-.59]),backOut:lu([.33,1.53,.69,.99])};function UM(t,e){if(t)return typeof t=="function"&&pp()?zM(t,e):gb(t)?lu(t):Array.isArray(t)?t.map(n=>UM(n,e)||a0.easeOut):a0[t]}const Ir={x:!1,y:!1};function WM(){return Ir.x||Ir.y}function S5(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function HM(t,e){const n=S5(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function lE(t){return e=>{e.pointerType==="touch"||WM()||t(e)}}function C5(t,e,n={}){const[r,s,o]=HM(t,n),i=lE(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=lE(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",i,s)}),o}const KM=(t,e)=>e?t===e?!0:KM(t,e.parentElement):!1,yb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,E5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function k5(t){return E5.has(t.tagName)||t.tabIndex!==-1}const cu=new WeakSet;function cE(t){return e=>{e.key==="Enter"&&t(e)}}function ry(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const T5=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=cE(()=>{if(cu.has(n))return;ry(n,"down");const s=cE(()=>{ry(n,"up")}),o=()=>ry(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function uE(t){return yb(t)&&!WM()}function P5(t,e,n={}){const[r,s,o]=HM(t,n),i=a=>{const l=a.currentTarget;if(!uE(a)||cu.has(l))return;cu.add(l);const c=e(a),u=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!uE(p)||!cu.has(l))&&(cu.delete(l),typeof c=="function"&&c(p,{success:y}))},d=p=>{u(p,n.useGlobalTarget||KM(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{!k5(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,s),a.addEventListener("focus",c=>T5(c,s),s)}),o}function _5(t){return t==="x"||t==="y"?Ir[t]?null:(Ir[t]=!0,()=>{Ir[t]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}const qM=new Set(["width","height","top","left","right","bottom",...Ec]);let Th;function N5(){Th=void 0}const ws={now:()=>(Th===void 0&&ws.set(rn.isProcessing||E3.useManualTiming?rn.timestamp:performance.now()),Th),set:t=>{Th=t,queueMicrotask(N5)}};function vb(t,e){t.indexOf(e)===-1&&t.push(e)}function wb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class xb{constructor(){this.subscriptions=[]}add(e){return vb(this.subscriptions,e),()=>wb(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const i=this.subscriptions[o];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function GM(t,e){return e?t*(1e3/e):0}const dE=30,R5=t=>!isNaN(parseFloat(t)),Ru={current:void 0};class M5{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=ws.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ws.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=R5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new xb);const r=this.events[e].add(n);return e==="change"?()=>{r(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ru.current&&Ru.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ws.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dE);return GM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sc(t,e){return new M5(t,e)}function A5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,sc(n))}function O5(t,e){const n=km(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const i in o){const a=H3(o[i]);A5(t,i,a)}}function j5(t){return!!(xn(t)&&t.add)}function l0(t,e){const n=t.getValue("willChange");if(j5(n))return n.add(e)}function JM(t){return t.props[kM]}const YM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,D5=1e-7,I5=12;function L5(t,e,n,r,s){let o,i,a=0;do i=e+(n-e)/2,o=YM(i,r,s)-t,o>0?n=i:e=i;while(Math.abs(o)>D5&&++a<I5);return i}function Qd(t,e,n,r){if(t===e&&n===r)return cr;const s=o=>L5(o,0,1,t,n);return o=>o===0||o===1?o:YM(s(o),e,r)}const QM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XM=t=>e=>1-t(1-e),ZM=Qd(.33,1.53,.69,.99),bb=XM(ZM),eA=QM(bb),tA=t=>(t*=2)<1?.5*bb(t):.5*(2-Math.pow(2,-10*(t-1))),Sb=t=>1-Math.sin(Math.acos(t)),nA=XM(Sb),rA=QM(Sb),sA=t=>/^0[^.\s]+$/u.test(t);function F5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sA(t):!0}const Mu=t=>Math.round(t*1e5)/1e5,Cb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $5(t){return t==null}const B5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Eb=(t,e)=>n=>!!(typeof n=="string"&&B5.test(n)&&n.startsWith(t)||e&&!$5(n)&&Object.prototype.hasOwnProperty.call(n,e)),oA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,i,a]=r.match(Cb);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},z5=t=>Ys(0,255,t),sy={...kc,transform:t=>Math.round(z5(t))},Li={test:Eb("rgb","red"),parse:oA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+sy.transform(t)+", "+sy.transform(e)+", "+sy.transform(n)+", "+Mu(dd.transform(r))+")"};function V5(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const c0={test:Eb("#"),parse:V5,transform:Li.transform},fl={test:Eb("hsl","hue"),parse:oA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vs.transform(Mu(e))+", "+vs.transform(Mu(n))+", "+Mu(dd.transform(r))+")"},gn={test:t=>Li.test(t)||c0.test(t)||fl.test(t),parse:t=>Li.test(t)?Li.parse(t):fl.test(t)?fl.parse(t):c0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Li.transform(t):fl.transform(t)},U5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function W5(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cb))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(U5))===null||n===void 0?void 0:n.length)||0)>0}const iA="number",aA="color",H5="var",K5="var(",fE="${}",q5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fd(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const a=e.replace(q5,l=>(gn.test(l)?(r.color.push(o),s.push(aA),n.push(gn.parse(l))):l.startsWith(K5)?(r.var.push(o),s.push(H5),n.push(l)):(r.number.push(o),s.push(iA),n.push(parseFloat(l))),++o,fE)).split(fE);return{values:n,split:a,indexes:r,types:s}}function lA(t){return fd(t).values}function cA(t){const{split:e,types:n}=fd(t),r=e.length;return s=>{let o="";for(let i=0;i<r;i++)if(o+=e[i],s[i]!==void 0){const a=n[i];a===iA?o+=Mu(s[i]):a===aA?o+=gn.transform(s[i]):o+=s[i]}return o}}const G5=t=>typeof t=="number"?0:t;function J5(t){const e=lA(t);return cA(t)(e.map(G5))}const Zo={test:W5,parse:lA,createTransformer:cA,getAnimatableNone:J5},Y5=new Set(["brightness","contrast","saturate","opacity"]);function Q5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cb)||[];if(!r)return t;const s=n.replace(r,"");let o=Y5.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const X5=/\b([a-z-]*)\(.*?\)/gu,u0={...Zo,getAnimatableNone:t=>{const e=t.match(X5);return e?e.map(Q5).join(" "):t}},Z5={...lb,color:gn,backgroundColor:gn,outlineColor:gn,fill:gn,stroke:gn,borderColor:gn,borderTopColor:gn,borderRightColor:gn,borderBottomColor:gn,borderLeftColor:gn,filter:u0,WebkitFilter:u0},kb=t=>Z5[t];function uA(t,e){let n=kb(t);return n!==u0&&(n=Zo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const eW=new Set(["auto","none","0"]);function tW(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!eW.has(o)&&fd(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=uA(n,s)}const hE=t=>t===kc||t===Pe,pE=(t,e)=>parseFloat(t.split(", ")[e]),mE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return pE(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?pE(o[1],t):0}},nW=new Set(["x","y","z"]),rW=Ec.filter(t=>!nW.has(t));function sW(t){const e=[];return rW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const oc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:mE(4,13),y:mE(5,14)};oc.translateX=oc.x;oc.translateY=oc.y;const Yi=new Set;let d0=!1,f0=!1;function dA(){if(f0){const t=Array.from(Yi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=sW(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,i])=>{var a;(a=r.getValue(o))===null||a===void 0||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}f0=!1,d0=!1,Yi.forEach(t=>t.complete()),Yi.clear()}function fA(){Yi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(f0=!0)})}function oW(){fA(),dA()}class Tb{constructor(e,n,r,s,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Yi.add(this),d0||(d0=!0,ct.read(fA),ct.resolveKeyframes(dA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Yi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Yi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),iW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aW(t){const e=iW.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function pA(t,e,n=1){const[r,s]=aW(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const i=o.trim();return hA(i)?parseFloat(i):i}return ab(s)?pA(s,e,n+1):s}const mA=t=>e=>e.test(t),lW={test:t=>t==="auto",parse:t=>t},gA=[kc,Pe,vs,ao,Q3,Y3,lW],gE=t=>gA.find(mA(t));class yA extends Tb{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),ab(c))){const u=pA(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!qM.has(r)||e.length!==2)return;const[s,o]=e,i=gE(s),a=gE(o);if(i!==a)if(hE(i)&&hE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)F5(e[s])&&r.push(s);r.length&&tW(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=oc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const i=s.length-1,a=s[i];s[i]=oc[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const yE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zo.test(t)||t==="0")&&!t.startsWith("url("));function cW(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function uW(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],i=yE(s,e),a=yE(o,e);return!i||!a?!1:cW(t)||(n==="spring"||mb(n))&&r}const dW=t=>t!==null;function Tm(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(dW),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const fW=40;class vA{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:i="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ws.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:i,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>fW?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&oW(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ws.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:i,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!uW(e,r,s,o))if(i)this.options.duration=0;else{l&&l(Tm(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const bt=(t,e,n)=>t+(e-t)*n;function oy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,i=0;if(!e)s=o=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=oy(l,a,t+1/3),o=oy(l,a,t),i=oy(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}function mp(t,e){return n=>n>0?e:t}const iy=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},pW=[c0,Li,fl],mW=t=>pW.find(e=>e.test(t));function vE(t){const e=mW(t);if(!e)return!1;let n=e.parse(t);return e===fl&&(n=hW(n)),n}const wE=(t,e)=>{const n=vE(t),r=vE(e);if(!n||!r)return mp(t,e);const s={...n};return o=>(s.red=iy(n.red,r.red,o),s.green=iy(n.green,r.green,o),s.blue=iy(n.blue,r.blue,o),s.alpha=bt(n.alpha,r.alpha,o),Li.transform(s))},gW=(t,e)=>n=>e(t(n)),Xd=(...t)=>t.reduce(gW),h0=new Set(["none","hidden"]);function yW(t,e){return h0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vW(t,e){return n=>bt(t,e,n)}function Pb(t){return typeof t=="number"?vW:typeof t=="string"?ab(t)?mp:gn.test(t)?wE:bW:Array.isArray(t)?wA:typeof t=="object"?gn.test(t)?wE:wW:mp}function wA(t,e){const n=[...t],r=n.length,s=t.map((o,i)=>Pb(o)(o,e[i]));return o=>{for(let i=0;i<r;i++)n[i]=s[i](o);return n}}function wW(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Pb(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function xW(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const i=e.types[o],a=t.indexes[i][s[i]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[o]=l,s[i]++}return r}const bW=(t,e)=>{const n=Zo.createTransformer(e),r=fd(t),s=fd(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?h0.has(t)&&!s.values.length||h0.has(e)&&!r.values.length?yW(t,e):Xd(wA(xW(r,s),s.values),n):mp(t,e)};function xA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?bt(t,e,n):Pb(t)(t,e)}const SW=5;function bA(t,e,n){const r=Math.max(e-SW,0);return GM(n-t(r),e-r)}const Pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ay=.001;function CW({duration:t=Pt.duration,bounce:e=Pt.bounce,velocity:n=Pt.velocity,mass:r=Pt.mass}){let s,o,i=1-e;i=Ys(Pt.minDamping,Pt.maxDamping,i),t=Ys(Pt.minDuration,Pt.maxDuration,Vs(t)),i<1?(s=c=>{const u=c*i,d=u*t,f=u-n,p=p0(c,i),y=Math.exp(-d);return ay-f/p*y},o=c=>{const d=c*i*t,f=d*n+n,p=Math.pow(i,2)*Math.pow(c,2)*t,y=Math.exp(-d),m=p0(Math.pow(c,2),i);return(-s(c)+ay>0?-1:1)*((f-p)*y)/m}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-ay+u*d},o=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=kW(s,o,a);if(t=zs(t),isNaN(l))return{stiffness:Pt.stiffness,damping:Pt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:i*2*Math.sqrt(r*c),duration:t}}}const EW=12;function kW(t,e,n){let r=n;for(let s=1;s<EW;s++)r=r-t(r)/e(r);return r}function p0(t,e){return t*Math.sqrt(1-e*e)}const TW=["duration","bounce"],PW=["stiffness","damping","mass"];function xE(t,e){return e.some(n=>t[n]!==void 0)}function _W(t){let e={velocity:Pt.velocity,stiffness:Pt.stiffness,damping:Pt.damping,mass:Pt.mass,isResolvedFromDuration:!1,...t};if(!xE(t,PW)&&xE(t,TW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*Ys(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Pt.mass,stiffness:s,damping:o}}else{const n=CW(t);e={...e,...n,mass:Pt.mass},e.isResolvedFromDuration=!0}return e}function SA(t=Pt.visualDuration,e=Pt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=_W({...n,velocity:-Vs(n.velocity||0)}),y=f||0,m=c/(2*Math.sqrt(l*u)),w=i-o,v=Vs(Math.sqrt(l/u)),x=Math.abs(w)<5;r||(r=x?Pt.restSpeed.granular:Pt.restSpeed.default),s||(s=x?Pt.restDelta.granular:Pt.restDelta.default);let b;if(m<1){const E=p0(v,m);b=k=>{const P=Math.exp(-m*v*k);return i-P*((y+m*v*w)/E*Math.sin(E*k)+w*Math.cos(E*k))}}else if(m===1)b=E=>i-Math.exp(-v*E)*(w+(y+v*w)*E);else{const E=v*Math.sqrt(m*m-1);b=k=>{const P=Math.exp(-m*v*k),S=Math.min(E*k,300);return i-P*((y+m*v*w)*Math.sinh(S)+E*w*Math.cosh(S))/E}}const C={calculatedDuration:p&&d||null,next:E=>{const k=b(E);if(p)a.done=E>=d;else{let P=0;m<1&&(P=E===0?zs(y):bA(b,E,k));const S=Math.abs(P)<=r,T=Math.abs(i-k)<=s;a.done=S&&T}return a.value=a.done?i:k,a},toString:()=>{const E=Math.min(BM(C),i0),k=zM(P=>C.next(E*P).value,E,30);return E+"ms "+k}};return C}function bE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=S=>a!==void 0&&S<a||l!==void 0&&S>l,y=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let m=n*e;const w=d+m,v=i===void 0?w:i(w);v!==w&&(m=v-d);const x=S=>-m*Math.exp(-S/r),b=S=>v+x(S),C=S=>{const T=x(S),_=b(S);f.done=Math.abs(T)<=c,f.value=f.done?v:_};let E,k;const P=S=>{p(f.value)&&(E=S,k=SA({keyframes:[f.value,y(f.value)],velocity:bA(b,S,f.value),damping:s,stiffness:o,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:S=>{let T=!1;return!k&&E===void 0&&(T=!0,C(S),P(S)),E!==void 0&&S>=E?k.next(S-E):(!T&&C(S),f)}}}const NW=Qd(.42,0,1,1),RW=Qd(0,0,.58,1),CA=Qd(.42,0,.58,1),MW=t=>Array.isArray(t)&&typeof t[0]!="number",SE={linear:cr,easeIn:NW,easeInOut:CA,easeOut:RW,circIn:Sb,circInOut:rA,circOut:nA,backIn:bb,backInOut:eA,backOut:ZM,anticipate:tA},CE=t=>{if(gb(t)){s0(t.length===4);const[e,n,r,s]=t;return Qd(e,n,r,s)}else if(typeof t=="string")return s0(SE[t]!==void 0),SE[t];return t};function AW(t,e,n){const r=[],s=n||xA,o=t.length-1;for(let i=0;i<o;i++){let a=s(t[i],t[i+1]);if(e){const l=Array.isArray(e)?e[i]||cr:e;a=Xd(l,a)}r.push(a)}return r}function EA(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(s0(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=AW(e,r,s),l=a.length,c=u=>{if(i&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=nc(t[d],t[d+1],u);return a[d](f)};return n?u=>c(Ys(t[0],t[o-1],u)):c}function OW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=nc(0,e,r);t.push(bt(n,1,s))}}function jW(t){const e=[0];return OW(e,t.length-1),e}function DW(t,e){return t.map(n=>n*e)}function IW(t,e){return t.map(()=>e||CA).splice(0,t.length-1)}function gp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=MW(r)?r.map(CE):CE(r),o={done:!1,value:e[0]},i=DW(n&&n.length===e.length?n:jW(e),t),a=EA(i,e,{ease:Array.isArray(s)?s:IW(e,s)});return{calculatedDuration:t,next:l=>(o.value=a(l),o.done=l>=t,o)}}const LW=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ct.update(e,!0),stop:()=>Js(e),now:()=>rn.isProcessing?rn.timestamp:ws.now()}},FW={decay:bE,inertia:bE,tween:gp,keyframes:gp,spring:SA},$W=t=>t/100;class _b extends vA{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,i=(s==null?void 0:s.KeyframeResolver)||Tb,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new i(o,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:i=0}=this.options,a=mb(n)?n:FW[n]||gp;let l,c;a!==gp&&typeof e[0]!="number"&&(l=Xd($W,xA(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});o==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=BM(u));const{calculatedDuration:d}=u,f=d+s,p=f*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:i,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return o.next(0);const{delay:f,repeat:p,repeatType:y,repeatDelay:m,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,C=o;if(p){const S=Math.min(this.currentTime,u)/d;let T=Math.floor(S),_=S%1;!_&&S>=1&&(_=1),_===1&&T--,T=Math.min(T,p+1),!!(T%2)&&(y==="reverse"?(_=1-_,m&&(_-=m/d)):y==="mirror"&&(C=i)),b=Ys(0,1,_)*d}const E=x?{done:!1,value:l[0]}:C.next(b);a&&(E.value=a(E.value));let{done:k}=E;!x&&c!==null&&(k=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return P&&s!==void 0&&(E.value=Tm(l,this.options,s)),w&&w(E.value),P&&this.finish(),E}get duration(){const{resolved:e}=this;return e?Vs(e.calculatedDuration):0}get time(){return Vs(this.currentTime)}set time(e){e=zs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=LW,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const BW=new Set(["opacity","clipPath","filter","transform"]);function zW(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:i="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=UM(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}const VW=eb(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yp=10,UW=2e4;function WW(t){return mb(t.type)||t.type==="spring"||!VM(t.ease)}function HW(t,e){const n=new _b({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<UW;)r=n.sample(o),s.push(r.value),o+=yp;return{times:void 0,keyframes:s,duration:o-yp,ease:"linear"}}const kA={anticipate:tA,backInOut:eA,circInOut:rA};function KW(t){return t in kA}class EE extends vA{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new yA(o,(i,a)=>this.onKeyframesResolved(i,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:i,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof o=="string"&&pp()&&KW(o)&&(o=kA[o]),WW(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:y,...m}=this.options,w=HW(e,m);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,s=w.times,o=w.ease,i="keyframes"}const u=zW(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:o});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(aE(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Tm(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:i,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Vs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Vs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=zs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return cr;const{animation:r}=n;aE(r,e)}return cr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:i,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...p}=this.options,y=new _b({...p,keyframes:r,duration:s,type:o,ease:i,times:a,isGenerator:!0}),m=zs(this.time);c.setWithVelocity(y.sample(m-yp).value,y.sample(m).value,yp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:i,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return VW()&&r&&BW.has(r)&&!l&&!c&&!s&&o!=="mirror"&&i!==0&&a!=="inertia"}}const qW={type:"spring",stiffness:500,damping:25,restSpeed:10},GW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),JW={type:"keyframes",duration:.8},YW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QW=(t,{keyframes:e})=>e.length>2?JW:Ta.has(t)?t.startsWith("scale")?GW(e[1]):qW:YW;function XW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:i,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Nb=(t,e,n,r={},s,o)=>i=>{const a=pb(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-zs(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:s};XW(a)||(u={...u,...QW(t,u)}),u.duration&&(u.duration=zs(u.duration)),u.repeatDelay&&(u.repeatDelay=zs(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!o&&e.get()!==void 0){const f=Tm(u.keyframes,a);if(f!==void 0)return ct.update(()=>{u.onUpdate(f),u.onComplete()}),new w5([])}return!o&&EE.supports(u)?new EE(u):new _b(u)};function ZW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function TA(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:i=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(i=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const f=t.getValue(d,(o=t.latestValues[d])!==null&&o!==void 0?o:null),p=l[d];if(p===void 0||u&&ZW(u,d))continue;const y={delay:n,...pb(i||{},d)};let m=!1;if(window.MotionHandoffAnimation){const v=JM(t);if(v){const x=window.MotionHandoffAnimation(v,d,ct);x!==null&&(y.startTime=x,m=!0)}}l0(t,d),f.start(Nb(d,f,p,t.shouldReduceMotion&&qM.has(d)?{type:!1}:y,t,m));const w=f.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{ct.update(()=>{a&&O5(t,a)})}),c}function m0(t,e,n={}){var r;const s=km(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const i=s?()=>Promise.all(TA(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=o;return e6(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function e6(t,e,n=0,r=0,s=1,o){const i=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(t6).forEach((c,u)=>{c.notify("AnimationStart",e),i.push(m0(c,e,{...o,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(i)}function t6(t,e){return t.sortNodePosition(e)}function n6(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>m0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=m0(t,e,n);else{const s=typeof e=="function"?km(t,e,n.custom):e;r=Promise.all(TA(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const r6=nb.length;function PA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?PA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<r6;n++){const r=nb[n],s=t.props[r];(ud(s)||s===!1)&&(e[r]=s)}return e}const s6=[...tb].reverse(),o6=tb.length;function i6(t){return e=>Promise.all(e.map(({animation:n,options:r})=>n6(t,n,r)))}function a6(t){let e=i6(t),n=kE(),r=!0;const s=l=>(c,u)=>{var d;const f=km(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:y,...m}=f;c={...c,...m,...y}}return c};function o(l){e=l(t)}function i(l){const{props:c}=t,u=PA(t.parent)||{},d=[],f=new Set;let p={},y=1/0;for(let w=0;w<o6;w++){const v=s6[w],x=n[v],b=c[v]!==void 0?c[v]:u[v],C=ud(b),E=v===l?x.isActive:null;E===!1&&(y=w);let k=b===u[v]&&b!==c[v]&&C;if(k&&r&&t.manuallyAnimateOnMount&&(k=!1),x.protectedKeys={...p},!x.isActive&&E===null||!b&&!x.prevProp||Cm(b)||typeof b=="boolean")continue;const P=l6(x.prevProp,b);let S=P||v===l&&x.isActive&&!k&&C||w>y&&C,T=!1;const _=Array.isArray(b)?b:[b];let R=_.reduce(s(v),{});E===!1&&(R={});const{prevResolvedValues:j={}}=x,V={...j,...R},B=I=>{S=!0,f.has(I)&&(T=!0,f.delete(I)),x.needsAnimating[I]=!0;const N=t.getValue(I);N&&(N.liveStyle=!1)};for(const I in V){const N=R[I],O=j[I];if(p.hasOwnProperty(I))continue;let $=!1;o0(N)&&o0(O)?$=!$M(N,O):$=N!==O,$?N!=null?B(I):f.add(I):N!==void 0&&f.has(I)?B(I):x.protectedKeys[I]=!0}x.prevProp=b,x.prevResolvedValues=R,x.isActive&&(p={...p,...R}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(k&&P)||T)&&d.push(..._.map(I=>({animation:I,options:{type:v}})))}if(f.size){const w={};f.forEach(v=>{const x=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),w[v]=x??null}),d.push({animation:w})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=i(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=kE(),r=!0}}}function l6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$M(e,t):!1}function xi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kE(){return{animate:xi(!0),whileInView:xi(),whileHover:xi(),whileTap:xi(),whileDrag:xi(),whileFocus:xi(),exit:xi()}}class fi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class c6 extends fi{constructor(e){super(e),e.animationState||(e.animationState=a6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let u6=0;class d6 extends fi{constructor(){super(...arguments),this.id=u6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const f6={animation:{Feature:c6},exit:{Feature:d6}};function hd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Zd(t){return{point:{x:t.pageX,y:t.pageY}}}const h6=t=>e=>yb(e)&&t(e,Zd(e));function Au(t,e,n,r){return hd(t,e,h6(n),r)}const TE=(t,e)=>Math.abs(t-e);function p6(t,e){const n=TE(t.x,e.x),r=TE(t.y,e.y);return Math.sqrt(n**2+r**2)}class _A{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=cy(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=p6(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=d,{timestamp:m}=rn;this.history.push({...y,timestamp:m});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ly(f,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=cy(d.type==="pointercancel"?this.lastMoveEventInfo:ly(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,w),y&&y(d,w)},!yb(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const i=Zd(e),a=ly(i,this.transformPagePoint),{point:l}=a,{timestamp:c}=rn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,cy(a,this.history)),this.removeListeners=Xd(Au(this.contextWindow,"pointermove",this.handlePointerMove),Au(this.contextWindow,"pointerup",this.handlePointerUp),Au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Js(this.updatePoint)}}function ly(t,e){return e?{point:e(t.point)}:t}function PE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function cy({point:t},e){return{point:t,delta:PE(t,NA(e)),offset:PE(t,m6(e)),velocity:g6(e,.1)}}function m6(t){return t[0]}function NA(t){return t[t.length-1]}function g6(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=NA(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>zs(e)));)n--;if(!r)return{x:0,y:0};const o=Vs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const RA=1e-4,y6=1-RA,v6=1+RA,MA=.01,w6=0-MA,x6=0+MA;function hr(t){return t.max-t.min}function b6(t,e,n){return Math.abs(t-e)<=n}function _E(t,e,n,r=.5){t.origin=r,t.originPoint=bt(e.min,e.max,t.origin),t.scale=hr(n)/hr(e),t.translate=bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=y6&&t.scale<=v6||isNaN(t.scale))&&(t.scale=1),(t.translate>=w6&&t.translate<=x6||isNaN(t.translate))&&(t.translate=0)}function Ou(t,e,n,r){_E(t.x,e.x,n.x,r?r.originX:void 0),_E(t.y,e.y,n.y,r?r.originY:void 0)}function NE(t,e,n){t.min=n.min+e.min,t.max=t.min+hr(e)}function S6(t,e,n){NE(t.x,e.x,n.x),NE(t.y,e.y,n.y)}function RE(t,e,n){t.min=e.min-n.min,t.max=t.min+hr(e)}function ju(t,e,n){RE(t.x,e.x,n.x),RE(t.y,e.y,n.y)}function C6(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?bt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?bt(n,t,r.max):Math.min(t,n)),t}function ME(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function E6(t,{top:e,left:n,bottom:r,right:s}){return{x:ME(t.x,n,s),y:ME(t.y,e,r)}}function AE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function k6(t,e){return{x:AE(t.x,e.x),y:AE(t.y,e.y)}}function T6(t,e){let n=.5;const r=hr(t),s=hr(e);return s>r?n=nc(e.min,e.max-r,t.min):r>s&&(n=nc(t.min,t.max-s,e.min)),Ys(0,1,n)}function P6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const g0=.35;function _6(t=g0){return t===!1?t=0:t===!0&&(t=g0),{x:OE(t,"left","right"),y:OE(t,"top","bottom")}}function OE(t,e,n){return{min:jE(t,e),max:jE(t,n)}}function jE(t,e){return typeof t=="number"?t:t[e]||0}const DE=()=>({translate:0,scale:1,origin:0,originPoint:0}),hl=()=>({x:DE(),y:DE()}),IE=()=>({min:0,max:0}),Ot=()=>({x:IE(),y:IE()});function vr(t){return[t("x"),t("y")]}function AA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function N6({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function R6(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function uy(t){return t===void 0||t===1}function y0({scale:t,scaleX:e,scaleY:n}){return!uy(t)||!uy(e)||!uy(n)}function Ei(t){return y0(t)||OA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function OA(t){return LE(t.x)||LE(t.y)}function LE(t){return t&&t!=="0%"}function vp(t,e,n){const r=t-n,s=e*r;return n+s}function FE(t,e,n,r,s){return s!==void 0&&(t=vp(t,s,r)),vp(t,n,r)+e}function v0(t,e=0,n=1,r,s){t.min=FE(t.min,e,n,r,s),t.max=FE(t.max,e,n,r,s)}function jA(t,{x:e,y:n}){v0(t.x,e.translate,e.scale,e.originPoint),v0(t.y,n.translate,n.scale,n.originPoint)}const $E=.999999999999,BE=1.0000000000001;function M6(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,i;for(let a=0;a<s;a++){o=n[a],i=o.projectionDelta;const{visualElement:l}=o.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ml(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,jA(t,i)),r&&Ei(o.latestValues)&&ml(t,o.latestValues))}e.x<BE&&e.x>$E&&(e.x=1),e.y<BE&&e.y>$E&&(e.y=1)}function pl(t,e){t.min=t.min+e,t.max=t.max+e}function zE(t,e,n,r,s=.5){const o=bt(t.min,t.max,s);v0(t,e,n,o,r)}function ml(t,e){zE(t.x,e.x,e.scaleX,e.scale,e.originX),zE(t.y,e.y,e.scaleY,e.scale,e.originY)}function DA(t,e){return AA(R6(t.getBoundingClientRect(),e))}function A6(t,e,n){const r=DA(t,n),{scroll:s}=e;return s&&(pl(r.x,s.offset.x),pl(r.y,s.offset.y)),r}const IA=({current:t})=>t?t.ownerDocument.defaultView:null,O6=new WeakMap;class j6{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ot(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zd(u).point)},o=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_5(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vr(w=>{let v=this.getAxisMotionValue(w).get()||0;if(vs.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(v=hr(b)*(parseFloat(v)/100))}}this.originPoint[w]=v}),y&&ct.postRender(()=>y(u,d)),l0(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},i=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:m}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:w}=d;if(p&&this.currentDirection===null){this.currentDirection=D6(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>vr(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new _A(e,{onSessionStart:s,onStart:o,onMove:i,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:IA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ct.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Kf(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=C6(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&dl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=E6(s.layoutBox,n):this.constraints=!1,this.elastic=_6(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&vr(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=P6(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dl(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=A6(r,s.root,this.visualElement.getTransformPagePoint());let i=k6(s.layout.layoutBox,o);if(n){const a=n(N6(i));this.hasMutatedConstraints=!!a,a&&(i=AA(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=vr(u=>{if(!Kf(u,n,this.currentDirection))return;let d=l&&l[u]||{};i&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return l0(this.visualElement,e),r.start(Nb(e,r,0,n,this.visualElement,!1))}stopAnimation(){vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vr(n=>{const{drag:r}=this.getProps();if(!Kf(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:a}=s.layout.layoutBox[n];o.set(e[n]-bt(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dl(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vr(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const l=a.get();s[i]=T6({min:l,max:l},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vr(i=>{if(!Kf(i,e,null))return;const a=this.getAxisMotionValue(i),{min:l,max:c}=this.constraints[i];a.set(bt(l,c,s[i]))})}addListeners(){if(!this.visualElement.current)return;O6.set(this.visualElement,this);const e=this.visualElement.current,n=Au(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ct.read(r);const i=hd(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(vr(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:i=g0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function Kf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function D6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class I6 extends fi{constructor(e){super(e),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new j6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const VE=t=>(e,n)=>{t&&ct.postRender(()=>t(e,n))};class L6 extends fi{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(e){this.session=new _A(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:VE(e),onStart:VE(n),onMove:r,onEnd:(o,i)=>{delete this.session,s&&ct.postRender(()=>s(o,i))}}}mount(){this.removePointerDownListener=Au(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ph={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=UE(t,e.target.x),r=UE(t,e.target.y);return`${n}% ${r}%`}},F6={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Zo.parse(t);if(s.length>5)return r;const o=Zo.createTransformer(t),i=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+i]/=a,s[1+i]/=l;const c=bt(a,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=c),typeof s[3+i]=="number"&&(s[3+i]/=c),o(s)}};class $6 extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;a5(B6),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Ph.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,i=r.projection;return i&&(i.isPresent=o,s||e.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||ct.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LA(t){const[e,n]=C3(),r=g.useContext(wM);return h.jsx($6,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(TM),isPresent:e,safeToRemove:n})}const B6={borderRadius:{...Qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qc,borderTopRightRadius:Qc,borderBottomLeftRadius:Qc,borderBottomRightRadius:Qc,boxShadow:F6};function z6(t,e,n){const r=xn(t)?t:sc(t);return r.start(Nb("",r,e,n)),r.animation}function V6(t){return t instanceof SVGElement&&t.tagName!=="svg"}const U6=(t,e)=>t.depth-e.depth;class W6{constructor(){this.children=[],this.isDirty=!1}add(e){vb(this.children,e),this.isDirty=!0}remove(e){wb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U6),this.isDirty=!1,this.children.forEach(e)}}function H6(t,e){const n=ws.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Js(r),t(o-e))};return ct.read(r,!0),()=>Js(r)}const FA=["TopLeft","TopRight","BottomLeft","BottomRight"],K6=FA.length,WE=t=>typeof t=="string"?parseFloat(t):t,HE=t=>typeof t=="number"||Pe.test(t);function q6(t,e,n,r,s,o){s?(t.opacity=bt(0,n.opacity!==void 0?n.opacity:1,G6(r)),t.opacityExit=bt(e.opacity!==void 0?e.opacity:1,0,J6(r))):o&&(t.opacity=bt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<K6;i++){const a=`border${FA[i]}Radius`;let l=KE(e,a),c=KE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||HE(l)===HE(c)?(t[a]=Math.max(bt(WE(l),WE(c),r),0),(vs.test(c)||vs.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=bt(e.rotate||0,n.rotate||0,r))}function KE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const G6=$A(0,.5,nA),J6=$A(.5,.95,cr);function $A(t,e,n){return r=>r<t?0:r>e?1:n(nc(t,e,r))}function qE(t,e){t.min=e.min,t.max=e.max}function yr(t,e){qE(t.x,e.x),qE(t.y,e.y)}function GE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function JE(t,e,n,r,s){return t-=e,t=vp(t,1/n,r),s!==void 0&&(t=vp(t,1/s,r)),t}function Y6(t,e=0,n=1,r=.5,s,o=t,i=t){if(vs.test(e)&&(e=parseFloat(e),e=bt(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=bt(o.min,o.max,r);t===o&&(a-=e),t.min=JE(t.min,e,n,a,s),t.max=JE(t.max,e,n,a,s)}function YE(t,e,[n,r,s],o,i){Y6(t,e[n],e[r],e[s],e.scale,o,i)}const Q6=["x","scaleX","originX"],X6=["y","scaleY","originY"];function QE(t,e,n,r){YE(t.x,e,Q6,n?n.x:void 0,r?r.x:void 0),YE(t.y,e,X6,n?n.y:void 0,r?r.y:void 0)}function XE(t){return t.translate===0&&t.scale===1}function BA(t){return XE(t.x)&&XE(t.y)}function ZE(t,e){return t.min===e.min&&t.max===e.max}function Z6(t,e){return ZE(t.x,e.x)&&ZE(t.y,e.y)}function ek(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function zA(t,e){return ek(t.x,e.x)&&ek(t.y,e.y)}function tk(t){return hr(t.x)/hr(t.y)}function nk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eH{constructor(){this.members=[]}add(e){vb(this.members,e),e.scheduleRender()}remove(e){if(wb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tH(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((s||o||i)&&(r=`translate3d(${s}px, ${o}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const ki={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},uu=typeof window<"u"&&window.MotionDebug!==void 0,dy=["","X","Y","Z"],nH={visibility:"hidden"},rk=1e3;let rH=0;function fy(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function VA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=JM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ct,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&VA(r)}function UA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},a=e==null?void 0:e()){this.id=rH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,uu&&(ki.totalNodes=ki.resolvedTargetDeltas=ki.recalculatedProjection=0),this.nodes.forEach(iH),this.nodes.forEach(dH),this.nodes.forEach(fH),this.nodes.forEach(aH),uu&&window.MotionDebug.record(ki)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new W6)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new xb),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const l=this.eventHandlers.get(i);l&&l.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=V6(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=H6(f,250),Ph.hasAnimatedSinceResize&&(Ph.hasAnimatedSinceResize=!1,this.nodes.forEach(ok))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||yH,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!zA(this.targetLayout,y)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const C={...pb(m,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||ok(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Js(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hH),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(sk);return}this.isUpdating||this.nodes.forEach(cH),this.isUpdating=!1,this.nodes.forEach(uH),this.nodes.forEach(sH),this.nodes.forEach(oH),this.clearAllSnapshots();const a=ws.now();rn.delta=Ys(0,1e3/60,a-rn.timestamp),rn.timestamp=a,rn.isProcessing=!0,ny.update.process(rn),ny.preRender.process(rn),ny.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(lH),this.sharedNodes.forEach(pH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!BA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;i&&(a||Ei(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return i&&(l=this.removeTransform(l)),vH(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:a}=this.options;if(!a)return Ot();const l=a.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(wH))){const{scroll:u}=this.root;u&&(pl(l.x,u.offset.x),pl(l.y,u.offset.y))}return l}removeElementScroll(i){var a;const l=Ot();if(yr(l,i),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&yr(l,i),pl(l.x,d.offset.x),pl(l.y,d.offset.y))}return l}applyTransform(i,a=!1){const l=Ot();yr(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ml(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ei(u.latestValues)&&ml(l,u.latestValues)}return Ei(this.latestValues)&&ml(l,this.latestValues),l}removeTransform(i){const a=Ot();yr(a,i);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ei(c.latestValues))continue;y0(c.latestValues)&&c.updateSnapshot();const u=Ot(),d=c.measurePageBox();yr(u,d),QE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ei(this.latestValues)&&QE(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=rn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ot(),this.relativeTargetOrigin=Ot(),ju(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ot(),this.targetWithTransforms=Ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),jA(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ot(),this.relativeTargetOrigin=Ot(),ju(this.relativeTargetOrigin,this.target,p.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}uu&&ki.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||y0(this.parent.latestValues)||OA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;yr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;M6(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ot());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GE(this.prevProjectionDelta.x,this.projectionDelta.x),GE(this.prevProjectionDelta.y,this.projectionDelta.y)),Ou(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!nk(this.projectionDelta.x,this.prevProjectionDelta.x)||!nk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),uu&&ki.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hl(),this.projectionDelta=hl(),this.projectionDeltaWithTransform=hl()}setAnimationOrigin(i,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=hl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ot(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,m=p!==y,w=this.getStack(),v=!w||w.members.length<=1,x=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(gH));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const E=C/1e3;ik(d.x,i.x,E),ik(d.y,i.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ju(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mH(this.relativeTarget,this.relativeTargetOrigin,f,E),b&&Z6(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ot()),yr(b,this.relativeTarget)),m&&(this.animationValues=u,q6(u,c,this.latestValues,E,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Js(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{Ph.hasAnimatedSinceResize=!0,this.currentAnimation=z6(0,rk,{...i,onUpdate:a=>{this.mixTargetDelta(a),i.onUpdate&&i.onUpdate(a)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=i;if(!(!a||!l||!c)){if(this!==i&&this.layout&&c&&WA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ot();const d=hr(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+d;const f=hr(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+f}yr(a,l),ml(a,u),Ou(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new eH),this.sharedNodes.get(i).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:a}=this.options;return a?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:a}=this.options;return a?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&fy("z",i,c,this.animationValues);for(let u=0;u<dy.length;u++)fy(`rotate${dy[u]}`,i,c,this.animationValues),fy(`skew${dy[u]}`,i,c,this.animationValues);i.render();for(const u in c)i.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);i.scheduleRender()}getProjectionStyles(i){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nH;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=kh(i==null?void 0:i.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=kh(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Ei(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=tH(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in hp){if(f[m]===void 0)continue;const{correct:w,applyTo:v}=hp[m],x=c.transform==="none"?f[m]:w(f[m],d);if(v){const b=v.length;for(let C=0;C<b;C++)c[v[C]]=x}else c[m]=x}return this.options.layoutId&&(c.pointerEvents=d===this?kh(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(sk),this.root.sharedNodes.clear()}}}function sH(t){t.updateLayout()}function oH(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,i=n.source!==t.layout.source;o==="size"?vr(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],p=hr(f);f.min=r[d].min,f.max=f.min+p}):WA(o,n.layoutBox,r)&&vr(d=>{const f=i?n.measuredBox[d]:n.layoutBox[d],p=hr(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=hl();Ou(a,r,n.layoutBox);const l=hl();i?Ou(l,t.applyTransform(s,!0),n.measuredBox):Ou(l,r,n.layoutBox);const c=!BA(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const y=Ot();ju(y,n.layoutBox,f.layoutBox);const m=Ot();ju(m,r,p.layoutBox),zA(y,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function iH(t){uu&&ki.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function aH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lH(t){t.clearSnapshot()}function sk(t){t.clearMeasurements()}function cH(t){t.isLayoutDirty=!1}function uH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ok(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function dH(t){t.resolveTargetDelta()}function fH(t){t.calcProjection()}function hH(t){t.resetSkewAndRotation()}function pH(t){t.removeLeadSnapshot()}function ik(t,e,n){t.translate=bt(e.translate,0,n),t.scale=bt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ak(t,e,n,r){t.min=bt(e.min,n.min,r),t.max=bt(e.max,n.max,r)}function mH(t,e,n,r){ak(t.x,e.x,n.x,r),ak(t.y,e.y,n.y,r)}function gH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yH={duration:.45,ease:[.4,0,.1,1]},lk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ck=lk("applewebkit/")&&!lk("chrome/")?Math.round:cr;function uk(t){t.min=ck(t.min),t.max=ck(t.max)}function vH(t){uk(t.x),uk(t.y)}function WA(t,e,n){return t==="position"||t==="preserve-aspect"&&!b6(tk(e),tk(n),.2)}function wH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const xH=UA({attachResizeListener:(t,e)=>hd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hy={current:void 0},HA=UA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hy.current){const t=new xH({});t.mount(window),t.setOptions({layoutScroll:!0}),hy.current=t}return hy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),bH={pan:{Feature:L6},drag:{Feature:I6,ProjectionNode:HA,MeasureLayout:LA}};function dk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&ct.postRender(()=>o(e,Zd(e)))}class SH extends fi{mount(){const{current:e}=this.node;e&&(this.unmount=C5(e,n=>(dk(this.node,n,"Start"),r=>dk(this.node,r,"End"))))}unmount(){}}class CH extends fi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xd(hd(this.node.current,"focus",()=>this.onFocus()),hd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fk(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&ct.postRender(()=>o(e,Zd(e)))}class EH extends fi{mount(){const{current:e}=this.node;e&&(this.unmount=P5(e,n=>(fk(this.node,n,"Start"),(r,{success:s})=>fk(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const w0=new WeakMap,py=new WeakMap,kH=t=>{const e=w0.get(t.target);e&&e(t)},TH=t=>{t.forEach(kH)};function PH({root:t,...e}){const n=t||document;py.has(n)||py.set(n,{});const r=py.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(TH,{root:t,...e})),r[s]}function _H(t,e,n){const r=PH(e);return w0.set(t,n),r.observe(t),()=>{w0.delete(t),r.unobserve(t)}}const NH={some:0,all:1};class RH extends fi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:NH[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return _H(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MH(e,n))&&this.startObserver()}unmount(){}}function MH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const AH={inView:{Feature:RH},tap:{Feature:EH},focus:{Feature:CH},hover:{Feature:SH}},OH={layout:{ProjectionNode:HA,MeasureLayout:LA}},x0={current:null},KA={current:!1};function jH(){if(KA.current=!0,!!Zx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>x0.current=t.matches;t.addListener(e),e()}else x0.current=!1}const DH=[...gA,gn,Zo],IH=t=>DH.find(mA(t)),hk=new WeakMap;function LH(t,e,n){for(const r in e){const s=e[r],o=n[r];if(xn(s))t.addValue(r,s);else if(xn(o))t.addValue(r,sc(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(r);t.addValue(r,sc(i!==void 0?i:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const pk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ws.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ct.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=i;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=Em(n),this.isVariantNode=EM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const y=f[p];l[p]!==void 0&&xn(y)&&y.set(l[p],!1)}}mount(e){this.current=e,hk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),KA.current||jH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:x0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hk.delete(this.current),this.projection&&this.projection.unmount(),Js(this.notifyUpdate),Js(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ta.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ct.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in rc){const n=rc[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ot()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<pk.length;r++){const s=pk[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,i=e[o];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=LH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=sc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(hA(s)||sA(s))?s=parseFloat(s):!IH(s)&&Zo.test(n)&&(s=uA(e,n)),this.setBaseTarget(e,xn(s)?s.get():s)),xn(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const i=ib(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(s=i[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!xn(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new xb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class qA extends FH{constructor(){super(...arguments),this.KeyframeResolver=yA}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function $H(t){return window.getComputedStyle(t)}class BH extends qA{constructor(){super(...arguments),this.type="html",this.renderInstance=OM}readValueFromInstance(e,n){if(Ta.has(n)){const r=kb(n);return r&&r.default||0}else{const r=$H(e),s=(RM(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return DA(e,n)}build(e,n,r){cb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return hb(e,n,r)}}class zH extends qA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ot}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ta.has(n)){const r=kb(n);return r&&r.default||0}return n=jM.has(n)?n:rb(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return LM(e,n,r)}build(e,n,r){ub(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){DM(e,n,r,s)}mount(e){this.isSVGTag=fb(e.tagName),super.mount(e)}}const VH=(t,e)=>ob(t)?new zH(e):new BH(e,{allowProjection:t!==g.Fragment}),UH=g5({...f6,...AH,...bH,...OH},VH),mk=M3(UH);function GA(t){const e=Yx(()=>sc(t)),{isStatic:n}=g.useContext(Xx);if(n){const[,r]=g.useState(t);g.useEffect(()=>e.on("change",r),[])}return e}function JA(t,e){const n=GA(e()),r=()=>n.set(e());return r(),xM(()=>{const s=()=>ct.preRender(r,!1,!0),o=t.map(i=>i.on("change",s));return()=>{o.forEach(i=>i()),Js(r)}}),n}const WH=t=>t&&typeof t=="object"&&t.mix,HH=t=>WH(t)?t.mix:void 0;function KH(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],s=t[1+n],o=t[2+n],i=t[3+n],a=EA(s,o,{mixer:HH(o[0]),...i});return e?a(r):a}function qH(t){Ru.current=[],t();const e=JA(Ru.current,t);return Ru.current=void 0,e}function gk(t,e,n,r){if(typeof t=="function")return qH(t);const s=typeof e=="function"?e:KH(e,n,r);return Array.isArray(t)?yk(t,s):yk([t],([o])=>s(o))}function yk(t,e){const n=Yx(()=>[]);return JA(t,()=>{n.length=0;const r=t.length;for(let s=0;s<r;s++)n[s]=t[s].get();return e(n)})}const GH=({id:t,name:e,description:n,image:r,video:s,categories:o,strain:i,stock:a,regular_price:l,shipping_price:c,viewMode:u,primary_media_type:d,media:f})=>{const p=di(),[y,m]=g.useState(!1),[w,v]=g.useState(!1),[x,b]=g.useState(!1),[C,E]=g.useState(!1),[k,P]=g.useState(!1),S=GA(0),T=gk(S,[0,200],[1,0]),_=gk(S,[0,200],[1,.95]),R=(o==null?void 0:o.filter(W=>W&&W.trim()!==""))||[],j=[];s&&j.push({type:"video",url:s}),r&&j.push({type:"image",url:r,webp:f==null?void 0:f.webp});const V=()=>{m(!1),v(!1)},B=()=>{S.get()>150&&V(),S.set(0),P(!1)},te=async(W,H)=>{try{const oe=await(await fetch(W)).blob(),re=window.URL.createObjectURL(oe),Q=document.createElement("a");Q.href=re,Q.download=`${e}-${H}.${H==="image"?"png":"mp4"}`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(re)}catch(G){console.error("Error downloading file:",G)}},K=W=>{console.error("Failed to load product image:",W),b(!0),W.currentTarget.src="/placeholder.svg"},I=W=>{console.log("WebP image failed to load, falling back to PNG:",W),E(!0)},N={small:"overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer",medium:"overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer",large:"overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer"},O={small:"w-full h-48 relative overflow-hidden bg-gray-100",medium:"w-full h-48 relative overflow-hidden bg-gray-100",large:"w-full h-48 relative overflow-hidden bg-gray-100"},$={small:"w-full h-full object-cover",medium:"w-full h-full object-cover",large:"w-full h-full object-cover"},U={small:"p-2",medium:"p-3",large:"p-4"},M=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(W),F=()=>h.jsxs("div",{className:"space-y-1",children:[l!==void 0&&l>0&&h.jsxs("div",{className:"text-[10px] sm:text-sm whitespace-nowrap",children:[h.jsx("span",{className:"mr-1",children:"📍"}),h.jsxs("span",{children:["In Town: ",M(l)]})]}),c!==void 0&&c>0&&h.jsxs("div",{className:"text-[10px] sm:text-sm whitespace-nowrap",children:[h.jsx("span",{className:"mr-1",children:"🚚"}),h.jsxs("span",{children:["Shipping: ",M(c)]})]})]}),J=()=>!r&&!(f!=null&&f.webp)?h.jsx("div",{className:`${O[u]} flex items-center justify-center`,children:h.jsxs("div",{className:"text-center p-4 w-full h-full flex flex-col items-center justify-center bg-gray-100",children:[h.jsx(wm,{className:"h-8 w-8 mb-2 text-gray-400"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Image coming soon"})]})}):h.jsx("div",{className:O[u],children:h.jsxs("picture",{children:[(f==null?void 0:f.webp)&&!C&&h.jsx("source",{srcSet:f.webp,type:"image/webp",onError:I}),h.jsx("img",{src:r,alt:e,className:$[u],loading:"lazy",onError:K})]})}),Y=()=>h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsx("div",{className:"flex-none",children:h.jsxs(pM,{className:"w-full",children:[h.jsx(mM,{children:j.map((W,H)=>h.jsx(gM,{className:"flex justify-center items-center",children:W.type==="video"?h.jsx("div",{className:"w-full flex justify-center mt-14",children:h.jsx("video",{src:W.url,controls:!0,playsInline:!0,autoPlay:w,className:"max-h-[50vh] w-auto"})}):h.jsxs("picture",{className:"flex justify-center mt-14",children:[W.webp&&!C&&h.jsx("source",{srcSet:W.webp,type:"image/webp",onError:I}),h.jsx("img",{src:W.url,alt:e,className:"max-h-[50vh] w-auto",onError:K})]})},H))}),j.length>1&&h.jsxs(h.Fragment,{children:[h.jsx(yM,{className:"left-2"}),h.jsx(vM,{className:"right-2"})]})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:[R.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:R.map(W=>h.jsx("div",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md text-xs",children:W.trim()},W))}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:e}),n&&h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:n}),i&&h.jsx("div",{className:"flex gap-2 text-sm text-gray-600 mb-4",children:h.jsxs("span",{children:["Strain: ",i]})}),h.jsxs("div",{className:"space-y-4",children:[(l!==void 0||c!==void 0)&&h.jsx("div",{className:"space-y-2",children:F()}),a!=null&&a>0&&h.jsxs("div",{className:"text-sm text-gray-600",children:[a," in stock"]}),h.jsxs("div",{className:"flex gap-2",children:[s&&h.jsxs(xe,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-8",onClick:()=>te(s,"video"),children:[h.jsx(tc,{className:"h-3 w-3 mr-1"}),"Download Video"]}),r&&h.jsxs(xe,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-8",onClick:()=>te(r,"image"),children:[h.jsx(tc,{className:"h-3 w-3 mr-1"}),"Download Image"]})]})]})]})]});return h.jsxs(h.Fragment,{children:[h.jsxs(Ca,{className:N[u],onClick:()=>m(!0),children:[h.jsx(Ea,{className:"p-0 relative",children:J()}),h.jsxs(ka,{className:U[u],children:[R.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:R.map(W=>h.jsx("div",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md text-xs",children:W.trim()},W))}),h.jsx("h3",{className:"text-sm font-semibold mb-1 truncate",children:e}),n&&h.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:n}),i&&h.jsx("div",{className:"flex gap-2 text-xs text-gray-600 mt-2",children:h.jsxs("span",{children:["Strain: ",i]})}),h.jsxs("div",{className:"mt-2",children:[F(),a!=null&&a>0&&h.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[a," in stock"]})]})]})]}),h.jsx(iM,{open:y,onOpenChange:m,children:h.jsxs(Wx,{side:p?"bottom":"right",className:p?"h-[85vh] p-0 rounded-t-[1rem] overflow-hidden":"w-[90vw] max-w-4xl p-0",children:[p&&h.jsxs(mk.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.6,onDrag:(W,H)=>{H.offset.y>0&&(S.set(H.offset.y),P(!0))},onDragEnd:B,style:{opacity:T,scale:_},className:"w-full flex flex-col",children:[h.jsx("div",{className:"w-full flex justify-center pt-2 pb-1 touch-none cursor-grab active:cursor-grabbing",children:h.jsx("div",{className:"w-12 h-1.5 rounded-full bg-gray-300"})}),h.jsx("div",{className:"absolute left-0 right-0 h-12 -top-8"})]}),h.jsx(xe,{variant:"ghost",size:"icon",onClick:V,className:"absolute right-4 top-4 h-10 w-10 rounded-full z-50",children:h.jsx(ui,{className:"h-6 w-6"})}),h.jsx(mk.div,{style:{opacity:T,scale:_},children:Y()})]})})]})};var ef=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ua=typeof window>"u"||"Deno"in globalThis;function xr(){}function JH(t,e){return typeof t=="function"?t(e):t}function b0(t){return typeof t=="number"&&t>=0&&t!==1/0}function YA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Tl(t,e){return typeof t=="function"?t(e):t}function Wr(t,e){return typeof t=="function"?t(e):t}function vk(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:a}=t;if(i){if(r){if(e.queryHash!==Rb(i,e.options))return!1}else if(!md(e.queryKey,i))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function wk(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(pd(e.options.mutationKey)!==pd(o))return!1}else if(!md(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Rb(t,e){return((e==null?void 0:e.queryKeyHashFn)||pd)(t)}function pd(t){return JSON.stringify(t,(e,n)=>C0(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function md(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!md(t[n],e[n])):!1}function QA(t,e){if(t===e)return t;const n=xk(t)&&xk(e);if(n||C0(t)&&C0(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),i=o.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const u=n?c:o[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=QA(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return s===i&&l===s?t:a}return e}function S0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function xk(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function C0(t){if(!bk(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!bk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bk(t){return Object.prototype.toString.call(t)==="[object Object]"}function YH(t){return new Promise(e=>{setTimeout(e,t)})}function E0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?QA(t,e):e}function QH(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function XH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Mb=Symbol();function XA(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Mb?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var zi,Co,jl,NP,ZH=(NP=class extends ef{constructor(){super();Me(this,zi);Me(this,Co);Me(this,jl);he(this,jl,e=>{if(!ua&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,Co)||this.setEventListener(D(this,jl))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Co))==null||e.call(this),he(this,Co,void 0))}setEventListener(e){var n;he(this,jl,e),(n=D(this,Co))==null||n.call(this),he(this,Co,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){D(this,zi)!==e&&(he(this,zi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof D(this,zi)=="boolean"?D(this,zi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},zi=new WeakMap,Co=new WeakMap,jl=new WeakMap,NP),Ab=new ZH,Dl,Eo,Il,RP,e8=(RP=class extends ef{constructor(){super();Me(this,Dl,!0);Me(this,Eo);Me(this,Il);he(this,Il,e=>{if(!ua&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){D(this,Eo)||this.setEventListener(D(this,Il))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,Eo))==null||e.call(this),he(this,Eo,void 0))}setEventListener(e){var n;he(this,Il,e),(n=D(this,Eo))==null||n.call(this),he(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){D(this,Dl)!==e&&(he(this,Dl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return D(this,Dl)}},Dl=new WeakMap,Eo=new WeakMap,Il=new WeakMap,RP),wp=new e8;function k0(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function t8(t){return Math.min(1e3*2**t,3e4)}function ZA(t){return(t??"online")==="online"?wp.isOnline():!0}var eO=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function my(t){return t instanceof eO}function tO(t){let e=!1,n=0,r=!1,s;const o=k0(),i=m=>{var w;r||(f(new eO(m)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>Ab.isFocused()&&(t.networkMode==="always"||wp.isOnline())&&t.canRun(),u=()=>ZA(t.networkMode)&&t.canRun(),d=m=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,m),s==null||s(),o.resolve(m))},f=m=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,m),s==null||s(),o.reject(m))},p=()=>new Promise(m=>{var w;s=v=>{(r||c())&&m(v)},(w=t.onPause)==null||w.call(t)}).then(()=>{var m;s=void 0,r||(m=t.onContinue)==null||m.call(t)}),y=()=>{if(r)return;let m;const w=n===0?t.initialPromise:void 0;try{m=w??t.fn()}catch(v){m=Promise.reject(v)}Promise.resolve(m).then(d).catch(v=>{var k;if(r)return;const x=t.retry??(ua?0:3),b=t.retryDelay??t8,C=typeof b=="function"?b(n,v):b,E=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(e||!E){f(v);return}n++,(k=t.onFail)==null||k.call(t,n,v),YH(C).then(()=>c()?void 0:p()).then(()=>{e?f(v):y()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?y():p().then(y),o)}}function n8(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const o=a=>{e?t.push(a):s(()=>{n(a)})},i=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||i()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var sn=n8(),Vi,MP,nO=(MP=class{constructor(){Me(this,Vi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),b0(this.gcTime)&&he(this,Vi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ua?1/0:5*60*1e3))}clearGcTimeout(){D(this,Vi)&&(clearTimeout(D(this,Vi)),he(this,Vi,void 0))}},Vi=new WeakMap,MP),Ll,Fl,wr,mn,Od,Ui,$r,As,AP,r8=(AP=class extends nO{constructor(e){super();Me(this,$r);Me(this,Ll);Me(this,Fl);Me(this,wr);Me(this,mn);Me(this,Od);Me(this,Ui);he(this,Ui,!1),he(this,Od,e.defaultOptions),this.setOptions(e.options),this.observers=[],he(this,wr,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,he(this,Ll,s8(this.options)),this.state=e.state??D(this,Ll),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,mn))==null?void 0:e.promise}setOptions(e){this.options={...D(this,Od),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,wr).remove(this)}setData(e,n){const r=E0(this.state.data,e,this.options);return Ue(this,$r,As).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ue(this,$r,As).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=D(this,mn))==null?void 0:r.promise;return(s=D(this,mn))==null||s.cancel(e),n?n.then(xr).catch(xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Ll))}isActive(){return this.observers.some(e=>Wr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!YA(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=D(this,mn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=D(this,mn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,wr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(D(this,mn)&&(D(this,Ui)?D(this,mn).cancel({revert:!0}):D(this,mn).cancelRetry()),this.scheduleGc()),D(this,wr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,$r,As).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,mn))return D(this,mn).continueRetry(),D(this,mn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(he(this,Ui,!0),r.signal)})},o=()=>{const d=XA(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return s(f),he(this,Ui,!1),this.options.persister?this.options.persister(d,f,this):d(f)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(i),(l=this.options.behavior)==null||l.onFetch(i,this),he(this,Fl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&Ue(this,$r,As).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,p,y,m;my(d)&&d.silent||Ue(this,$r,As).call(this,{type:"error",error:d}),my(d)||((p=(f=D(this,wr).config).onError)==null||p.call(f,d,this),(m=(y=D(this,wr).config).onSettled)==null||m.call(y,this.state.data,d,this)),this.scheduleGc()};return he(this,mn,tO({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,p,y,m;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(w){a(w);return}(p=(f=D(this,wr).config).onSuccess)==null||p.call(f,d,this),(m=(y=D(this,wr).config).onSettled)==null||m.call(y,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{Ue(this,$r,As).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Ue(this,$r,As).call(this,{type:"pause"})},onContinue:()=>{Ue(this,$r,As).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),D(this,mn).start()}},Ll=new WeakMap,Fl=new WeakMap,wr=new WeakMap,mn=new WeakMap,Od=new WeakMap,Ui=new WeakMap,$r=new WeakSet,As=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...rO(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return my(s)&&s.revert&&D(this,Fl)?{...D(this,Fl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),sn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),D(this,wr).notify({query:this,type:"updated",action:e})})},AP);function rO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ZA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function s8(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var us,OP,o8=(OP=class extends ef{constructor(e={}){super();Me(this,us);this.config=e,he(this,us,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??Rb(s,n);let i=this.get(o);return i||(i=new r8({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){D(this,us).has(e.queryHash)||(D(this,us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=D(this,us).get(e.queryHash);n&&(e.destroy(),n===e&&D(this,us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,us).get(e)}getAll(){return[...D(this,us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>vk(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>vk(e,r)):n}notify(e){sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},us=new WeakMap,OP),ds,kn,Wi,fs,lo,jP,i8=(jP=class extends nO{constructor(e){super();Me(this,fs);Me(this,ds);Me(this,kn);Me(this,Wi);this.mutationId=e.mutationId,he(this,kn,e.mutationCache),he(this,ds,[]),this.state=e.state||a8(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,ds).includes(e)||(D(this,ds).push(e),this.clearGcTimeout(),D(this,kn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){he(this,ds,D(this,ds).filter(n=>n!==e)),this.scheduleGc(),D(this,kn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,ds).length||(this.state.status==="pending"?this.scheduleGc():D(this,kn).remove(this))}continue(){var e;return((e=D(this,Wi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,i,a,l,c,u,d,f,p,y,m,w,v,x,b,C,E,k,P;he(this,Wi,tO({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,T)=>{Ue(this,fs,lo).call(this,{type:"failed",failureCount:S,error:T})},onPause:()=>{Ue(this,fs,lo).call(this,{type:"pause"})},onContinue:()=>{Ue(this,fs,lo).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,kn).canRun(this)}));const n=this.state.status==="pending",r=!D(this,Wi).canStart();try{if(!n){Ue(this,fs,lo).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(s=D(this,kn).config).onMutate)==null?void 0:o.call(s,e,this));const T=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));T!==this.state.context&&Ue(this,fs,lo).call(this,{type:"pending",context:T,variables:e,isPaused:r})}const S=await D(this,Wi).start();return await((c=(l=D(this,kn).config).onSuccess)==null?void 0:c.call(l,S,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,S,e,this.state.context)),await((p=(f=D(this,kn).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((m=(y=this.options).onSettled)==null?void 0:m.call(y,S,null,e,this.state.context)),Ue(this,fs,lo).call(this,{type:"success",data:S}),S}catch(S){try{throw await((v=(w=D(this,kn).config).onError)==null?void 0:v.call(w,S,e,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,S,e,this.state.context)),await((E=(C=D(this,kn).config).onSettled)==null?void 0:E.call(C,void 0,S,this.state.variables,this.state.context,this)),await((P=(k=this.options).onSettled)==null?void 0:P.call(k,void 0,S,e,this.state.context)),S}finally{Ue(this,fs,lo).call(this,{type:"error",error:S})}}finally{D(this,kn).runNext(this)}}},ds=new WeakMap,kn=new WeakMap,Wi=new WeakMap,fs=new WeakSet,lo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),sn.batch(()=>{D(this,ds).forEach(r=>{r.onMutationUpdate(e)}),D(this,kn).notify({mutation:this,type:"updated",action:e})})},jP);function a8(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var tr,jd,DP,l8=(DP=class extends ef{constructor(e={}){super();Me(this,tr);Me(this,jd);this.config=e,he(this,tr,new Map),he(this,jd,Date.now())}build(e,n,r){const s=new i8({mutationCache:this,mutationId:++xf(this,jd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=qf(e),r=D(this,tr).get(n)??[];r.push(e),D(this,tr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=qf(e);if(D(this,tr).has(n)){const s=(r=D(this,tr).get(n))==null?void 0:r.filter(o=>o!==e);s&&(s.length===0?D(this,tr).delete(n):D(this,tr).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=D(this,tr).get(qf(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=D(this,tr).get(qf(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...D(this,tr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>wk(n,r))}findAll(e={}){return this.getAll().filter(n=>wk(e,n))}notify(e){sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return sn.batch(()=>Promise.all(e.map(n=>n.continue().catch(xr))))}},tr=new WeakMap,jd=new WeakMap,DP);function qf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Sk(t){return{onFetch:(e,n)=>{var u,d,f,p,y;const r=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],i=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},v=XA(e.options,e.fetchOptions),x=async(b,C,E)=>{if(m)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:e.queryKey,pageParam:C,direction:E?"backward":"forward",meta:e.options.meta};w(k);const P=await v(k),{maxPages:S}=e.options,T=E?XH:QH;return{pages:T(b.pages,P,S),pageParams:T(b.pageParams,C,S)}};if(s&&o.length){const b=s==="backward",C=b?c8:Ck,E={pages:o,pageParams:i},k=C(r,E);a=await x(E,k,b)}else{const b=t??o.length;do{const C=l===0?i[0]??r.initialPageParam:Ck(r,a);if(l>0&&C==null)break;a=await x(a,C),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var m,w;return(w=(m=e.options).persister)==null?void 0:w.call(m,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Ck(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function c8(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tt,ko,To,$l,Bl,Po,zl,Vl,IP,u8=(IP=class{constructor(t={}){Me(this,Tt);Me(this,ko);Me(this,To);Me(this,$l);Me(this,Bl);Me(this,Po);Me(this,zl);Me(this,Vl);he(this,Tt,t.queryCache||new o8),he(this,ko,t.mutationCache||new l8),he(this,To,t.defaultOptions||{}),he(this,$l,new Map),he(this,Bl,new Map),he(this,Po,0)}mount(){xf(this,Po)._++,D(this,Po)===1&&(he(this,zl,Ab.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Tt).onFocus())})),he(this,Vl,wp.subscribe(async t=>{t&&(await this.resumePausedMutations(),D(this,Tt).onOnline())})))}unmount(){var t,e;xf(this,Po)._--,D(this,Po)===0&&((t=D(this,zl))==null||t.call(this),he(this,zl,void 0),(e=D(this,Vl))==null||e.call(this),he(this,Vl,void 0))}isFetching(t){return D(this,Tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return D(this,ko).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Tt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=D(this,Tt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Tl(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return D(this,Tt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=D(this,Tt).get(r.queryHash),o=s==null?void 0:s.state.data,i=JH(e,o);if(i!==void 0)return D(this,Tt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return sn.batch(()=>D(this,Tt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=D(this,Tt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=D(this,Tt);sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=D(this,Tt),r={type:"active",...t};return sn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=sn.batch(()=>D(this,Tt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(xr).catch(xr)}invalidateQueries(t={},e={}){return sn.batch(()=>{if(D(this,Tt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=sn.batch(()=>D(this,Tt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(xr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(xr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=D(this,Tt).build(this,e);return n.isStaleByTime(Tl(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(xr).catch(xr)}fetchInfiniteQuery(t){return t.behavior=Sk(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(xr).catch(xr)}ensureInfiniteQueryData(t){return t.behavior=Sk(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wp.isOnline()?D(this,ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,Tt)}getMutationCache(){return D(this,ko)}getDefaultOptions(){return D(this,To)}setDefaultOptions(t){he(this,To,t)}setQueryDefaults(t,e){D(this,$l).set(pd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...D(this,$l).values()];let n={};return e.forEach(r=>{md(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){D(this,Bl).set(pd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...D(this,Bl).values()];let n={};return e.forEach(r=>{md(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...D(this,To).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Rb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Mb&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...D(this,To).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){D(this,Tt).clear(),D(this,ko).clear()}},Tt=new WeakMap,ko=new WeakMap,To=new WeakMap,$l=new WeakMap,Bl=new WeakMap,Po=new WeakMap,zl=new WeakMap,Vl=new WeakMap,IP),$n,We,Dd,Tn,Hi,Ul,_o,hs,Id,Wl,Hl,Ki,qi,No,Kl,tt,du,T0,P0,_0,N0,R0,M0,A0,sO,LP,d8=(LP=class extends ef{constructor(e,n){super();Me(this,tt);Me(this,$n);Me(this,We);Me(this,Dd);Me(this,Tn);Me(this,Hi);Me(this,Ul);Me(this,_o);Me(this,hs);Me(this,Id);Me(this,Wl);Me(this,Hl);Me(this,Ki);Me(this,qi);Me(this,No);Me(this,Kl,new Set);this.options=n,he(this,$n,e),he(this,hs,null),he(this,_o,k0()),this.options.experimental_prefetchInRender||D(this,_o).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,We).addObserver(this),Ek(D(this,We),this.options)?Ue(this,tt,du).call(this):this.updateResult(),Ue(this,tt,N0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return O0(D(this,We),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return O0(D(this,We),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,tt,R0).call(this),Ue(this,tt,M0).call(this),D(this,We).removeObserver(this)}setOptions(e,n){const r=this.options,s=D(this,We);if(this.options=D(this,$n).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wr(this.options.enabled,D(this,We))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,tt,A0).call(this),D(this,We).setOptions(this.options),r._defaulted&&!S0(this.options,r)&&D(this,$n).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,We),observer:this});const o=this.hasListeners();o&&kk(D(this,We),s,this.options,r)&&Ue(this,tt,du).call(this),this.updateResult(n),o&&(D(this,We)!==s||Wr(this.options.enabled,D(this,We))!==Wr(r.enabled,D(this,We))||Tl(this.options.staleTime,D(this,We))!==Tl(r.staleTime,D(this,We)))&&Ue(this,tt,T0).call(this);const i=Ue(this,tt,P0).call(this);o&&(D(this,We)!==s||Wr(this.options.enabled,D(this,We))!==Wr(r.enabled,D(this,We))||i!==D(this,No))&&Ue(this,tt,_0).call(this,i)}getOptimisticResult(e){const n=D(this,$n).getQueryCache().build(D(this,$n),e),r=this.createResult(n,e);return h8(this,r)&&(he(this,Tn,r),he(this,Ul,this.options),he(this,Hi,D(this,We).state)),r}getCurrentResult(){return D(this,Tn)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){D(this,Kl).add(e)}getCurrentQuery(){return D(this,We)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=D(this,$n).defaultQueryOptions(e),r=D(this,$n).getQueryCache().build(D(this,$n),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ue(this,tt,du).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Tn)))}createResult(e,n){var S;const r=D(this,We),s=this.options,o=D(this,Tn),i=D(this,Hi),a=D(this,Ul),c=e!==r?e.state:D(this,Dd),{state:u}=e;let d={...u},f=!1,p;if(n._optimisticResults){const T=this.hasListeners(),_=!T&&Ek(e,n),R=T&&kk(e,r,n,s);(_||R)&&(d={...d,...rO(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:w}=d;if(n.select&&d.data!==void 0)if(o&&d.data===(i==null?void 0:i.data)&&n.select===D(this,Id))p=D(this,Wl);else try{he(this,Id,n.select),p=n.select(d.data),p=E0(o==null?void 0:o.data,p,n),he(this,Wl,p),he(this,hs,null)}catch(T){he(this,hs,T)}else p=d.data;if(n.placeholderData!==void 0&&p===void 0&&w==="pending"){let T;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))T=o.data;else if(T=typeof n.placeholderData=="function"?n.placeholderData((S=D(this,Hl))==null?void 0:S.state.data,D(this,Hl)):n.placeholderData,n.select&&T!==void 0)try{T=n.select(T),he(this,hs,null)}catch(_){he(this,hs,_)}T!==void 0&&(w="success",p=E0(o==null?void 0:o.data,T,n),f=!0)}D(this,hs)&&(y=D(this,hs),p=D(this,Wl),m=Date.now(),w="error");const v=d.fetchStatus==="fetching",x=w==="pending",b=w==="error",C=x&&v,E=p!==void 0,P={status:w,fetchStatus:d.fetchStatus,isPending:x,isSuccess:w==="success",isError:b,isInitialLoading:C,isLoading:C,data:p,dataUpdatedAt:d.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:b&&!E,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&E,isStale:Ob(e,n),refetch:this.refetch,promise:D(this,_o)};if(this.options.experimental_prefetchInRender){const T=j=>{P.status==="error"?j.reject(P.error):P.data!==void 0&&j.resolve(P.data)},_=()=>{const j=he(this,_o,P.promise=k0());T(j)},R=D(this,_o);switch(R.status){case"pending":e.queryHash===r.queryHash&&T(R);break;case"fulfilled":(P.status==="error"||P.data!==R.value)&&_();break;case"rejected":(P.status!=="error"||P.error!==R.reason)&&_();break}}return P}updateResult(e){const n=D(this,Tn),r=this.createResult(D(this,We),this.options);if(he(this,Hi,D(this,We).state),he(this,Ul,this.options),D(this,Hi).data!==void 0&&he(this,Hl,D(this,We)),S0(r,n))return;he(this,Tn,r);const s={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!D(this,Kl).size)return!0;const l=new Set(a??D(this,Kl));return this.options.throwOnError&&l.add("error"),Object.keys(D(this,Tn)).some(c=>{const u=c;return D(this,Tn)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),Ue(this,tt,sO).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,tt,N0).call(this)}},$n=new WeakMap,We=new WeakMap,Dd=new WeakMap,Tn=new WeakMap,Hi=new WeakMap,Ul=new WeakMap,_o=new WeakMap,hs=new WeakMap,Id=new WeakMap,Wl=new WeakMap,Hl=new WeakMap,Ki=new WeakMap,qi=new WeakMap,No=new WeakMap,Kl=new WeakMap,tt=new WeakSet,du=function(e){Ue(this,tt,A0).call(this);let n=D(this,We).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(xr)),n},T0=function(){Ue(this,tt,R0).call(this);const e=Tl(this.options.staleTime,D(this,We));if(ua||D(this,Tn).isStale||!b0(e))return;const r=YA(D(this,Tn).dataUpdatedAt,e)+1;he(this,Ki,setTimeout(()=>{D(this,Tn).isStale||this.updateResult()},r))},P0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,We)):this.options.refetchInterval)??!1},_0=function(e){Ue(this,tt,M0).call(this),he(this,No,e),!(ua||Wr(this.options.enabled,D(this,We))===!1||!b0(D(this,No))||D(this,No)===0)&&he(this,qi,setInterval(()=>{(this.options.refetchIntervalInBackground||Ab.isFocused())&&Ue(this,tt,du).call(this)},D(this,No)))},N0=function(){Ue(this,tt,T0).call(this),Ue(this,tt,_0).call(this,Ue(this,tt,P0).call(this))},R0=function(){D(this,Ki)&&(clearTimeout(D(this,Ki)),he(this,Ki,void 0))},M0=function(){D(this,qi)&&(clearInterval(D(this,qi)),he(this,qi,void 0))},A0=function(){const e=D(this,$n).getQueryCache().build(D(this,$n),this.options);if(e===D(this,We))return;const n=D(this,We);he(this,We,e),he(this,Dd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},sO=function(e){sn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(D(this,Tn))}),D(this,$n).getQueryCache().notify({query:D(this,We),type:"observerResultsUpdated"})})},LP);function f8(t,e){return Wr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ek(t,e){return f8(t,e)||t.state.data!==void 0&&O0(t,e,e.refetchOnMount)}function O0(t,e,n){if(Wr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ob(t,e)}return!1}function kk(t,e,n,r){return(t!==e||Wr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Ob(t,n)}function Ob(t,e){return Wr(e.enabled,t)!==!1&&t.isStaleByTime(Tl(e.staleTime,t))}function h8(t,e){return!S0(t.getCurrentResult(),e)}var oO=g.createContext(void 0),Pm=t=>{const e=g.useContext(oO);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},p8=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(oO.Provider,{value:t,children:e})),iO=g.createContext(!1),m8=()=>g.useContext(iO);iO.Provider;function g8(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var y8=g.createContext(g8()),v8=()=>g.useContext(y8);function w8(t,e){return typeof t=="function"?t(...e):!!t}function x8(){}var b8=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},S8=t=>{g.useEffect(()=>{t.clearReset()},[t])},C8=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&w8(n,[t.error,r]),E8=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},k8=(t,e)=>t.isLoading&&t.isFetching&&!e,T8=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Tk=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function P8(t,e,n){var u,d,f,p,y;const r=Pm(),s=m8(),o=v8(),i=r.defaultQueryOptions(t);(d=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||d.call(u,i),i._optimisticResults=s?"isRestoring":"optimistic",E8(i),b8(i,o),S8(o);const a=!r.getQueryCache().get(i.queryHash),[l]=g.useState(()=>new e(r,i)),c=l.getOptimisticResult(i);if(g.useSyncExternalStore(g.useCallback(m=>{const w=s?()=>{}:l.subscribe(sn.batchCalls(m));return l.updateResult(),w},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),g.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),T8(i,c))throw Tk(i,l,o);if(C8({result:c,errorResetBoundary:o,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;if((p=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,i,c),i.experimental_prefetchInRender&&!ua&&k8(c,s)){const m=a?Tk(i,l,o):(y=r.getQueryCache().get(i.queryHash))==null?void 0:y.promise;m==null||m.catch(x8).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?c:l.trackResult(c)}function Tc(t,e){return P8(t,d8)}const _8="modulepreload",N8=function(t){return"/"+t},Pk={},ic=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=N8(l),l in Pk)return;Pk[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":_8,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},R8=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ic(async()=>{const{default:r}=await Promise.resolve().then(()=>Pc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class jb extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class M8 extends jb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class A8 extends jb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class O8 extends jb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var j0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(j0||(j0={}));var j8=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class D8{constructor(e,{headers:n={},customFetch:r,region:s=j0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=R8(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return j8(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(a["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(a["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(y=>{throw new M8(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new A8(u);if(!u.ok)throw new O8(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Vn={},Db={},_m={},tf={},Nm={},Rm={},I8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ac=I8();const L8=ac.fetch,aO=ac.fetch.bind(ac),lO=ac.Headers,F8=ac.Request,$8=ac.Response,Pc=Object.freeze(Object.defineProperty({__proto__:null,Headers:lO,Request:F8,Response:$8,default:aO,fetch:L8},Symbol.toStringTag,{value:"Module"})),B8=NF(Pc);var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});let z8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mm.default=z8;var cO=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Rm,"__esModule",{value:!0});const V8=cO(B8),U8=cO(Mm);let W8=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=V8.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,l;let c=null,u=null,d=null,f=o.status,p=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const m=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),w=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const m=await o.text();try{c=JSON.parse(m),Array.isArray(c)&&o.status===404&&(u=[],c=null,f=200,p="OK")}catch{o.status===404&&m===""?(f=204,p="No Content"):c={message:m}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new U8.default(c)}return{error:c,data:u,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,l;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o==null?void 0:o.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}};Rm.default=W8;var H8=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nm,"__esModule",{value:!0});const K8=H8(Rm);let q8=class extends K8.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Nm.default=q8;var G8=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tf,"__esModule",{value:!0});const J8=G8(Nm);let Y8=class extends J8.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};tf.default=Y8;var Q8=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_m,"__esModule",{value:!0});const Xc=Q8(tf);let X8=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new Xc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const i=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(i.length>0){const a=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){const i="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Xc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Xc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_m.default=X8;var Am={},Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.version=void 0;Om.version="0.0.0-automated";Object.defineProperty(Am,"__esModule",{value:!0});Am.DEFAULT_HEADERS=void 0;const Z8=Om;Am.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Z8.version}`};var uO=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Db,"__esModule",{value:!0});const eK=uO(_m),tK=uO(tf),nK=Am;let rK=class dO{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},nK.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new eK.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new dO(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){let i;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(i=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(i="POST",l=n);const c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new tK.default({method:i,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Db.default=rK;var _c=dr&&dr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.PostgrestError=Vn.PostgrestBuilder=Vn.PostgrestTransformBuilder=Vn.PostgrestFilterBuilder=Vn.PostgrestQueryBuilder=Vn.PostgrestClient=void 0;const fO=_c(Db);Vn.PostgrestClient=fO.default;const hO=_c(_m);Vn.PostgrestQueryBuilder=hO.default;const pO=_c(tf);Vn.PostgrestFilterBuilder=pO.default;const mO=_c(Nm);Vn.PostgrestTransformBuilder=mO.default;const gO=_c(Rm);Vn.PostgrestBuilder=gO.default;const yO=_c(Mm);Vn.PostgrestError=yO.default;var sK=Vn.default={PostgrestClient:fO.default,PostgrestQueryBuilder:hO.default,PostgrestFilterBuilder:pO.default,PostgrestTransformBuilder:mO.default,PostgrestBuilder:gO.default,PostgrestError:yO.default};const{PostgrestClient:oK,PostgrestQueryBuilder:Hoe,PostgrestFilterBuilder:Koe,PostgrestTransformBuilder:qoe,PostgrestBuilder:Goe,PostgrestError:Joe}=sK,iK="2.11.2",aK={"X-Client-Info":`realtime-js/${iK}`},lK="1.0.0",vO=1e4,cK=1e3;var Pl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pl||(Pl={}));var er;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(er||(er={}));var Vr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vr||(Vr={}));var D0;(function(t){t.websocket="websocket"})(D0||(D0={}));var Ni;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ni||(Ni={}));class uK{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+s));i=i+s;const l=r.decode(e.slice(i,i+o));i=i+o;const c=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class wO{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var at;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(at||(at={}));const _k=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=dK(i,t,e,s),o),{})},dK=(t,e,n,r)=>{const s=e.find(a=>a.name===t),o=s==null?void 0:s.type,i=n[t];return o&&!r.includes(o)?xO(o,i):I0(i)},xO=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return mK(e,n)}switch(t){case at.bool:return fK(e);case at.float4:case at.float8:case at.int2:case at.int4:case at.int8:case at.numeric:case at.oid:return hK(e);case at.json:case at.jsonb:return pK(e);case at.timestamp:return gK(e);case at.abstime:case at.date:case at.daterange:case at.int4range:case at.int8range:case at.money:case at.reltime:case at.text:case at.time:case at.timestamptz:case at.timetz:case at.tsrange:case at.tstzrange:return I0(e);default:return I0(e)}},I0=t=>t,fK=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},hK=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pK=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},mK=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>xO(e,a))}return t},gK=t=>typeof t=="string"?t.replace(" ","T"):t,bO=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class gy{constructor(e,n,r={},s=vO){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Nk;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Nk||(Nk={}));class Du{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Du.syncState(this.state,s,o,i),this.pendingDiffs.forEach(l=>{this.state=Du.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Du.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),i=this.transformState(n),a={},l={};return this.map(o,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const d=o[c];if(d){const f=u.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),y=u.filter(w=>p.indexOf(w.presence_ref)<0),m=d.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[c]=y),m.length>0&&(l[c]=m)}else a[c]=u}),this.syncDiff(o,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(i,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rk;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Rk||(Rk={}));var Mk;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Mk||(Mk={}));var js;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(js||(js={}));class Ib{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gy(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new wO(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=er.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=er.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Du(this),this.broadcastEndpointURL=bO(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(u=>e==null?void 0:e(js.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(js.CLOSED));const l={},c={broadcast:o,presence:i,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(js.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,y=[];for(let m=0;m<p;m++){const w=f[m],{filter:{event:v,schema:x,table:b,filter:C}}=w,E=u&&u[m];if(E&&E.event===v&&E.schema===x&&E.table===b&&E.filter===C)y.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),e==null||e(js.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(js.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(js.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(js.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=er.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new gy(this,Vr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gy(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vr;if(r&&[a,l,c,u].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var y,m,w;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(m=p.filter)===null||m===void 0?void 0:m.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(p=>p.callback(f,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var y,m,w,v,x,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const C=p.id,E=(y=p.filter)===null||y===void 0?void 0:y.event;return C&&((m=n.ids)===null||m===void 0?void 0:m.includes(C))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:m,table:w,commit_timestamp:v,type:x,errors:b}=y;f=Object.assign(Object.assign({},{schema:m,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}p.callback(f,r)})}_isClosed(){return this.state===er.closed}_isJoined(){return this.state===er.joined}_isJoining(){return this.state===er.joining}_isLeaving(){return this.state===er.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ib.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vr.close,{},e)}_onError(e){this._on(Vr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=er.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=_k(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=_k(e.columns,e.old_record)),n}}const yK=()=>{},vK=typeof WebSocket<"u",wK=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class xK{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=aK,this.params={},this.timeout=vO,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=yK,this.conn=null,this.sendBuffer=[],this.serializer=new uK,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>ic(async()=>{const{default:l}=await Promise.resolve().then(()=>Pc);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${e}/${D0.websocket}`,this.httpEndpoint=bO(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new wO(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(vK){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new bK(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ic(async()=>{const{default:e}=await import("./browser-sFebtj03.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lK}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pl.connecting:return Ni.Connecting;case Pl.open:return Ni.Open;case Pl.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}channel(e,n={config:{}}){const r=new Ib(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Vr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(cK,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:o,ref:i}=n;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([wK],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class bK{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pl.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Lb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class SK extends Lb{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class L0 extends Lb{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var CK=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const SO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ic(async()=>{const{default:r}=await Promise.resolve().then(()=>Pc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},EK=()=>CK(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ic(()=>Promise.resolve().then(()=>Pc),void 0)).Response:Response}),F0=t=>{if(Array.isArray(t))return t.map(n=>F0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=F0(r)}),e};var Pa=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const yy=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kK=(t,e,n)=>Pa(void 0,void 0,void 0,function*(){const r=yield EK();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new SK(yy(s),t.status||500))}).catch(s=>{e(new L0(yy(s),s))}):e(new L0(yy(t),t))}),TK=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function nf(t,e,n,r,s,o){return Pa(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(n,TK(e,r,s,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>kK(l,a,r))})})}function xp(t,e,n,r){return Pa(this,void 0,void 0,function*(){return nf(t,"GET",e,n,r)})}function go(t,e,n,r,s){return Pa(this,void 0,void 0,function*(){return nf(t,"POST",e,r,s,n)})}function PK(t,e,n,r,s){return Pa(this,void 0,void 0,function*(){return nf(t,"PUT",e,r,s,n)})}function _K(t,e,n,r){return Pa(this,void 0,void 0,function*(){return nf(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function CO(t,e,n,r,s){return Pa(this,void 0,void 0,function*(){return nf(t,"DELETE",e,r,s,n)})}var Fn=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const NK={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ak={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RK{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=SO(s)}uploadOrUpdate(e,n,r,s){return Fn(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},Ak),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),f=yield d.json();return d.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Wt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Fn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Ak.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield d.json();return d.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Wt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Fn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield go(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new Lb("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Fn(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Fn(this,void 0,void 0,function*(){try{return{data:{path:(yield go(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Fn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield go(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Fn(this,void 0,void 0,function*(){try{const s=yield go(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}download(e,n){return Fn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield xp(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Wt(a))return{data:null,error:a};throw a}})}info(e){return Fn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield xp(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:F0(r),error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}exists(e){return Fn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield _K(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Wt(r)&&r instanceof L0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Fn(this,void 0,void 0,function*(){try{return{data:yield CO(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Fn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},NK),n),{prefix:e||""});return{data:yield go(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Wt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const MK="2.7.1",AK={"X-Client-Info":`storage-js/${MK}`};var Ua=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class OK{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},AK),n),this.fetch=SO(r)}listBuckets(){return Ua(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Wt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ua(this,void 0,void 0,function*(){try{return{data:yield xp(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ua(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ua(this,void 0,void 0,function*(){try{return{data:yield PK(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Wt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ua(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ua(this,void 0,void 0,function*(){try{return{data:yield CO(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Wt(n))return{data:null,error:n};throw n}})}}class jK extends OK{constructor(e,n={},r){super(e,n,r)}from(e){return new RK(this.url,this.headers,e,this.fetch)}}const DK="2.48.0";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const IK={"X-Client-Info":`supabase-js-${fu}/${DK}`},LK={headers:IK},FK={schema:"public"},$K={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BK={};var zK=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const VK=t=>{let e;return t?e=t:typeof fetch>"u"?e=aO:e=fetch,(...n)=>e(...n)},UK=()=>typeof Headers>"u"?lO:Headers,WK=(t,e,n)=>{const r=VK(n),s=UK();return(o,i)=>zK(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:c}))})};var HK=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function KK(t){return t.replace(/\/$/,"")}function qK(t,e){const{db:n,auth:r,realtime:s,global:o}=t,{db:i,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),o),accessToken:()=>HK(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const EO="2.67.3",GK="http://localhost:9999",JK="supabase.auth.token",YK={"X-Client-Info":`gotrue-js/${EO}`},Ok=10,$0="X-Supabase-Api-Version",kO={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function QK(t){return Math.round(Date.now()/1e3)+t}function XK(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const is=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},Iu=()=>{if(!is())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function ZK(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const TO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>ic(async()=>{const{default:r}=await Promise.resolve().then(()=>Pc);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},e7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",PO=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Gf=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Jf=async(t,e)=>{await t.removeItem(e)};function t7(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,s,o,i,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)i=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=i<<2|a>>4,s=(a&15)<<4|l>>2,o=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&s!=0&&(n=n+String.fromCharCode(s)),c!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class jm{constructor(){this.promise=new jm.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}jm.promiseConstructor=Promise;function jk(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(t7(r))}async function n7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function r7(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function s7(t){return("0"+t.toString(16)).substr(-2)}function o7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,s7).join("")}async function i7(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}function a7(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function l7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await i7(t);return a7(n)}async function Wa(t,e,n=!1){const r=o7();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await PO(t,`${e}-code-verifier`,s);const o=await l7(r);return[o,r===o?"plain":"s256"]}const c7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u7(t){const e=t.headers.get($0);if(!e||!e.match(c7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Fb extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class d7 extends Fb{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function f7(t){return Ie(t)&&t.name==="AuthApiError"}class _O extends Fb{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class _a extends Fb{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class co extends _a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h7(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class vy extends _a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yf extends _a{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qf extends _a{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p7(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class Dk extends _a{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class B0 extends _a{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wy(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class Ik extends _a{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var m7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),g7=[502,503,504];async function Lk(t){var e;if(!e7(t))throw new B0(Ti(t),0);if(g7.includes(t.status))throw new B0(Ti(t),t.status);let n;try{n=await t.json()}catch(o){throw new _O(Ti(o),o)}let r;const s=u7(t);if(s&&s.getTime()>=kO["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ik(Ti(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new co}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new Ik(Ti(n),t.status,n.weak_password.reasons);throw new d7(Ti(n),t.status||500,r)}const y7=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function He(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[$0]||(o[$0]=kO["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await v7(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function v7(t,e,n,r,s,o){const i=y7(e,r,s,o);let a;try{a=await t(n,Object.assign({},i))}catch(l){throw console.error(l),new B0(Ti(l),0)}if(a.ok||await Lk(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Lk(l)}}function uo(t){var e;let n=null;S7(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=QK(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Fk(t){const e=uo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function bo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function w7(t){return{data:t,error:null}}function x7(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,i=m7(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function b7(t){return t}function S7(t){return t.access_token&&t.refresh_token&&t.expires_in}var C7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class E7{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=TO(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:bo})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=C7(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:x7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bo})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,i,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:b7});if(u.error)throw u.error;const d=await u.json(),f=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);c[`${w}Page`]=m}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await He(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bo})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:bo})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:bo})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await He(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const k7={getItem:t=>Iu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Iu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Iu()&&globalThis.localStorage.removeItem(t)}};function $k(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function T7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ha={debug:!!(globalThis&&Iu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NO extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P7 extends NO{}async function _7(t,e,n){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P7(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ha.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}T7();const N7={url:GK,storageKey:JK,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YK,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Zc=30*1e3,Bk=3;async function zk(t,e,n){return await n()}class gd{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=gd.nextInstanceID,gd.nextInstanceID+=1,this.instanceID>0&&is()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},N7),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new E7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=TO(s.fetch),this.lock=s.lock||zk,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:is()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=_7:this.lock=zk,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Iu()?this.storage=k7:(this.memoryStorage={},this.storage=$k(this.memoryStorage)):(this.memoryStorage={},this.storage=$k(this.memoryStorage)),is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${EO}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ZK(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),is()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),p7(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new _O("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:uo}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Ie(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Wa(this.storage,this.storageKey)),o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:uo})}else if("phone"in e){const{phone:u,password:d,options:f}=e;o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:uo})}else throw new Yf("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(Ie(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:i,options:a}=e;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Fk})}else if("phone"in e){const{phone:o,password:i,options:a}=e;n=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Fk})}else throw new Yf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vy}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Gf(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:uo});if(await Jf(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new vy}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(Ie(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=e,a=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:uo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new vy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,i;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Wa(this.storage,this.storageKey));const{error:d}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Yf("You must provide either an email or phone number.")}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:uo});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Wa(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:w7})}catch(o){if(Ie(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new co;const{error:s}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:i}=await He(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:i,error:a}=await He(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new Yf("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Gf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bo}):await this._useSession(async n=>{var r,s,o;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new co}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:bo})})}catch(n){if(Ie(n))return h7(n)&&(await this._removeSession(),await Jf(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new co;const i=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Wa(this.storage,this.storageKey));const{data:c,error:u}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:bo});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return jk(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new co;const n=Date.now()/1e3;let r=n,s=!0,o=null;const i=jk(e.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:a}=n;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new co;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!is())throw new Qf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dk("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:c}=e;if(!o||!a||!i||!c)throw new Qf("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=Zc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const y=f-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,u);const{data:m,error:w}=await this._getUser(o);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:f,refresh_token:i,token_type:c,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Gf(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(f7(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Jf(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=XK(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wa(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ie(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,l,c,u;const{data:d,error:f}=o;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return is()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await r7(async s=>(s>0&&await n7(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:uo})),(s,o)=>{const i=200*Math.pow(2,s);return o&&wy(o)&&Date.now()+i-r<Zc})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),is()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Gf(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Ok;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Ok}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),wy(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new co;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new jm;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new co;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),Ie(o)){const i={session:null,error:o};return wy(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await PO(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Jf(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&is()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Zc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Zc}ms, refresh threshold is ${Bk} ticks`),s<=Bk&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof NO)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!is()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await Wa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await He(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await He(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:a}=await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await He(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(s.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}gd.nextInstanceID=0;const R7=gd;class M7 extends R7{constructor(e){super(e)}}var A7=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(u){try{c(r.next(u))}catch(d){i(d)}}function l(u){try{c(r.throw(u))}catch(d){i(d)}}function c(u){u.done?o(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class O7{constructor(e,n,r){var s,o,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=KK(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:FK,realtime:BK,auth:Object.assign(Object.assign({},$K),{storageKey:l}),global:LK},u=qK(r??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=WK(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new oK(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new D8(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new jK(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return A7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:i,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M7({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:i,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new xK(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j7=(t,e,n)=>new O7(t,e,n),D7="https://nzqdkelbytkvvwdgywja.supabase.co",I7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56cWRrZWxieXRrdnZ3ZGd5d2phIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc0MjQ5MzksImV4cCI6MjA1MzAwMDkzOX0.q91aTkOtF0YvewODoZyehIXYYSuZ_6KdRwRXF84qfho",Vk=3,L7=1e3,F7=t=>new Promise(e=>setTimeout(e,t)),we=j7(D7,I7,{auth:{persistSession:!0,autoRefreshToken:!0},global:{fetch:async(t,e)=>{let n;for(let r=0;r<Vk;r++)try{console.log(`Supabase: Attempt ${r+1} to fetch ${t}`);const s=await fetch(t,e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s}catch(s){console.error(`Supabase: Attempt ${r+1} failed:`,s),n=s,r<Vk-1&&await F7(L7*(r+1))}throw console.error("Supabase: All retry attempts failed"),n}}}),$7=async()=>{try{console.log("Testing Supabase connection...");const{data:t,error:e}=await we.from("site_settings").select("id").limit(1).single();return e?(console.error("Supabase connection test failed:",e),!1):(console.log("Supabase connection test successful"),!0)}catch(t){return console.error("Supabase connection test error:",t),!1}},B7=({searchTerm:t,sortBy:e})=>{const n=Pm(),{data:r,isLoading:s,error:o}=Tc({queryKey:["products","product_categories"],queryFn:async()=>{console.log("ProductGrid: Starting to fetch products with categories");const{data:l,error:c}=await we.from("products").select(`
          *,
          product_categories (
            categories(name)
          )
        `);if(c)throw console.error("ProductGrid: Error fetching products:",c),c;console.log("ProductGrid: Raw products data:",l);const u=l.map(d=>{var p;const f=((p=d.product_categories)==null?void 0:p.map(y=>{var m;return(m=y.categories)==null?void 0:m.name}).filter(Boolean))||[];return console.log("ProductGrid: Transformed categories for product:",d.id,f),{...d,categories:f}});return console.log("ProductGrid: Transformed products:",u),u},retry:1,refetchOnWindowFocus:!1});if(g.useEffect(()=>{console.log("ProductGrid: Setting up real-time subscription");const l=we.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},c=>{console.log("ProductGrid: Received real-time update:",c),n.invalidateQueries({queryKey:["products","product_categories"]})}).on("postgres_changes",{event:"*",schema:"public",table:"product_categories"},c=>{console.log("ProductGrid: Received product_categories update:",c),n.invalidateQueries({queryKey:["products","product_categories"]})}).subscribe(c=>{console.log("ProductGrid: Real-time subscription status:",c)});return()=>{console.log("ProductGrid: Cleaning up real-time subscription"),we.removeChannel(l)}},[n]),s)return console.log("ProductGrid: Loading products..."),h.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:h.jsx("p",{className:"text-gray-500",children:"Loading products..."})});if(o)return console.error("ProductGrid: Error rendering products:",o),h.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:h.jsx("p",{className:"text-red-500",children:"Error loading products. Please try again later."})});if(!r||r.length===0)return console.log("ProductGrid: No products found"),h.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:h.jsx("p",{className:"text-gray-500",children:"No products found."})});const i=r.filter(l=>{const c=l.name.toLowerCase().includes(t.toLowerCase())||l.description&&l.description.toLowerCase().includes(t.toLowerCase());return console.log("ProductGrid: Filtering product:",{productId:l.id,productName:l.name,matchesSearch:c}),c}),a=[...i].sort((l,c)=>{switch(e){case"name-asc":return(l.name||"").localeCompare(c.name||"");case"name-desc":return(c.name||"").localeCompare(l.name||"");case"strain-asc":return(l.strain||"").localeCompare(c.strain||"");case"strain-desc":return(c.strain||"").localeCompare(l.strain||"");case"price-asc":return(l.regular_price||0)-(c.regular_price||0);case"price-desc":return(c.regular_price||0)-(l.regular_price||0);case"date-asc":return new Date(l.created_at).getTime()-new Date(c.created_at).getTime();case"date-desc":return new Date(c.created_at).getTime()-new Date(l.created_at).getTime();default:return 0}});return console.log("ProductGrid: Final render state:",{totalProducts:r.length,filteredCount:i.length,sortedCount:a.length,searchTerm:t,sortBy:e}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8",children:a.map(l=>h.jsx(GH,{...l,image:l.image_url||"",video:l.video_url||"",media:l.media,viewMode:"small"},l.id))})};function $b(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Bb(t){const[e,n]=g.useState(void 0);return un(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var zb="Checkbox",[z7,Yoe]=Es(zb),[V7,U7]=z7(zb),RO=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=g.useState(null),y=$e(e,C=>p(C)),m=g.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Qr({prop:s,defaultProp:o,onChange:c}),b=g.useRef(v);return g.useEffect(()=>{const C=f==null?void 0:f.form;if(C){const E=()=>x(b.current);return C.addEventListener("reset",E),()=>C.removeEventListener("reset",E)}},[f,x]),h.jsxs(V7,{scope:n,state:v,disabled:a,children:[h.jsx(be.button,{type:"button",role:"checkbox","aria-checked":Ho(v)?"mixed":v,"aria-required":i,"data-state":OO(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:y,onKeyDown:se(t.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:se(t.onClick,C=>{x(E=>Ho(E)?!0:!E),w&&(m.current=C.isPropagationStopped(),m.current||C.stopPropagation())})}),w&&h.jsx(W7,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ho(o)?!1:o})]})});RO.displayName=zb;var MO="CheckboxIndicator",AO=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,o=U7(MO,n);return h.jsx(dn,{present:r||Ho(o.state)||o.state===!0,children:h.jsx(be.span,{"data-state":OO(o.state),"data-disabled":o.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});AO.displayName=MO;var W7=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...o}=t,i=g.useRef(null),a=$b(n),l=Bb(e);g.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&p){const y=new Event("click",{bubbles:r});u.indeterminate=Ho(n),p.call(u,Ho(n)?!1:n),u.dispatchEvent(y)}},[a,n,r]);const c=g.useRef(Ho(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...o,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ho(t){return t==="indeterminate"}function OO(t){return Ho(t)?"indeterminate":t?"checked":"unchecked"}var jO=RO,H7=AO;const Vb=g.forwardRef(({className:t,...e},n)=>h.jsx(jO,{ref:n,className:ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:h.jsx(H7,{className:ie("flex items-center justify-center text-current"),children:h.jsx(Cc,{className:"h-4 w-4"})})}));Vb.displayName=jO.displayName;const Fe=g.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Fe.displayName="Input";const K7=1,q7=1e6;let xy=0;function G7(){return xy=(xy+1)%Number.MAX_SAFE_INTEGER,xy.toString()}const by=new Map,Uk=t=>{if(by.has(t))return;const e=setTimeout(()=>{by.delete(t),Lu({type:"REMOVE_TOAST",toastId:t})},q7);by.set(t,e)},J7=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,K7)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Uk(n):t.toasts.forEach(r=>{Uk(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},_h=[];let Nh={toasts:[]};function Lu(t){Nh=J7(Nh,t),_h.forEach(e=>{e(Nh)})}function DO({...t}){const e=G7(),n=s=>Lu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Lu({type:"DISMISS_TOAST",toastId:e});return Lu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Ub(){const[t,e]=g.useState(Nh);return g.useEffect(()=>(_h.push(e),()=>{const n=_h.indexOf(e);n>-1&&_h.splice(n,1)}),[t]),{...t,toast:DO,dismiss:n=>Lu({type:"DISMISS_TOAST",toastId:n})}}const Y7=({onVerified:t})=>{var w,v,x;const[e,n]=g.useState(!1),[r,s]=g.useState(""),[o,i]=g.useState("verification"),[a,l]=g.useState(null),[c,u]=g.useState(!0),{toast:d}=Ub(),[f,p]=g.useState(null);g.useEffect(()=>{y(),localStorage.getItem("isAgeVerified")==="true"&&t()},[t]);const y=async()=>{try{if(console.log("Fetching storefront password and settings..."),!await $7())throw new Error("Unable to connect to the database");const{data:C,error:E}=await we.from("site_settings").select("storefront_password, logo_url, logo_url_webp, welcome_instructions").single();if(E)throw console.error("Error fetching storefront password:",E),E;console.log("Storefront settings data:",C),C!=null&&C.storefront_password&&l(C.storefront_password),p(C),u(!1)}catch(b){console.error("Error fetching storefront password:",b),d({title:"Connection Error",description:"Unable to connect to the server. Please check your internet connection and try again.",variant:"destructive"}),p({logo_url:"/placeholder.svg",welcome_instructions:{title:"Welcome to Our Store",subtitle:"Please verify your age to continue",guidelines:"<p>Please wait while we restore connection to our servers.</p>"}}),u(!1)}},m=b=>{if(b.preventDefault(),!e){d({title:"Age Verification Required",description:"Please confirm that you are 21 years or older.",variant:"destructive"});return}if(!a){d({title:"Access Unavailable",description:"Site access is currently unavailable. Please try again later.",variant:"destructive"});return}if(r!==a){d({title:"Invalid Password",description:"Please enter the correct password to access the site.",variant:"destructive"});return}o==="verification"?i("instructions"):(localStorage.setItem("isAgeVerified","true"),t())};return c?h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:h.jsx("div",{className:"bg-white rounded-lg p-4 sm:p-8 max-w-md w-full mx-4 shadow-lg",children:h.jsx("p",{className:"text-center",children:"Loading..."})})}):h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-8 max-w-md w-full mx-4 shadow-lg animate-fade-up overflow-y-auto max-h-[90vh]",children:[h.jsxs("picture",{children:[(f==null?void 0:f.logo_url_webp)&&h.jsx("source",{srcSet:f.logo_url_webp,type:"image/webp"}),(f==null?void 0:f.logo_url)&&h.jsx("img",{src:f.logo_url,alt:"Palmtree Smokes Logo",className:"w-32 sm:w-48 mx-auto mb-4 sm:mb-6"})]}),o==="verification"?h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",children:"Verification Required"}),h.jsxs("form",{onSubmit:m,className:"space-y-4 sm:space-y-6",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(Vb,{id:"age-verify",checked:e,onCheckedChange:b=>n(b)}),h.jsx("label",{htmlFor:"age-verify",className:"text-xs sm:text-sm leading-tight sm:leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-left text-[#ef3122]",children:"I confirm that I am 21 years of age or older and agree to the Terms of Service and Privacy Policy."})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"password",className:"text-xs sm:text-sm font-medium",children:"Site Password"}),h.jsx(Fe,{id:"password",type:"password",value:r,onChange:b=>s(b.target.value),placeholder:"Enter site password",className:"w-full text-sm"})]}),h.jsx(xe,{type:"submit",className:"w-full bg-[#ef3122] hover:bg-[#ef3122]/90 text-white",children:"Next"}),h.jsx("p",{className:"text-[10px] sm:text-xs text-center text-gray-500 mt-4",children:"This website contains age-restricted content. By entering, you accept our terms and confirm your legal age to view such content."})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-left",children:((w=f==null?void 0:f.welcome_instructions)==null?void 0:w.title)||"Welcome to Palmtree Smokes"}),h.jsxs("div",{className:"space-y-4 text-xs sm:text-sm text-gray-600",children:[h.jsx("p",{className:"text-left",children:((v=f==null?void 0:f.welcome_instructions)==null?void 0:v.subtitle)||"Please take a moment to review our store guidelines:"}),h.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:((x=f==null?void 0:f.welcome_instructions)==null?void 0:x.guidelines)||""}}),h.jsx("form",{onSubmit:m,children:h.jsx(xe,{type:"submit",className:"w-full bg-[#ef3122] hover:bg-[#ef3122]/90 text-white mt-6",children:"Enter Site"})})]})]})]})})};function z0(t,[e,n]){return Math.min(n,Math.max(e,t))}function Q7(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:w,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,X7(s,...e)]}function X7(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Dm(t){const e=t+"CollectionProvider",[n,r]=Q7(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:y,children:m}=p,w=ee.useRef(null),v=ee.useRef(new Map).current;return h.jsx(s,{scope:y,itemMap:v,collectionRef:w,children:m})};i.displayName=e;const a=t+"CollectionSlot",l=ee.forwardRef((p,y)=>{const{scope:m,children:w}=p,v=o(a,m),x=$e(y,v.collectionRef);return h.jsx(Gs,{ref:x,children:w})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=ee.forwardRef((p,y)=>{const{scope:m,children:w,...v}=p,x=ee.useRef(null),b=$e(y,x),C=o(c,m);return ee.useEffect(()=>(C.itemMap.set(x,{ref:x,...v}),()=>void C.itemMap.delete(x))),h.jsx(Gs,{[u]:"",ref:b,children:w})});d.displayName=c;function f(p){const y=o(t+"CollectionConsumer",p);return ee.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((C,E)=>v.indexOf(C.ref.current)-v.indexOf(E.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:l,ItemSlot:d},f,r]}var Z7=g.createContext(void 0);function rf(t){const e=g.useContext(Z7);return t||e||"ltr"}const e9=["top","right","bottom","left"],ei=Math.min,or=Math.max,bp=Math.round,Xf=Math.floor,ti=t=>({x:t,y:t}),t9={left:"right",right:"left",bottom:"top",top:"bottom"},n9={start:"end",end:"start"};function V0(t,e,n){return or(t,ei(e,n))}function Qs(t,e){return typeof t=="function"?t(e):t}function Xs(t){return t.split("-")[0]}function Nc(t){return t.split("-")[1]}function Wb(t){return t==="x"?"y":"x"}function Hb(t){return t==="y"?"height":"width"}function ni(t){return["top","bottom"].includes(Xs(t))?"y":"x"}function Kb(t){return Wb(ni(t))}function r9(t,e,n){n===void 0&&(n=!1);const r=Nc(t),s=Kb(t),o=Hb(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=Sp(i)),[i,Sp(i)]}function s9(t){const e=Sp(t);return[U0(t),e,U0(e)]}function U0(t){return t.replace(/start|end/g,e=>n9[e])}function o9(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:i;default:return[]}}function i9(t,e,n,r){const s=Nc(t);let o=o9(Xs(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(U0)))),o}function Sp(t){return t.replace(/left|right|bottom|top/g,e=>t9[e])}function a9(t){return{top:0,right:0,bottom:0,left:0,...t}}function IO(t){return typeof t!="number"?a9(t):{top:t,right:t,bottom:t,left:t}}function Cp(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Wk(t,e,n){let{reference:r,floating:s}=t;const o=ni(e),i=Kb(e),a=Hb(i),l=Xs(e),c=o==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Nc(e)){case"start":p[i]-=f*(n&&c?-1:1);break;case"end":p[i]+=f*(n&&c?-1:1);break}return p}const l9=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=Wk(c,r,l),f=r,p={},y=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x,y:b,data:C,reset:E}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:t,floating:e}});u=x??u,d=b??d,p={...p,[w]:{...p[w],...C}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(c=E.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:u,y:d}=Wk(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:p}};async function yd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Qs(e,t),y=IO(p),w=a[f?d==="floating"?"reference":"floating":d],v=Cp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),C=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},E=Cp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-E.top+y.top)/C.y,bottom:(E.bottom-v.bottom+y.bottom)/C.y,left:(v.left-E.left+y.left)/C.x,right:(E.right-v.right+y.right)/C.x}}const c9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Qs(t,e)||{};if(c==null)return{};const d=IO(u),f={x:n,y:r},p=Kb(s),y=Hb(p),m=await i.getDimensions(c),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",C=o.reference[y]+o.reference[p]-f[p]-o.floating[y],E=f[p]-o.reference[p],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let P=k?k[b]:0;(!P||!await(i.isElement==null?void 0:i.isElement(k)))&&(P=a.floating[b]||o.floating[y]);const S=C/2-E/2,T=P/2-m[y]/2-1,_=ei(d[v],T),R=ei(d[x],T),j=_,V=P-m[y]-R,B=P/2-m[y]/2+S,te=V0(j,B,V),K=!l.arrow&&Nc(s)!=null&&B!==te&&o.reference[y]/2-(B<j?_:R)-m[y]/2<0,I=K?B<j?B-j:B-V:0;return{[p]:f[p]+I,data:{[p]:te,centerOffset:B-te-I,...K&&{alignmentOffset:I}},reset:K}}}),u9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...w}=Qs(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Xs(s),x=ni(a),b=Xs(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(b||!m?[Sp(a)]:s9(a)),k=y!=="none";!f&&k&&E.push(...i9(a,m,y,C));const P=[a,...E],S=await yd(e,w),T=[];let _=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&T.push(S[v]),d){const B=r9(s,i,C);T.push(S[B[0]],S[B[1]])}if(_=[..._,{placement:s,overflows:T}],!T.every(B=>B<=0)){var R,j;const B=(((R=o.flip)==null?void 0:R.index)||0)+1,te=P[B];if(te)return{data:{index:B,overflows:_},reset:{placement:te}};let K=(j=_.filter(I=>I.overflows[0]<=0).sort((I,N)=>I.overflows[1]-N.overflows[1])[0])==null?void 0:j.placement;if(!K)switch(p){case"bestFit":{var V;const I=(V=_.filter(N=>{if(k){const O=ni(N.placement);return O===x||O==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(O=>O>0).reduce((O,$)=>O+$,0)]).sort((N,O)=>N[1]-O[1])[0])==null?void 0:V[0];I&&(K=I);break}case"initialPlacement":K=a;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function Hk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Kk(t){return e9.some(e=>t[e]>=0)}const d9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Qs(t,e);switch(r){case"referenceHidden":{const o=await yd(e,{...s,elementContext:"reference"}),i=Hk(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Kk(i)}}}case"escaped":{const o=await yd(e,{...s,altBoundary:!0}),i=Hk(o,n.floating);return{data:{escapedOffsets:i,escaped:Kk(i)}}}default:return{}}}}};async function f9(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Xs(n),a=Nc(n),l=ni(n)==="y",c=["left","top"].includes(i)?-1:1,u=o&&l?-1:1,d=Qs(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof y=="number"&&(p=a==="end"?y*-1:y),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const h9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=e,l=await f9(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:i}}}}},p9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=Qs(t,e),c={x:n,y:r},u=await yd(e,l),d=ni(Xs(s)),f=Wb(d);let p=c[f],y=c[d];if(o){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[w],b=p-u[v];p=V0(x,p,b)}if(i){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=y+u[w],b=y-u[v];y=V0(x,y,b)}const m=a.fn({...e,[f]:p,[d]:y});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:o,[d]:i}}}}}},m9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Qs(t,e),u={x:n,y:r},d=ni(s),f=Wb(d);let p=u[f],y=u[d];const m=Qs(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",C=o.reference[f]-o.floating[b]+w.mainAxis,E=o.reference[f]+o.reference[b]-w.mainAxis;p<C?p=C:p>E&&(p=E)}if(c){var v,x;const b=f==="y"?"width":"height",C=["top","left"].includes(Xs(s)),E=o.reference[d]-o.floating[b]+(C&&((v=i.offset)==null?void 0:v[d])||0)+(C?0:w.crossAxis),k=o.reference[d]+o.reference[b]+(C?0:((x=i.offset)==null?void 0:x[d])||0)-(C?w.crossAxis:0);y<E?y=E:y>k&&(y=k)}return{[f]:p,[d]:y}}}},g9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:i,elements:a}=e,{apply:l=()=>{},...c}=Qs(t,e),u=await yd(e,c),d=Xs(s),f=Nc(s),p=ni(s)==="y",{width:y,height:m}=o.floating;let w,v;d==="top"||d==="bottom"?(w=d,v=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,w=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,b=y-u.left-u.right,C=ei(m-u[w],x),E=ei(y-u[v],b),k=!e.middlewareData.shift;let P=C,S=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=x),k&&!f){const _=or(u.left,0),R=or(u.right,0),j=or(u.top,0),V=or(u.bottom,0);p?S=y-2*(_!==0||R!==0?_+R:or(u.left,u.right)):P=m-2*(j!==0||V!==0?j+V:or(u.top,u.bottom))}await l({...e,availableWidth:S,availableHeight:P});const T=await i.getDimensions(a.floating);return y!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Im(){return typeof window<"u"}function Rc(t){return LO(t)?(t.nodeName||"").toLowerCase():"#document"}function ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ks(t){var e;return(e=(LO(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function LO(t){return Im()?t instanceof Node||t instanceof ur(t).Node:!1}function Xr(t){return Im()?t instanceof Element||t instanceof ur(t).Element:!1}function xs(t){return Im()?t instanceof HTMLElement||t instanceof ur(t).HTMLElement:!1}function qk(t){return!Im()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ur(t).ShadowRoot}function sf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function y9(t){return["table","td","th"].includes(Rc(t))}function Lm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qb(t){const e=Gb(),n=Xr(t)?Zr(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function v9(t){let e=ri(t);for(;xs(e)&&!lc(e);){if(qb(e))return e;if(Lm(e))return null;e=ri(e)}return null}function Gb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lc(t){return["html","body","#document"].includes(Rc(t))}function Zr(t){return ur(t).getComputedStyle(t)}function Fm(t){return Xr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ri(t){if(Rc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||qk(t)&&t.host||ks(t);return qk(e)?e.host:e}function FO(t){const e=ri(t);return lc(e)?t.ownerDocument?t.ownerDocument.body:t.body:xs(e)&&sf(e)?e:FO(e)}function vd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=FO(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=ur(s);if(o){const a=W0(i);return e.concat(i,i.visualViewport||[],sf(s)?s:[],a&&n?vd(a):[])}return e.concat(s,vd(s,[],n))}function W0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $O(t){const e=Zr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=xs(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,a=bp(n)!==o||bp(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function Jb(t){return Xr(t)?t:t.contextElement}function _l(t){const e=Jb(t);if(!xs(e))return ti(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=$O(e);let i=(o?bp(n.width):n.width)/r,a=(o?bp(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const w9=ti(0);function BO(t){const e=ur(t);return!Gb()||!e.visualViewport?w9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function x9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ur(t)?!1:e}function da(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Jb(t);let i=ti(1);e&&(r?Xr(r)&&(i=_l(r)):i=_l(t));const a=x9(o,n,r)?BO(o):ti(0);let l=(s.left+a.x)/i.x,c=(s.top+a.y)/i.y,u=s.width/i.x,d=s.height/i.y;if(o){const f=ur(o),p=r&&Xr(r)?ur(r):r;let y=f,m=W0(y);for(;m&&r&&p!==y;){const w=_l(m),v=m.getBoundingClientRect(),x=Zr(m),b=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*w.x,C=v.top+(m.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,d*=w.y,l+=b,c+=C,y=ur(m),m=W0(y)}}return Cp({width:u,height:d,x:l,y:c})}function b9(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=ks(r),a=e?Lm(e.floating):!1;if(r===i||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=ti(1);const u=ti(0),d=xs(r);if((d||!d&&!o)&&((Rc(r)!=="body"||sf(i))&&(l=Fm(r)),xs(r))){const f=da(r);c=_l(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function S9(t){return Array.from(t.getClientRects())}function H0(t,e){const n=Fm(t).scrollLeft;return e?e.left+n:da(ks(t)).left+n}function C9(t){const e=ks(t),n=Fm(t),r=t.ownerDocument.body,s=or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+H0(t);const a=-n.scrollTop;return Zr(r).direction==="rtl"&&(i+=or(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function E9(t,e){const n=ur(t),r=ks(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,l=0;if(s){o=s.width,i=s.height;const c=Gb();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:a,y:l}}function k9(t,e){const n=da(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=xs(t)?_l(t):ti(1),i=t.clientWidth*o.x,a=t.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:i,height:a,x:l,y:c}}function Gk(t,e,n){let r;if(e==="viewport")r=E9(t,n);else if(e==="document")r=C9(ks(t));else if(Xr(e))r=k9(e,n);else{const s=BO(t);r={...e,x:e.x-s.x,y:e.y-s.y}}return Cp(r)}function zO(t,e){const n=ri(t);return n===e||!Xr(n)||lc(n)?!1:Zr(n).position==="fixed"||zO(n,e)}function T9(t,e){const n=e.get(t);if(n)return n;let r=vd(t,[],!1).filter(a=>Xr(a)&&Rc(a)!=="body"),s=null;const o=Zr(t).position==="fixed";let i=o?ri(t):t;for(;Xr(i)&&!lc(i);){const a=Zr(i),l=qb(i);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||sf(i)&&!l&&zO(t,i))?r=r.filter(u=>u!==i):s=a,i=ri(i)}return e.set(t,r),r}function P9(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?Lm(e)?[]:T9(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=Gk(e,u,s);return c.top=or(d.top,c.top),c.right=ei(d.right,c.right),c.bottom=ei(d.bottom,c.bottom),c.left=or(d.left,c.left),c},Gk(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _9(t){const{width:e,height:n}=$O(t);return{width:e,height:n}}function N9(t,e,n){const r=xs(e),s=ks(e),o=n==="fixed",i=da(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=ti(0);if(r||!r&&!o)if((Rc(e)!=="body"||sf(s))&&(a=Fm(e)),r){const p=da(e,!0,o,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=H0(s));let c=0,u=0;if(s&&!r&&!o){const p=s.getBoundingClientRect();u=p.top+a.scrollTop,c=p.left+a.scrollLeft-H0(s,p)}const d=i.left+a.scrollLeft-l.x-c,f=i.top+a.scrollTop-l.y-u;return{x:d,y:f,width:i.width,height:i.height}}function Sy(t){return Zr(t).position==="static"}function Jk(t,e){if(!xs(t)||Zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ks(t)===n&&(n=n.ownerDocument.body),n}function VO(t,e){const n=ur(t);if(Lm(t))return n;if(!xs(t)){let s=ri(t);for(;s&&!lc(s);){if(Xr(s)&&!Sy(s))return s;s=ri(s)}return n}let r=Jk(t,e);for(;r&&y9(r)&&Sy(r);)r=Jk(r,e);return r&&lc(r)&&Sy(r)&&!qb(r)?n:r||v9(t)||n}const R9=async function(t){const e=this.getOffsetParent||VO,n=this.getDimensions,r=await n(t.floating);return{reference:N9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function M9(t){return Zr(t).direction==="rtl"}const A9={convertOffsetParentRelativeRectToViewportRelativeRect:b9,getDocumentElement:ks,getClippingRect:P9,getOffsetParent:VO,getElementRects:R9,getClientRects:S9,getDimensions:_9,getScale:_l,isElement:Xr,isRTL:M9};function O9(t,e){let n=null,r;const s=ks(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const p=Xf(u),y=Xf(s.clientWidth-(c+d)),m=Xf(s.clientHeight-(u+f)),w=Xf(c),x={rootMargin:-p+"px "+-y+"px "+-m+"px "+-w+"px",threshold:or(0,ei(1,l))||1};let b=!0;function C(E){const k=E[0].intersectionRatio;if(k!==l){if(!b)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(C,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(t)}return i(!0),o}function j9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Jb(t),u=s||o?[...c?vd(c):[],...vd(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const d=c&&a?O9(c,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let y,m=l?da(t):null;l&&w();function w(){const v=da(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,y=requestAnimationFrame(w)}return n(),()=>{var v;u.forEach(x=>{s&&x.removeEventListener("scroll",n),o&&x.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(y)}}const D9=h9,I9=p9,L9=u9,F9=g9,$9=d9,Yk=c9,B9=m9,z9=(t,e,n)=>{const r=new Map,s={platform:A9,...n},o={...s.platform,_c:r};return l9(t,e,{...s,platform:o})};var Rh=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Ep(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ep(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Ep(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function UO(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Qk(t,e){const n=UO(t);return Math.round(e*n)/n}function Cy(t){const e=g.useRef(t);return Rh(()=>{e.current=t}),e}function V9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(r);Ep(f,r)||p(r);const[y,m]=g.useState(null),[w,v]=g.useState(null),x=g.useCallback(N=>{N!==k.current&&(k.current=N,m(N))},[]),b=g.useCallback(N=>{N!==P.current&&(P.current=N,v(N))},[]),C=o||y,E=i||w,k=g.useRef(null),P=g.useRef(null),S=g.useRef(u),T=l!=null,_=Cy(l),R=Cy(s),j=Cy(c),V=g.useCallback(()=>{if(!k.current||!P.current)return;const N={placement:e,strategy:n,middleware:f};R.current&&(N.platform=R.current),z9(k.current,P.current,N).then(O=>{const $={...O,isPositioned:j.current!==!1};B.current&&!Ep(S.current,$)&&(S.current=$,Cs.flushSync(()=>{d($)}))})},[f,e,n,R,j]);Rh(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,d(N=>({...N,isPositioned:!1})))},[c]);const B=g.useRef(!1);Rh(()=>(B.current=!0,()=>{B.current=!1}),[]),Rh(()=>{if(C&&(k.current=C),E&&(P.current=E),C&&E){if(_.current)return _.current(C,E,V);V()}},[C,E,V,_,T]);const te=g.useMemo(()=>({reference:k,floating:P,setReference:x,setFloating:b}),[x,b]),K=g.useMemo(()=>({reference:C,floating:E}),[C,E]),I=g.useMemo(()=>{const N={position:n,left:0,top:0};if(!K.floating)return N;const O=Qk(K.floating,u.x),$=Qk(K.floating,u.y);return a?{...N,transform:"translate("+O+"px, "+$+"px)",...UO(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:$}},[n,a,K.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:V,refs:te,elements:K,floatingStyles:I}),[u,V,te,K,I])}const U9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Yk({element:r.current,padding:s}).fn(n):{}:r?Yk({element:r,padding:s}).fn(n):{}}}},W9=(t,e)=>({...D9(t),options:[t,e]}),H9=(t,e)=>({...I9(t),options:[t,e]}),K9=(t,e)=>({...B9(t),options:[t,e]}),q9=(t,e)=>({...L9(t),options:[t,e]}),G9=(t,e)=>({...F9(t),options:[t,e]}),J9=(t,e)=>({...$9(t),options:[t,e]}),Y9=(t,e)=>({...U9(t),options:[t,e]});var Q9="Arrow",WO=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return h.jsx(be.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});WO.displayName=Q9;var X9=WO;function Z9(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:w,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,eq(s,...e)]}function eq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Yb="Popper",[HO,Mc]=Z9(Yb),[tq,KO]=HO(Yb),qO=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return h.jsx(tq,{scope:e,anchor:r,onAnchorChange:s,children:n})};qO.displayName=Yb;var GO="PopperAnchor",JO=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=KO(GO,n),i=g.useRef(null),a=$e(e,i);return g.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(be.div,{...s,ref:a})});JO.displayName=GO;var Qb="PopperContent",[nq,rq]=HO(Qb),YO=g.forwardRef((t,e)=>{var H,G,oe,re,Q,q;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...m}=t,w=KO(Qb,n),[v,x]=g.useState(null),b=$e(e,ce=>x(ce)),[C,E]=g.useState(null),k=Bb(C),P=(k==null?void 0:k.width)??0,S=(k==null?void 0:k.height)??0,T=r+(o!=="center"?"-"+o:""),_=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],j=R.length>0,V={padding:_,boundary:R.filter(oq),altBoundary:j},{refs:B,floatingStyles:te,placement:K,isPositioned:I,middlewareData:N}=V9({strategy:"fixed",placement:T,whileElementsMounted:(...ce)=>j9(...ce,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[W9({mainAxis:s+S,alignmentAxis:i}),l&&H9({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?K9():void 0,...V}),l&&q9({...V}),G9({...V,apply:({elements:ce,rects:ae,availableWidth:ge,availableHeight:Re})=>{const{width:Ee,height:Be}=ae.reference,Te=ce.floating.style;Te.setProperty("--radix-popper-available-width",`${ge}px`),Te.setProperty("--radix-popper-available-height",`${Re}px`),Te.setProperty("--radix-popper-anchor-width",`${Ee}px`),Te.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),C&&Y9({element:C,padding:a}),iq({arrowWidth:P,arrowHeight:S}),f&&J9({strategy:"referenceHidden",...V})]}),[O,$]=ZO(K),U=wt(y);un(()=>{I&&(U==null||U())},[I,U]);const M=(H=N.arrow)==null?void 0:H.x,F=(G=N.arrow)==null?void 0:G.y,J=((oe=N.arrow)==null?void 0:oe.centerOffset)!==0,[Y,W]=g.useState();return un(()=>{v&&W(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:I?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(re=N.transformOrigin)==null?void 0:re.x,(Q=N.transformOrigin)==null?void 0:Q.y].join(" "),...((q=N.hide)==null?void 0:q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(nq,{scope:n,placedSide:O,onArrowChange:E,arrowX:M,arrowY:F,shouldHideArrow:J,children:h.jsx(be.div,{"data-side":O,"data-align":$,...m,ref:b,style:{...m.style,animation:I?void 0:"none"}})})})});YO.displayName=Qb;var QO="PopperArrow",sq={top:"bottom",right:"left",bottom:"top",left:"right"},XO=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=rq(QO,r),i=sq[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(X9,{...s,ref:n,style:{...s.style,display:"block"}})})});XO.displayName=QO;function oq(t){return t!==null}var iq=t=>({name:"transformOrigin",options:t,fn(e){var w,v,x;const{placement:n,rects:r,middlewareData:s}=e,i=((w=s.arrow)==null?void 0:w.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=ZO(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let y="",m="";return c==="bottom"?(y=i?d:`${f}px`,m=`${-l}px`):c==="top"?(y=i?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,m=i?d:`${p}px`):c==="left"&&(y=`${r.floating.width+l}px`,m=i?d:`${p}px`),{data:{x:y,y:m}}}});function ZO(t){const[e,n="center"]=t.split("-");return[e,n]}var Xb=qO,$m=JO,Zb=YO,eS=XO,aq="VisuallyHidden",Bm=g.forwardRef((t,e)=>h.jsx(be.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Bm.displayName=aq;var lq=[" ","Enter","ArrowUp","ArrowDown"],cq=[" ","Enter"],of="Select",[zm,Vm,uq]=Dm(of),[Ac,Qoe]=Es(of,[uq,Mc]),Um=Mc(),[dq,hi]=Ac(of),[fq,hq]=Ac(of),ej=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:y}=t,m=Um(e),[w,v]=g.useState(null),[x,b]=g.useState(null),[C,E]=g.useState(!1),k=rf(c),[P=!1,S]=Qr({prop:r,defaultProp:s,onChange:o}),[T,_]=Qr({prop:i,defaultProp:a,onChange:l}),R=g.useRef(null),j=w?y||!!w.closest("form"):!0,[V,B]=g.useState(new Set),te=Array.from(V).map(K=>K.props.value).join(";");return h.jsx(Xb,{...m,children:h.jsxs(dq,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:E,contentId:Gr(),value:T,onValueChange:_,open:P,onOpenChange:S,dir:k,triggerPointerDownPosRef:R,disabled:f,children:[h.jsx(zm.Provider,{scope:e,children:h.jsx(fq,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(K=>{B(I=>new Set(I).add(K))},[]),onNativeOptionRemove:g.useCallback(K=>{B(I=>{const N=new Set(I);return N.delete(K),N})},[]),children:n})}),j?h.jsxs(kj,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:T,onChange:K=>_(K.target.value),disabled:f,form:y,children:[T===void 0?h.jsx("option",{value:""}):null,Array.from(V)]},te):null]})})};ej.displayName=of;var tj="SelectTrigger",nj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=Um(n),i=hi(tj,n),a=i.disabled||r,l=$e(e,i.onTriggerChange),c=Vm(n),u=g.useRef("touch"),[d,f,p]=Tj(m=>{const w=c().filter(b=>!b.disabled),v=w.find(b=>b.value===i.value),x=Pj(w,m,v);x!==void 0&&i.onValueChange(x.value)}),y=m=>{a||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx($m,{asChild:!0,...o,children:h.jsx(be.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Ej(i.value)?"":void 0,...s,ref:l,onClick:se(s.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:se(s.onPointerDown,m=>{u.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:se(s.onKeyDown,m=>{const w=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&lq.includes(m.key)&&(y(),m.preventDefault())})})})});nj.displayName=tj;var rj="SelectValue",sj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...a}=t,l=hi(rj,n),{onValueNodeHasChildrenChange:c}=l,u=o!==void 0,d=$e(e,l.onValueNodeChange);return un(()=>{c(u)},[c,u]),h.jsx(be.span,{...a,ref:d,style:{pointerEvents:"none"},children:Ej(l.value)?h.jsx(h.Fragment,{children:i}):o})});sj.displayName=rj;var pq="SelectIcon",oj=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return h.jsx(be.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});oj.displayName=pq;var mq="SelectPortal",ij=t=>h.jsx(Sc,{asChild:!0,...t});ij.displayName=mq;var fa="SelectContent",aj=g.forwardRef((t,e)=>{const n=hi(fa,t.__scopeSelect),[r,s]=g.useState();if(un(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Cs.createPortal(h.jsx(lj,{scope:t.__scopeSelect,children:h.jsx(zm.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),o):null}return h.jsx(cj,{...t,ref:e})});aj.displayName=fa;var Lr=10,[lj,pi]=Ac(fa),gq="SelectContentImpl",cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:w,...v}=t,x=hi(fa,n),[b,C]=g.useState(null),[E,k]=g.useState(null),P=$e(e,H=>C(H)),[S,T]=g.useState(null),[_,R]=g.useState(null),j=Vm(n),[V,B]=g.useState(!1),te=g.useRef(!1);g.useEffect(()=>{if(b)return Gd(b)},[b]),hm();const K=g.useCallback(H=>{const[G,...oe]=j().map(q=>q.ref.current),[re]=oe.slice(-1),Q=document.activeElement;for(const q of H)if(q===Q||(q==null||q.scrollIntoView({block:"nearest"}),q===G&&E&&(E.scrollTop=0),q===re&&E&&(E.scrollTop=E.scrollHeight),q==null||q.focus(),document.activeElement!==Q))return},[j,E]),I=g.useCallback(()=>K([S,b]),[K,S,b]);g.useEffect(()=>{V&&I()},[V,I]);const{onOpenChange:N,triggerPointerDownPosRef:O}=x;g.useEffect(()=>{if(b){let H={x:0,y:0};const G=re=>{var Q,q;H={x:Math.abs(Math.round(re.pageX)-(((Q=O.current)==null?void 0:Q.x)??0)),y:Math.abs(Math.round(re.pageY)-(((q=O.current)==null?void 0:q.y)??0))}},oe=re=>{H.x<=10&&H.y<=10?re.preventDefault():b.contains(re.target)||N(!1),document.removeEventListener("pointermove",G),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",G),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",G),document.removeEventListener("pointerup",oe,{capture:!0})}}},[b,N,O]),g.useEffect(()=>{const H=()=>N(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[N]);const[$,U]=Tj(H=>{const G=j().filter(Q=>!Q.disabled),oe=G.find(Q=>Q.ref.current===document.activeElement),re=Pj(G,H,oe);re&&setTimeout(()=>re.ref.current.focus())}),M=g.useCallback((H,G,oe)=>{const re=!te.current&&!oe;(x.value!==void 0&&x.value===G||re)&&(T(H),re&&(te.current=!0))},[x.value]),F=g.useCallback(()=>b==null?void 0:b.focus(),[b]),J=g.useCallback((H,G,oe)=>{const re=!te.current&&!oe;(x.value!==void 0&&x.value===G||re)&&R(H)},[x.value]),Y=r==="popper"?K0:uj,W=Y===K0?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:w}:{};return h.jsx(lj,{scope:n,content:b,viewport:E,onViewportChange:k,itemRefCallback:M,selectedItem:S,onItemLeave:F,itemTextRefCallback:J,focusSelectedItem:I,selectedItemText:_,position:r,isPositioned:V,searchRef:$,children:h.jsx(qd,{as:Gs,allowPinchZoom:!0,children:h.jsx(Kd,{asChild:!0,trapped:x.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:se(s,H=>{var G;(G=x.trigger)==null||G.focus({preventScroll:!0}),H.preventDefault()}),children:h.jsx(bc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(Y,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:H=>H.preventDefault(),...v,...W,onPlaced:()=>B(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:se(v.onKeyDown,H=>{const G=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!G&&H.key.length===1&&U(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let re=j().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(H.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const Q=H.target,q=re.indexOf(Q);re=re.slice(q+1)}setTimeout(()=>K(re)),H.preventDefault()}})})})})})})});cj.displayName=gq;var yq="SelectItemAlignedPosition",uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=hi(fa,n),i=pi(fa,n),[a,l]=g.useState(null),[c,u]=g.useState(null),d=$e(e,P=>u(P)),f=Vm(n),p=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=i,b=g.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&m&&w&&v){const P=o.trigger.getBoundingClientRect(),S=c.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),_=v.getBoundingClientRect();if(o.dir!=="rtl"){const Q=_.left-S.left,q=T.left-Q,ce=P.left-q,ae=P.width+ce,ge=Math.max(ae,S.width),Re=window.innerWidth-Lr,Ee=z0(q,[Lr,Math.max(Lr,Re-ge)]);a.style.minWidth=ae+"px",a.style.left=Ee+"px"}else{const Q=S.right-_.right,q=window.innerWidth-T.right-Q,ce=window.innerWidth-P.right-q,ae=P.width+ce,ge=Math.max(ae,S.width),Re=window.innerWidth-Lr,Ee=z0(q,[Lr,Math.max(Lr,Re-ge)]);a.style.minWidth=ae+"px",a.style.right=Ee+"px"}const R=f(),j=window.innerHeight-Lr*2,V=m.scrollHeight,B=window.getComputedStyle(c),te=parseInt(B.borderTopWidth,10),K=parseInt(B.paddingTop,10),I=parseInt(B.borderBottomWidth,10),N=parseInt(B.paddingBottom,10),O=te+K+V+N+I,$=Math.min(w.offsetHeight*5,O),U=window.getComputedStyle(m),M=parseInt(U.paddingTop,10),F=parseInt(U.paddingBottom,10),J=P.top+P.height/2-Lr,Y=j-J,W=w.offsetHeight/2,H=w.offsetTop+W,G=te+K+H,oe=O-G;if(G<=J){const Q=R.length>0&&w===R[R.length-1].ref.current;a.style.bottom="0px";const q=c.clientHeight-m.offsetTop-m.offsetHeight,ce=Math.max(Y,W+(Q?F:0)+q+I),ae=G+ce;a.style.height=ae+"px"}else{const Q=R.length>0&&w===R[0].ref.current;a.style.top="0px";const ce=Math.max(J,te+m.offsetTop+(Q?M:0)+W)+oe;a.style.height=ce+"px",m.scrollTop=G-J+m.offsetTop}a.style.margin=`${Lr}px 0`,a.style.minHeight=$+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,o.trigger,o.valueNode,a,c,m,w,v,o.dir,r]);un(()=>b(),[b]);const[C,E]=g.useState();un(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const k=g.useCallback(P=>{P&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return h.jsx(wq,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:h.jsx(be.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});uj.displayName=yq;var vq="SelectPopperPosition",K0=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Lr,...o}=t,i=Um(n);return h.jsx(Zb,{...i,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});K0.displayName=vq;var[wq,tS]=Ac(fa,{}),q0="SelectViewport",dj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=pi(q0,n),i=tS(q0,n),a=$e(e,o.onViewportChange),l=g.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(zm.Slot,{scope:n,children:h.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:se(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const y=window.innerHeight-Lr*2,m=parseFloat(d.style.minHeight),w=parseFloat(d.style.height),v=Math.max(m,w);if(v<y){const x=v+p,b=Math.min(y,x),C=x-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});dj.displayName=q0;var fj="SelectGroup",[xq,bq]=Ac(fj),Sq=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Gr();return h.jsx(xq,{scope:n,id:s,children:h.jsx(be.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Sq.displayName=fj;var hj="SelectLabel",pj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=bq(hj,n);return h.jsx(be.div,{id:s.id,...r,ref:e})});pj.displayName=hj;var kp="SelectItem",[Cq,mj]=Ac(kp),gj=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=t,a=hi(kp,n),l=pi(kp,n),c=a.value===r,[u,d]=g.useState(o??""),[f,p]=g.useState(!1),y=$e(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,s)}),m=Gr(),w=g.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Cq,{scope:n,value:r,disabled:s,textId:m,isSelected:c,onItemTextChange:g.useCallback(x=>{d(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(zm.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx(be.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:y,onFocus:se(i.onFocus,()=>p(!0)),onBlur:se(i.onBlur,()=>p(!1)),onClick:se(i.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:se(i.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:se(i.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:se(i.onPointerMove,x=>{var b;w.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:se(i.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:se(i.onKeyDown,x=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(cq.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});gj.displayName=kp;var hu="SelectItemText",yj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,i=hi(hu,n),a=pi(hu,n),l=mj(hu,n),c=hq(hu,n),[u,d]=g.useState(null),f=$e(e,v=>d(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return un(()=>(m(y),()=>w(y)),[m,w,y]),h.jsxs(h.Fragment,{children:[h.jsx(be.span,{id:l.textId,...o,ref:f}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Cs.createPortal(o.children,i.valueNode):null]})});yj.displayName=hu;var vj="SelectItemIndicator",wj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return mj(vj,n).isSelected?h.jsx(be.span,{"aria-hidden":!0,...r,ref:e}):null});wj.displayName=vj;var G0="SelectScrollUpButton",xj=g.forwardRef((t,e)=>{const n=pi(G0,t.__scopeSelect),r=tS(G0,t.__scopeSelect),[s,o]=g.useState(!1),i=$e(e,r.onScrollButtonChange);return un(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(Sj,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});xj.displayName=G0;var J0="SelectScrollDownButton",bj=g.forwardRef((t,e)=>{const n=pi(J0,t.__scopeSelect),r=tS(J0,t.__scopeSelect),[s,o]=g.useState(!1),i=$e(e,r.onScrollButtonChange);return un(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(Sj,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});bj.displayName=J0;var Sj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=pi("SelectScrollButton",n),i=g.useRef(null),a=Vm(n),l=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>l(),[l]),un(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(be.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:se(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:se(s.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:se(s.onPointerLeave,()=>{l()})})}),Eq="SelectSeparator",Cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(be.div,{"aria-hidden":!0,...r,ref:e})});Cj.displayName=Eq;var Y0="SelectArrow",kq=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Um(n),o=hi(Y0,n),i=pi(Y0,n);return o.open&&i.position==="popper"?h.jsx(eS,{...s,...r,ref:e}):null});kq.displayName=Y0;function Ej(t){return t===""||t===void 0}var kj=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=g.useRef(null),o=$e(e,s),i=$b(n);return g.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[i,n]),h.jsx(Bm,{asChild:!0,children:h.jsx("select",{...r,ref:o,defaultValue:n})})});kj.displayName="BubbleSelect";function Tj(t){const e=wt(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function Pj(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=Tq(t,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Tq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Pq=ej,_j=nj,_q=sj,Nq=oj,Rq=ij,Nj=aj,Mq=dj,Rj=pj,Mj=gj,Aq=yj,Oq=wj,Aj=xj,Oj=bj,jj=Cj;const Dj=Pq,Ij=_q,nS=g.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(_j,{ref:r,className:ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(Nq,{asChild:!0,children:h.jsx(rM,{className:"h-4 w-4 opacity-50"})})]}));nS.displayName=_j.displayName;const Lj=g.forwardRef(({className:t,...e},n)=>h.jsx(Aj,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(OU,{className:"h-4 w-4"})}));Lj.displayName=Aj.displayName;const Fj=g.forwardRef(({className:t,...e},n)=>h.jsx(Oj,{ref:n,className:ie("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(rM,{className:"h-4 w-4"})}));Fj.displayName=Oj.displayName;const rS=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>h.jsx(Rq,{children:h.jsxs(Nj,{ref:s,className:ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(Lj,{}),h.jsx(Mq,{className:ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(Fj,{})]})}));rS.displayName=Nj.displayName;const jq=g.forwardRef(({className:t,...e},n)=>h.jsx(Rj,{ref:n,className:ie("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));jq.displayName=Rj.displayName;const ls=g.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(Mj,{ref:r,className:ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Oq,{children:h.jsx(Cc,{className:"h-4 w-4"})})}),h.jsx(Aq,{children:e})]}));ls.displayName=Mj.displayName;const Dq=g.forwardRef(({className:t,...e},n)=>h.jsx(jj,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",t),...e}));Dq.displayName=jj.displayName;const Iq=({isSticky:t,searchTerm:e,onSearchChange:n,sortBy:r,onSortChange:s,onLogoClick:o})=>{const[i,a]=g.useState(e),[l,c]=g.useState("#FFFFFF"),[u,d]=g.useState(1),[f,p]=g.useState("#FFFFFF"),[y,m]=g.useState(1),[w,v]=g.useState(!1),[x,b]=g.useState(""),[C,E]=g.useState(""),k=di();g.useEffect(()=>{(async()=>{try{const{data:R,error:j}=await we.from("site_settings").select("header_color, header_opacity, logo_url, logo_url_webp, toolbar_color, toolbar_opacity").maybeSingle();if(j){console.error("Error fetching header settings:",j);return}R&&(console.log("Header: Fetched settings:",R),c(R.header_color||"#FFFFFF"),d(R.header_opacity||1),p(R.toolbar_color||"#FFFFFF"),m(R.toolbar_opacity||1),b(R.logo_url||""),E(R.logo_url_webp||""))}catch(R){console.error("Error in fetchHeaderSettings:",R)}})()},[]),g.useEffect(()=>{a(e)},[e]),g.useEffect(()=>{const _=setTimeout(()=>{n(i),console.log("Searching for:",i)},300);return()=>clearTimeout(_)},[i,n]);const P={backgroundColor:l?`${l}${Math.round(u*255).toString(16).padStart(2,"0")}`:"#FFFFFF"},S={backgroundColor:f?`${f}${Math.round(y*255).toString(16).padStart(2,"0")}`:"#FFFFFF"},T=()=>h.jsxs(Dj,{value:r,onValueChange:_=>{s(_),k&&v(!1)},children:[h.jsx(nS,{className:"w-full md:w-[150px] bg-white/80",children:h.jsx(Ij,{placeholder:"Sort by"})}),h.jsxs(rS,{children:[h.jsx(ls,{value:"name-asc",children:"Name (A-Z)"}),h.jsx(ls,{value:"name-desc",children:"Name (Z-A)"}),h.jsx(ls,{value:"strain-asc",children:"Strain (A-Z)"}),h.jsx(ls,{value:"strain-desc",children:"Strain (Z-A)"}),h.jsx(ls,{value:"price-asc",children:"Price (Low to High)"}),h.jsx(ls,{value:"price-desc",children:"Price (High to Low)"}),h.jsx(ls,{value:"date-desc",children:"Newest First"}),h.jsx(ls,{value:"date-asc",children:"Oldest First"})]})]});return h.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 w-full shadow-sm pt-[env(safe-area-inset-top)]",style:P,children:h.jsxs("div",{className:"w-full",children:[h.jsx("div",{className:"flex items-center justify-center px-4 md:px-6 py-2 md:py-3 backdrop-blur-sm bg-white/10",children:h.jsxs("picture",{children:[C&&h.jsx("source",{srcSet:C,type:"image/webp",onError:_=>{console.log("WebP logo failed to load, falling back to PNG")}}),h.jsx("img",{src:x||"/placeholder.svg",alt:"Palmtree Smokes",className:"h-10 md:h-14 cursor-pointer transition-transform duration-200 hover:scale-105",onClick:o,onError:_=>{console.error("Failed to load logo:",_),_.currentTarget.src="/placeholder.svg"}})]})}),h.jsx("div",{className:"border-t border-gray-200/30 backdrop-blur-sm",style:S,children:h.jsx("div",{className:"container mx-auto px-4 py-1.5",children:h.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-3xl mx-auto",children:[h.jsx("div",{className:"flex-1",children:h.jsx(Fe,{placeholder:"Search products...",value:i,onChange:_=>a(_.target.value),className:"w-full bg-white/80"})}),k?h.jsxs(iM,{open:w,onOpenChange:v,children:[h.jsx(BU,{asChild:!0,children:h.jsx(xe,{variant:"outline",size:"icon",children:h.jsx(IU,{className:"h-4 w-4"})})}),h.jsxs(Wx,{side:"bottom",className:"h-[300px]",children:[h.jsx(lM,{children:h.jsx(cM,{children:"Sort"})}),h.jsx("div",{className:"flex flex-col gap-4 mt-4",children:h.jsx(T,{})})]})]}):h.jsx("div",{className:"hidden md:flex gap-4",children:h.jsx(T,{})})]})})})]})})},Lq=()=>{console.log("Index: Rendering Index component");const[t,e]=g.useState(""),[n,r]=g.useState("name-asc"),[s,o]=g.useState(()=>localStorage.getItem("isAgeVerified")==="true");Ub(),di(),g.useEffect(()=>{s&&(console.log("Index: Resetting scroll position after verification"),window.scrollTo(0,0))},[s]);const i=()=>{console.log("Index: Age verification successful"),o(!0)},a=u=>{console.log("Index: Search term changed:",u),e(u)},l=u=>{console.log("Index: Sort order changed:",u),r(u)},c=()=>{console.log("Index: Logo clicked, clearing verification and refreshing"),localStorage.removeItem("isAgeVerified"),o(!1)};return s?(console.log("Index: Rendering main content"),h.jsxs("div",{className:"min-h-screen bg-background",children:[h.jsx(Iq,{isSticky:!0,searchTerm:t,onSearchChange:a,sortBy:n,onSortChange:l,onLogoClick:c}),h.jsx("main",{className:"container mx-auto px-4 pt-[calc(theme(spacing.24)+theme(spacing.4))] md:pt-[calc(theme(spacing.32)+theme(spacing.4))]",children:h.jsx(B7,{searchTerm:t,sortBy:n})})]})):(console.log("Index: User not age verified, showing verification prompt"),h.jsx(Y7,{onVerified:i}))};function Fq(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:w,children:p})}function u(d,f){const p=(f==null?void 0:f[t][l])||a,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,$q(s,...e)]}function $q(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}var Ey="rovingFocusGroup.onEntryFocus",Bq={bubbles:!1,cancelable:!0},Wm="RovingFocusGroup",[Q0,$j,zq]=Dm(Wm),[Vq,Hm]=Fq(Wm,[zq]),[Uq,Wq]=Vq(Wm),Bj=g.forwardRef((t,e)=>h.jsx(Q0.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Q0.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Hq,{...t,ref:e})})}));Bj.displayName=Wm;var Hq=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=g.useRef(null),p=$e(e,f),y=rf(o),[m=null,w]=Qr({prop:i,defaultProp:a,onChange:l}),[v,x]=g.useState(!1),b=wt(c),C=$j(n),E=g.useRef(!1),[k,P]=g.useState(0);return g.useEffect(()=>{const S=f.current;if(S)return S.addEventListener(Ey,b),()=>S.removeEventListener(Ey,b)},[b]),h.jsx(Uq,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:m,onItemFocus:g.useCallback(S=>w(S),[w]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>P(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>P(S=>S-1),[]),children:h.jsx(be.div,{tabIndex:v||k===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:se(t.onMouseDown,()=>{E.current=!0}),onFocus:se(t.onFocus,S=>{const T=!E.current;if(S.target===S.currentTarget&&T&&!v){const _=new CustomEvent(Ey,Bq);if(S.currentTarget.dispatchEvent(_),!_.defaultPrevented){const R=C().filter(K=>K.focusable),j=R.find(K=>K.active),V=R.find(K=>K.id===m),te=[j,V,...R].filter(Boolean).map(K=>K.ref.current);Uj(te,u)}}E.current=!1}),onBlur:se(t.onBlur,()=>x(!1))})})}),zj="RovingFocusGroupItem",Vj=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...i}=t,a=Gr(),l=o||a,c=Wq(zj,n),u=c.currentTabStopId===l,d=$j(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return g.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Q0.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:h.jsx(be.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:se(t.onMouseDown,y=>{r?c.onItemFocus(l):y.preventDefault()}),onFocus:se(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:se(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){c.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=Gq(y,c.orientation,c.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(y.currentTarget);v=c.loop?Jq(v,x+1):v.slice(x+1)}setTimeout(()=>Uj(v))}})})})});Vj.displayName=zj;var Kq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Gq(t,e,n){const r=qq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kq[r]}function Uj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Jq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Wj=Bj,Hj=Vj,sS="Tabs",[Yq,Xoe]=Es(sS,[Hm]),Kj=Hm(),[Qq,oS]=Yq(sS),qj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=rf(a),[d,f]=Qr({prop:r,onChange:s,defaultProp:o});return h.jsx(Qq,{scope:n,baseId:Gr(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:l,children:h.jsx(be.div,{dir:u,"data-orientation":i,...c,ref:e})})});qj.displayName=sS;var Gj="TabsList",Jj=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=oS(Gj,n),i=Kj(n);return h.jsx(Wj,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:h.jsx(be.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});Jj.displayName=Gj;var Yj="TabsTrigger",Qj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,i=oS(Yj,n),a=Kj(n),l=eD(i.baseId,r),c=tD(i.baseId,r),u=r===i.value;return h.jsx(Hj,{asChild:!0,...a,focusable:!s,active:u,children:h.jsx(be.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:e,onMouseDown:se(t.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:se(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:se(t.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!s&&d&&i.onValueChange(r)})})})});Qj.displayName=Yj;var Xj="TabsContent",Zj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=t,a=oS(Xj,n),l=eD(a.baseId,r),c=tD(a.baseId,r),u=r===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(dn,{present:s||u,children:({present:f})=>h.jsx(be.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&o})})});Zj.displayName=Xj;function eD(t,e){return`${t}-trigger-${e}`}function tD(t,e){return`${t}-content-${e}`}var Xq=qj,nD=Jj,rD=Qj,sD=Zj;const iS=Xq,Km=g.forwardRef(({className:t,...e},n)=>h.jsx(nD,{ref:n,className:ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Km.displayName=nD.displayName;const Un=g.forwardRef(({className:t,...e},n)=>h.jsx(rD,{ref:n,className:ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Un.displayName=rD.displayName;const Wn=g.forwardRef(({className:t,...e},n)=>h.jsx(sD,{ref:n,className:ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Wn.displayName=sD.displayName;const Zq=()=>Tc({queryKey:["products"],queryFn:async()=>{console.log("useProducts: Starting to fetch all products");const{data:t,error:e}=await we.from("products").select(`
          *,
          product_categories!left (
            categories!left (
              name
            )
          )
        `);if(e)throw console.error("useProducts: Error fetching products:",e),e;console.log("useProducts: Raw products data:",t);const n=t.map(r=>{var s;return{...r,categories:((s=r.product_categories)==null?void 0:s.map(o=>{var i;return(i=o.categories)==null?void 0:i.name}).filter(Boolean))||[]}});return console.log("useProducts: Transformed products:",n),n}}),oD=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:ie("w-full caption-bottom text-sm",t),...e})}));oD.displayName="Table";const iD=g.forwardRef(({className:t,...e},n)=>h.jsx("thead",{ref:n,className:ie("[&_tr]:border-b",t),...e}));iD.displayName="TableHeader";const aD=g.forwardRef(({className:t,...e},n)=>h.jsx("tbody",{ref:n,className:ie("[&_tr:last-child]:border-0",t),...e}));aD.displayName="TableBody";const eG=g.forwardRef(({className:t,...e},n)=>h.jsx("tfoot",{ref:n,className:ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));eG.displayName="TableFooter";const aS=g.forwardRef(({className:t,...e},n)=>h.jsx("tr",{ref:n,className:ie("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));aS.displayName="TableRow";const X0=g.forwardRef(({className:t,...e},n)=>h.jsx("th",{ref:n,className:ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));X0.displayName="TableHead";const lS=g.forwardRef(({className:t,...e},n)=>h.jsx("td",{ref:n,className:ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));lS.displayName="TableCell";const tG=g.forwardRef(({className:t,...e},n)=>h.jsx("caption",{ref:n,className:ie("mt-4 text-sm text-muted-foreground",t),...e}));tG.displayName="TableCaption";var nG=t=>{switch(t){case"success":return oG;case"info":return aG;case"warning":return iG;case"error":return lG;default:return null}},rG=Array(12).fill(0),sG=({visible:t})=>ee.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},ee.createElement("div",{className:"sonner-spinner"},rG.map((e,n)=>ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),oG=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),iG=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aG=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lG=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cG=()=>{let[t,e]=ee.useState(document.hidden);return ee.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Z0=1,uG=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Z0++,o=this.toasts.find(a=>a.id===s),i=t.dismissible===void 0?!0:t.dismissible;return o?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:i,title:n}):a):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0;return r.then(async o=>{if(fG(o)&&!o.ok){s=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${o.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${o.status}`):e.description;this.create({id:n,type:"error",message:i,description:a})}else if(e.success!==void 0){s=!1;let i=typeof e.success=="function"?await e.success(o):e.success,a=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"success",message:i,description:a})}}).catch(async o=>{if(e.error!==void 0){s=!1;let i=typeof e.error=="function"?await e.error(o):e.error,a=typeof e.description=="function"?await e.description(o):e.description;this.create({id:n,type:"error",message:i,description:a})}}).finally(()=>{var o;s&&(this.dismiss(n),n=void 0),(o=e.finally)==null||o.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Z0++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},nr=new uG,dG=(t,e)=>{let n=(e==null?void 0:e.id)||Z0++;return nr.addToast({title:t,...e,id:n}),n},fG=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",hG=dG,pG=()=>nr.toasts,ve=Object.assign(hG,{success:nr.success,info:nr.info,warning:nr.warning,error:nr.error,custom:nr.custom,message:nr.message,promise:nr.promise,dismiss:nr.dismiss,loading:nr.loading},{getHistory:pG});function mG(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}mG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zf(t){return t.label!==void 0}var gG=3,yG="32px",vG=4e3,wG=356,xG=14,bG=20,SG=200;function CG(...t){return t.filter(Boolean).join(" ")}var EG=t=>{var e,n,r,s,o,i,a,l,c,u;let{invert:d,toast:f,unstyled:p,interacting:y,setHeights:m,visibleToasts:w,heights:v,index:x,toasts:b,expanded:C,removeToast:E,defaultRichColors:k,closeButton:P,style:S,cancelButtonStyle:T,actionButtonStyle:_,className:R="",descriptionClassName:j="",duration:V,position:B,gap:te,loadingIcon:K,expandByDefault:I,classNames:N,icons:O,closeButtonAriaLabel:$="Close toast",pauseWhenPageIsHidden:U,cn:M}=t,[F,J]=ee.useState(!1),[Y,W]=ee.useState(!1),[H,G]=ee.useState(!1),[oe,re]=ee.useState(!1),[Q,q]=ee.useState(0),[ce,ae]=ee.useState(0),ge=ee.useRef(null),Re=ee.useRef(null),Ee=x===0,Be=x+1<=w,Te=f.type,mt=f.dismissible!==!1,Qt=f.className||"",Xt=f.descriptionClassName||"",Ye=ee.useMemo(()=>v.findIndex(Ne=>Ne.toastId===f.id)||0,[v,f.id]),$t=ee.useMemo(()=>{var Ne;return(Ne=f.closeButton)!=null?Ne:P},[f.closeButton,P]),Ze=ee.useMemo(()=>f.duration||V||vG,[f.duration,V]),Mt=ee.useRef(0),nt=ee.useRef(0),gt=ee.useRef(0),fn=ee.useRef(null),[yt,Ut]=B.split("-"),At=ee.useMemo(()=>v.reduce((Ne,et,qe)=>qe>=Ye?Ne:Ne+et.height,0),[v,Ye]),Zn=cG(),eo=f.invert||d,to=Te==="loading";nt.current=ee.useMemo(()=>Ye*te+At,[Ye,At]),ee.useEffect(()=>{J(!0)},[]),ee.useLayoutEffect(()=>{if(!F)return;let Ne=Re.current,et=Ne.style.height;Ne.style.height="auto";let qe=Ne.getBoundingClientRect().height;Ne.style.height=et,ae(qe),m(Zt=>Zt.find(En=>En.toastId===f.id)?Zt.map(En=>En.toastId===f.id?{...En,height:qe}:En):[{toastId:f.id,height:qe,position:f.position},...Zt])},[F,f.title,f.description,m,f.id]);let gr=ee.useCallback(()=>{W(!0),q(nt.current),m(Ne=>Ne.filter(et=>et.toastId!==f.id)),setTimeout(()=>{E(f)},SG)},[f,E,m,nt]);ee.useEffect(()=>{if(f.promise&&Te==="loading"||f.duration===1/0||f.type==="loading")return;let Ne,et=Ze;return C||y||U&&Zn?(()=>{if(gt.current<Mt.current){let qe=new Date().getTime()-Mt.current;et=et-qe}gt.current=new Date().getTime()})():et!==1/0&&(Mt.current=new Date().getTime(),Ne=setTimeout(()=>{var qe;(qe=f.onAutoClose)==null||qe.call(f,f),gr()},et)),()=>clearTimeout(Ne)},[C,y,I,f,Ze,gr,f.promise,Te,U,Zn]),ee.useEffect(()=>{let Ne=Re.current;if(Ne){let et=Ne.getBoundingClientRect().height;return ae(et),m(qe=>[{toastId:f.id,height:et,position:f.position},...qe]),()=>m(qe=>qe.filter(Zt=>Zt.toastId!==f.id))}},[m,f.id]),ee.useEffect(()=>{f.delete&&gr()},[gr,f.delete]);function Oa(){return O!=null&&O.loading?ee.createElement("div",{className:"sonner-loader","data-visible":Te==="loading"},O.loading):K?ee.createElement("div",{className:"sonner-loader","data-visible":Te==="loading"},K):ee.createElement(sG,{visible:Te==="loading"})}return ee.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Re,className:M(R,Qt,N==null?void 0:N.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,N==null?void 0:N.default,N==null?void 0:N[Te],(n=f==null?void 0:f.classNames)==null?void 0:n[Te]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:k,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":F,"data-promise":!!f.promise,"data-removed":Y,"data-visible":Be,"data-y-position":yt,"data-x-position":Ut,"data-index":x,"data-front":Ee,"data-swiping":H,"data-dismissible":mt,"data-type":Te,"data-invert":eo,"data-swipe-out":oe,"data-expanded":!!(C||I&&F),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${Y?Q:nt.current}px`,"--initial-height":I?"auto":`${ce}px`,...S,...f.style},onPointerDown:Ne=>{to||!mt||(ge.current=new Date,q(nt.current),Ne.target.setPointerCapture(Ne.pointerId),Ne.target.tagName!=="BUTTON"&&(G(!0),fn.current={x:Ne.clientX,y:Ne.clientY}))},onPointerUp:()=>{var Ne,et,qe,Zt;if(oe||!mt)return;fn.current=null;let En=Number(((Ne=Re.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount").replace("px",""))||0),_s=new Date().getTime()-((et=ge.current)==null?void 0:et.getTime()),ja=Math.abs(En)/_s;if(Math.abs(En)>=bG||ja>.11){q(nt.current),(qe=f.onDismiss)==null||qe.call(f,f),gr(),re(!0);return}(Zt=Re.current)==null||Zt.style.setProperty("--swipe-amount","0px"),G(!1)},onPointerMove:Ne=>{var et;if(!fn.current||!mt)return;let qe=Ne.clientY-fn.current.y,Zt=Ne.clientX-fn.current.x,En=(yt==="top"?Math.min:Math.max)(0,qe),_s=Ne.pointerType==="touch"?10:2;Math.abs(En)>_s?(et=Re.current)==null||et.style.setProperty("--swipe-amount",`${qe}px`):Math.abs(Zt)>_s&&(fn.current=null)}},$t&&!f.jsx?ee.createElement("button",{"aria-label":$,"data-disabled":to,"data-close-button":!0,onClick:to||!mt?()=>{}:()=>{var Ne;gr(),(Ne=f.onDismiss)==null||Ne.call(f,f)},className:M(N==null?void 0:N.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||ee.isValidElement(f.title)?f.jsx||f.title:ee.createElement(ee.Fragment,null,Te||f.icon||f.promise?ee.createElement("div",{"data-icon":"",className:M(N==null?void 0:N.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Oa():null,f.type!=="loading"?f.icon||(O==null?void 0:O[Te])||nG(Te):null):null,ee.createElement("div",{"data-content":"",className:M(N==null?void 0:N.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},ee.createElement("div",{"data-title":"",className:M(N==null?void 0:N.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?ee.createElement("div",{"data-description":"",className:M(j,Xt,N==null?void 0:N.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),ee.isValidElement(f.cancel)?f.cancel:f.cancel&&Zf(f.cancel)?ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:Ne=>{var et,qe;Zf(f.cancel)&&mt&&((qe=(et=f.cancel).onClick)==null||qe.call(et,Ne),gr())},className:M(N==null?void 0:N.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,ee.isValidElement(f.action)?f.action:f.action&&Zf(f.action)?ee.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||_,onClick:Ne=>{var et,qe;Zf(f.action)&&(Ne.defaultPrevented||((qe=(et=f.action).onClick)==null||qe.call(et,Ne),gr()))},className:M(N==null?void 0:N.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function Xk(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var kG=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:i,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:f=gG,toastOptions:p,dir:y=Xk(),gap:m=xG,loadingIcon:w,icons:v,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:b,cn:C=CG}=t,[E,k]=ee.useState([]),P=ee.useMemo(()=>Array.from(new Set([n].concat(E.filter(U=>U.position).map(U=>U.position)))),[E,n]),[S,T]=ee.useState([]),[_,R]=ee.useState(!1),[j,V]=ee.useState(!1),[B,te]=ee.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=ee.useRef(null),I=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=ee.useRef(null),O=ee.useRef(!1),$=ee.useCallback(U=>{var M;(M=E.find(F=>F.id===U.id))!=null&&M.delete||nr.dismiss(U.id),k(F=>F.filter(({id:J})=>J!==U.id))},[E]);return ee.useEffect(()=>nr.subscribe(U=>{if(U.dismiss){k(M=>M.map(F=>F.id===U.id?{...F,delete:!0}:F));return}setTimeout(()=>{Vd.flushSync(()=>{k(M=>{let F=M.findIndex(J=>J.id===U.id);return F!==-1?[...M.slice(0,F),{...M[F],...U},...M.slice(F+1)]:[U,...M]})})})}),[]),ee.useEffect(()=>{if(l!=="system"){te(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?te("dark"):te("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{te(U?"dark":"light")})},[l]),ee.useEffect(()=>{E.length<=1&&R(!1)},[E]),ee.useEffect(()=>{let U=M=>{var F,J;r.every(Y=>M[Y]||M.code===Y)&&(R(!0),(F=K.current)==null||F.focus()),M.code==="Escape"&&(document.activeElement===K.current||(J=K.current)!=null&&J.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),ee.useEffect(()=>{if(K.current)return()=>{N.current&&(N.current.focus({preventScroll:!0}),N.current=null,O.current=!1)}},[K.current]),E.length?ee.createElement("section",{"aria-label":`${x} ${I}`,tabIndex:-1},P.map((U,M)=>{var F;let[J,Y]=U.split("-");return ee.createElement("ol",{key:U,dir:y==="auto"?Xk():y,tabIndex:-1,ref:K,className:i,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":J,"data-x-position":Y,style:{"--front-toast-height":`${((F=S[0])==null?void 0:F.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||yG,"--width":`${wG}px`,"--gap":`${m}px`,...d},onBlur:W=>{O.current&&!W.currentTarget.contains(W.relatedTarget)&&(O.current=!1,N.current&&(N.current.focus({preventScroll:!0}),N.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||O.current||(O.current=!0,N.current=W.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{j||R(!1)},onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},E.filter(W=>!W.position&&M===0||W.position===U).map((W,H)=>{var G,oe;return ee.createElement(EG,{key:W.id,icons:v,index:H,toast:W,defaultRichColors:c,duration:(G=p==null?void 0:p.duration)!=null?G:u,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:e,visibleToasts:f,closeButton:(oe=p==null?void 0:p.closeButton)!=null?oe:o,interacting:j,position:U,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:$,toasts:E.filter(re=>re.position==W.position),heights:S.filter(re=>re.position==W.position),setHeights:T,expandByDefault:s,gap:m,loadingIcon:w,expanded:_,pauseWhenPageIsHidden:b,cn:C})}))})):null};const wd=async t=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("Could not get canvas context");const r=new Image;await new Promise((i,a)=>{r.onload=()=>i(),r.onerror=()=>a(new Error("Failed to load image")),r.src=URL.createObjectURL(t)}),e.width=r.width,e.height=r.height,n.drawImage(r,0,0);const o=await new Promise((i,a)=>{e.toBlob(l=>{l?i(l):a(new Error("Failed to convert to WebP"))},"image/webp",.8)});return URL.revokeObjectURL(r.src),{webpBlob:o,originalFile:t}},TG=t=>t.type.startsWith("image/");function Yn({onUploadComplete:t,onUpload:e,onDelete:n,accept:r="image/*",bucket:s="media",folderPath:o="",fileName:i,className:a,buttonContent:l="Upload File",value:c}){const[u,d]=g.useState(!1),f=async p=>{var m;const y=(m=p.target.files)==null?void 0:m[0];if(y)try{d(!0),console.log("🚀 Starting file upload process:",{fileName:y.name,fileType:y.type,fileSize:y.size,folderPath:o,bucket:s});const w=y.name.split(".").pop(),v=i?`${i}.${w}`:`${Math.random().toString(36).substring(2)}-${Date.now()}.${w}`,x=o?`${o}/${v}`.replace(/\/+/g,"/"):v;console.log("📁 Uploading file to path:",x);const{error:b,data:C}=await we.storage.from(s).upload(x,y,{cacheControl:"3600",upsert:!0});if(b)throw console.error("❌ Error uploading original file:",b),b;console.log("✅ Original file uploaded successfully:",C);const{data:{publicUrl:E}}=we.storage.from(s).getPublicUrl(x);if(console.log("🔗 File public URL:",E),TG(y))try{console.log("🔄 Starting WebP conversion");const{webpBlob:k}=await wd(y),P=`${o}/${i||y.name.split(".")[0]}.webp`;console.log("📤 Uploading WebP version to:",P);const{error:S}=await we.storage.from(s).upload(P,k,{contentType:"image/webp",cacheControl:"3600",upsert:!0});S?console.error("⚠️ WebP upload error:",S):console.log("✅ WebP version uploaded successfully")}catch(k){console.error("⚠️ WebP conversion failed:",k)}t&&t(E),e&&e(E),ve.success("File uploaded successfully")}catch(w){console.error("❌ Upload error:",w),ve.error("Failed to upload file")}finally{d(!1)}};return h.jsx("div",{className:a,children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs(xe,{variant:"outline",className:"relative",disabled:u,children:[u?h.jsxs(h.Fragment,{children:[h.jsx(Vx,{className:"h-4 w-4 animate-spin mr-2"}),"Uploading..."]}):l,h.jsx("input",{type:"file",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:f,accept:r,disabled:u})]}),c&&n&&h.jsx(xe,{variant:"outline",size:"sm",onClick:n,children:"Remove"})]})})}const PG=t=>t===null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);function _G({column:t,product:e,isEditing:n,editValues:r,categories:s,onEditChange:o,onMediaClick:i,onDeleteMedia:a,onImageUpload:l,onVideoUpload:c}){const{data:u}=Tc({queryKey:["product_categories",e.id],queryFn:async()=>{console.log("ProductTableCell: Fetching categories for product:",e.id);const{data:m,error:w}=await we.from("product_categories").select("categories(name)").eq("product_id",e.id);if(w)throw console.error("ProductTableCell: Error fetching product categories:",w),w;const v=m.map(x=>{var b;return(b=x.categories)==null?void 0:b.name}).filter(Boolean);return console.log("ProductTableCell: Retrieved categories:",v),v},enabled:n}),d=(m,w)=>{console.log("ProductTableCell: Updating field:",m,"with value:",w),o({...r,[m]:w})},f=m=>{console.log("ProductTableCell: Category selected:",m);const w=r.categories||u||[],v=w.includes(m)?w.filter(x=>x!==m):[...w,m];o({...r,categories:v})},p=m=>{var w,v,x,b;if(m.stopPropagation(),m.key==="Tab"){m.preventDefault();const C=m.shiftKey?(v=(w=m.currentTarget.parentElement)==null?void 0:w.previousElementSibling)==null?void 0:v.querySelector("input"):(b=(x=m.currentTarget.parentElement)==null?void 0:x.nextElementSibling)==null?void 0:b.querySelector("input");C instanceof HTMLElement&&C.focus()}},y=()=>{var m,w,v,x,b,C;switch(t){case"name":case"strain":case"description":return n?h.jsx(Fe,{value:((m=r[t])==null?void 0:m.toString())||"",onChange:E=>d(t,E.target.value),onClick:E=>E.stopPropagation(),onKeyDown:p,tabIndex:0}):((w=e[t])==null?void 0:w.toString())||"-";case"image":return h.jsxs("div",{className:"flex items-center gap-2",onClick:E=>E.stopPropagation(),children:[e.image_url?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xe,{variant:"ghost",size:"icon",className:"p-0",onClick:E=>{E.stopPropagation(),i==null||i("image",e.image_url)},tabIndex:n?0:-1,children:h.jsx("img",{src:e.image_url,alt:e.name,className:"w-16 h-16 object-cover rounded-md"})}),n&&h.jsx(xe,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:E=>{E.stopPropagation(),a==null||a(e.id,"image")},tabIndex:0,children:h.jsx(la,{className:"h-4 w-4"})})]}):n&&h.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gray-100 rounded-md",children:h.jsx(wm,{className:"h-6 w-6 text-gray-400"})}),n&&h.jsx(Yn,{onUploadComplete:E=>l==null?void 0:l(e.id,E),accept:"image/*",bucket:"media",folderPath:`products/${e.id}`,fileName:"image",className:"w-8",buttonContent:h.jsx(id,{className:"h-4 w-4"})})]});case"video_url":return h.jsxs("div",{className:"flex items-center gap-2",onClick:E=>E.stopPropagation(),children:[e.video_url&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xe,{variant:"ghost",size:"icon",onClick:E=>{E.stopPropagation(),i==null||i("video",e.video_url)},tabIndex:n?0:-1,children:h.jsx(sM,{className:"h-4 w-4"})}),n&&h.jsx(xe,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:E=>{E.stopPropagation(),a==null||a(e.id,"video")},tabIndex:0,children:h.jsx(la,{className:"h-4 w-4"})})]}),n&&h.jsx(Yn,{onUploadComplete:E=>c==null?void 0:c(e.id,E),accept:"video/*",bucket:"media",folderPath:`products/${e.id}`,fileName:"video",className:"w-8",buttonContent:h.jsx(id,{className:"h-4 w-4"})})]});case"categories":return n?h.jsx("div",{className:"flex flex-col gap-2",onClick:E=>E.stopPropagation(),children:s==null?void 0:s.map(E=>{var k;return h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs(Dj,{value:(k=r.categories)!=null&&k.includes(E.name)?E.name:void 0,onValueChange:()=>f(E.name),children:[h.jsx(nS,{className:"w-full",children:h.jsx(Ij,{placeholder:E.name})}),h.jsx(rS,{children:h.jsx(ls,{value:E.name,children:E.name})})]})},E.id)})}):h.jsx("div",{children:((v=e.categories)==null?void 0:v.join(", "))||"-"});case"stock":return n?h.jsx(Fe,{type:"number",value:((x=r.stock)==null?void 0:x.toString())||"0",onChange:E=>d("stock",parseInt(E.target.value)),onClick:E=>E.stopPropagation(),onKeyDown:p,tabIndex:0}):((b=e.stock)==null?void 0:b.toString())||"-";case"regular_price":case"shipping_price":return n?h.jsx(Fe,{type:"number",value:((C=r[t])==null?void 0:C.toString())||"0",onChange:E=>d(t,parseFloat(E.target.value)),onClick:E=>E.stopPropagation(),onKeyDown:p,tabIndex:0}):PG(e[t]);default:return null}};return h.jsx(lS,{onClick:m=>m.stopPropagation(),children:y()})}function NG({productId:t,isEditing:e,onSave:n,onCancel:r,onDelete:s,onEdit:o}){return h.jsx(lS,{className:"text-right",children:h.jsx("div",{className:"flex justify-end gap-2",children:e?h.jsxs(h.Fragment,{children:[h.jsx(xe,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:i=>{i.stopPropagation(),n()},"aria-label":"Save changes",children:h.jsx(Cc,{className:"h-4 w-4"})}),h.jsx(xe,{size:"icon",variant:"destructive",className:"h-8 w-8",onClick:i=>{i.stopPropagation(),r()},"aria-label":"Cancel editing",children:h.jsx(ui,{className:"h-4 w-4"})})]}):h.jsxs(h.Fragment,{children:[h.jsx(xe,{size:"icon",variant:"secondary",className:"h-8 w-8",onClick:i=>{i.stopPropagation(),o()},"aria-label":"Edit product",children:h.jsx(Ux,{className:"h-4 w-4"})}),h.jsx(xe,{size:"icon",variant:"destructive",className:"h-8 w-8",onClick:i=>{i.stopPropagation(),s(t)},"aria-label":"Delete product",children:h.jsx(la,{className:"h-4 w-4"})})]})})})}const cS=ZR,RG=eM,lD=g.forwardRef(({className:t,...e},n)=>h.jsx(mm,{ref:n,className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));lD.displayName=mm.displayName;const qm=g.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(RG,{children:[h.jsx(lD,{}),h.jsxs(gm,{ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs(tM,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(ui,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qm.displayName=gm.displayName;const uS=({className:t,...e})=>h.jsx("div",{className:ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});uS.displayName="DialogHeader";const dS=g.forwardRef(({className:t,...e},n)=>h.jsx(ym,{ref:n,className:ie("text-lg font-semibold leading-none tracking-tight",t),...e}));dS.displayName=ym.displayName;const MG=g.forwardRef(({className:t,...e},n)=>h.jsx(vm,{ref:n,className:ie("text-sm text-muted-foreground",t),...e}));MG.displayName=vm.displayName;var AG="Label",cD=g.forwardRef((t,e)=>h.jsx(be.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));cD.displayName=AG;var uD=cD;const OG=Sa("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=g.forwardRef(({className:t,...e},n)=>h.jsx(uD,{ref:n,className:ie(OG(),t),...e}));_e.displayName=uD.displayName;const Oc=g.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Oc.displayName="Textarea";function dD({open:t,onOpenChange:e,product:n,editValues:r,categories:s=[],onEditChange:o,onSave:i,onCancel:a,onImageUpload:l,onVideoUpload:c,onDeleteMedia:u,isSaving:d=!1}){var p,y,m,w;const f=v=>{console.log("ProductEditDialog: Category toggled:",v);const x=r.categories||[],b=x.includes(v)?x.filter(C=>C!==v):[...x,v];o({...r,categories:b})};return h.jsx(cS,{open:t,onOpenChange:e,children:h.jsxs(qm,{className:"max-w-2xl",children:[h.jsx(uS,{children:h.jsx(dS,{children:"Edit Product"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"name",children:"Name"}),h.jsx(Fe,{id:"name",value:r.name||"",onChange:v=>o({...r,name:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"strain",children:"Strain"}),h.jsx(Fe,{id:"strain",value:r.strain||"",onChange:v=>o({...r,strain:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"description",children:"Description"}),h.jsx(Oc,{id:"description",value:r.description||"",onChange:v=>o({...r,description:v.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{children:"Categories"}),h.jsx("div",{className:"grid grid-cols-2 gap-2 border rounded-md p-4",children:s.map(v=>{var x;return h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Vb,{id:v.id,checked:(x=r.categories)==null?void 0:x.includes(v.name),onCheckedChange:()=>f(v.name)}),h.jsx("label",{htmlFor:v.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:v.name})]},v.id)})}),((p=r.categories)==null?void 0:p.length)>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.categories.map(v=>h.jsx("div",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md text-sm",children:v},v))})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{children:"Image"}),h.jsxs("div",{className:"flex items-center gap-2",children:[n.image_url?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("img",{src:n.image_url,alt:n.name,className:"w-16 h-16 object-cover rounded-md"}),h.jsx(xe,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:()=>u(n.id,"image"),children:h.jsx(la,{className:"h-4 w-4"})})]}):null,h.jsx(Yn,{onUploadComplete:v=>l(n.id,v),accept:"image/*",bucket:"media",folderPath:`products/${n.id}`,fileName:"image",className:"w-8",buttonContent:h.jsx(id,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{children:"Video"}),h.jsxs("div",{className:"flex items-center gap-2",children:[n.video_url?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("video",{src:n.video_url,className:"w-16 h-16 object-cover rounded-md"}),h.jsx(xe,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:()=>u(n.id,"video"),children:h.jsx(la,{className:"h-4 w-4"})})]}):null,h.jsx(Yn,{onUploadComplete:v=>c(n.id,v),accept:"video/*",bucket:"media",folderPath:`products/${n.id}`,fileName:"video",className:"w-8",buttonContent:h.jsx(id,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"stock",children:"Stock"}),h.jsx(Fe,{id:"stock",type:"number",value:((y=r.stock)==null?void 0:y.toString())||"0",onChange:v=>o({...r,stock:parseInt(v.target.value)})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"regular_price",children:"Regular Price"}),h.jsx(Fe,{id:"regular_price",type:"number",step:"0.01",value:((m=r.regular_price)==null?void 0:m.toString())||"0",onChange:v=>o({...r,regular_price:parseFloat(v.target.value)})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"shipping_price",children:"Shipping Price"}),h.jsx(Fe,{id:"shipping_price",type:"number",step:"0.01",value:((w=r.shipping_price)==null?void 0:w.toString())||"0",onChange:v=>o({...r,shipping_price:parseFloat(v.target.value)})})]})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(xe,{variant:"outline",onClick:a,disabled:d,children:"Cancel"}),h.jsx(xe,{onClick:i,disabled:d,children:d?h.jsxs(h.Fragment,{children:[h.jsx(Vx,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})}var Zk=1,jG=.9,DG=.8,IG=.17,ky=.1,Ty=.999,LG=.9999,FG=.99,$G=/[\\\/_+.#"@\[\(\{&]/,BG=/[\\\/_+.#"@\[\(\{&]/g,zG=/[\s-]/,fD=/[\s-]/g;function ew(t,e,n,r,s,o,i){if(o===e.length)return s===t.length?Zk:FG;var a=`${s},${o}`;if(i[a]!==void 0)return i[a];for(var l=r.charAt(o),c=n.indexOf(l,s),u=0,d,f,p,y;c>=0;)d=ew(t,e,n,r,c+1,o+1,i),d>u&&(c===s?d*=Zk:$G.test(t.charAt(c-1))?(d*=DG,p=t.slice(s,c-1).match(BG),p&&s>0&&(d*=Math.pow(Ty,p.length))):zG.test(t.charAt(c-1))?(d*=jG,y=t.slice(s,c-1).match(fD),y&&s>0&&(d*=Math.pow(Ty,y.length))):(d*=IG,s>0&&(d*=Math.pow(Ty,c-s))),t.charAt(c)!==e.charAt(o)&&(d*=LG)),(d<ky&&n.charAt(c-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(c-1)!==r.charAt(o))&&(f=ew(t,e,n,r,c+1,o+2,i),f*ky>d&&(d=f*ky)),d>u&&(u=d),c=n.indexOf(l,c+1);return i[a]=u,u}function eT(t){return t.toLowerCase().replace(fD," ")}function VG(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,ew(t,e,eT(t),eT(e),0,0,{})}function Nn(){return Nn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nn.apply(null,arguments)}function Nl(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function UG(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function hD(...t){return e=>t.forEach(n=>UG(n,e))}function af(...t){return g.useCallback(hD(...t),t)}function WG(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),l=n.length;n=[...n,i];function c(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>y,Object.values(y));return g.createElement(m.Provider,{value:w},p)}function u(d,f){const p=(f==null?void 0:f[t][l])||a,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${o}\``)}return c.displayName=o+"Provider",[c,u]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,HG(s,...e)]}function HG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(o)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}const tw=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},KG=Fw.useId||(()=>{});let qG=0;function Py(t){const[e,n]=g.useState(KG());return tw(()=>{t||n(r=>r??String(qG++))},[t]),t||(e?`radix-${e}`:"")}function ha(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function GG({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=JG({defaultProp:e,onChange:n}),o=t!==void 0,i=o?t:r,a=ha(n),l=g.useCallback(c=>{if(o){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[o,t,s,a]);return[i,l]}function JG({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),o=ha(e);return g.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}const fS=g.forwardRef((t,e)=>{const{children:n,...r}=t,s=g.Children.toArray(n),o=s.find(QG);if(o){const i=o.props.children,a=s.map(l=>l===o?g.Children.count(i)>1?g.Children.only(null):g.isValidElement(i)?i.props.children:null:l);return g.createElement(nw,Nn({},r,{ref:e}),g.isValidElement(i)?g.cloneElement(i,void 0,a):null)}return g.createElement(nw,Nn({},r,{ref:e}),n)});fS.displayName="Slot";const nw=g.forwardRef((t,e)=>{const{children:n,...r}=t;return g.isValidElement(n)?g.cloneElement(n,{...XG(r,n.props),ref:e?hD(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});nw.displayName="SlotClone";const YG=({children:t})=>g.createElement(g.Fragment,null,t);function QG(t){return g.isValidElement(t)&&t.type===YG}function XG(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{o(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}const ZG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Or=ZG.reduce((t,e)=>{const n=g.forwardRef((r,s)=>{const{asChild:o,...i}=r,a=o?fS:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,Nn({},i,{ref:s}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function eJ(t,e){t&&Cs.flushSync(()=>t.dispatchEvent(e))}function tJ(t,e=globalThis==null?void 0:globalThis.document){const n=ha(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const rw="dismissableLayer.update",nJ="dismissableLayer.pointerDownOutside",rJ="dismissableLayer.focusOutside";let tT;const sJ=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),oJ=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(sJ),[d,f]=g.useState(null),p=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,y]=g.useState({}),m=af(e,S=>f(S)),w=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(v),b=d?w.indexOf(d):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,E=b>=x,k=iJ(S=>{const T=S.target,_=[...u.branches].some(R=>R.contains(T));!E||_||(o==null||o(S),a==null||a(S),S.defaultPrevented||l==null||l())},p),P=aJ(S=>{const T=S.target;[...u.branches].some(R=>R.contains(T))||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},p);return tJ(S=>{b===u.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),nT(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tT)}},[d,p,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),nT())},[d,u]),g.useEffect(()=>{const S=()=>y({});return document.addEventListener(rw,S),()=>document.removeEventListener(rw,S)},[]),g.createElement(Or.div,Nn({},c,{ref:m,style:{pointerEvents:C?E?"auto":"none":void 0,...t.style},onFocusCapture:Nl(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Nl(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Nl(t.onPointerDownCapture,k.onPointerDownCapture)}))});function iJ(t,e=globalThis==null?void 0:globalThis.document){const n=ha(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let c=function(){pD(nJ,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function aJ(t,e=globalThis==null?void 0:globalThis.document){const n=ha(t),r=g.useRef(!1);return g.useEffect(()=>{const s=o=>{o.target&&!r.current&&pD(rJ,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nT(){const t=new CustomEvent(rw);document.dispatchEvent(t)}function pD(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?eJ(s,o):s.dispatchEvent(o)}const _y="focusScope.autoFocusOnMount",Ny="focusScope.autoFocusOnUnmount",rT={bubbles:!1,cancelable:!0},lJ=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[a,l]=g.useState(null),c=ha(s),u=ha(o),d=g.useRef(null),f=af(e,m=>l(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const C=b.target;a.contains(C)?d.current=C:fo(d.current,{select:!0})},w=function(b){if(p.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||fo(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const E of b)E.removedNodes.length>0&&fo(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),g.useEffect(()=>{if(a){oT.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(_y,rT);a.addEventListener(_y,c),a.dispatchEvent(v),v.defaultPrevented||(cJ(pJ(mD(a)),{select:!0}),document.activeElement===m&&fo(a))}return()=>{a.removeEventListener(_y,c),setTimeout(()=>{const v=new CustomEvent(Ny,rT);a.addEventListener(Ny,u),a.dispatchEvent(v),v.defaultPrevented||fo(m??document.body,{select:!0}),a.removeEventListener(Ny,u),oT.remove(p)},0)}}},[a,c,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[b,C]=uJ(x);b&&C?!m.shiftKey&&v===C?(m.preventDefault(),n&&fo(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&fo(C,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return g.createElement(Or.div,Nn({tabIndex:-1},i,{ref:f,onKeyDown:y}))});function cJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(fo(r,{select:e}),document.activeElement!==n)return}function uJ(t){const e=mD(t),n=sT(e,t),r=sT(e.reverse(),t);return[n,r]}function mD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sT(t,e){for(const n of t)if(!dJ(n,{upTo:e}))return n}function dJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fJ(t){return t instanceof HTMLInputElement&&"select"in t}function fo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&fJ(t)&&e&&t.select()}}const oT=hJ();function hJ(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=iT(t,e),t.unshift(e)},remove(e){var n;t=iT(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function iT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function pJ(t){return t.filter(e=>e.tagName!=="A")}const mJ=g.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...s}=t;return r?Vd.createPortal(g.createElement(Or.div,Nn({},s,{ref:e})),r):null});function gJ(t,e){return g.useReducer((n,r)=>{const s=e[n][r];return s??n},t)}const Gm=t=>{const{present:e,children:n}=t,r=yJ(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),o=af(r.ref,s.ref);return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:o}):null};Gm.displayName="Presence";function yJ(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),o=g.useRef("none"),i=t?"mounted":"unmounted",[a,l]=gJ(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=eh(r.current);o.current=a==="mounted"?c:"none"},[a]),tw(()=>{const c=r.current,u=s.current;if(u!==t){const f=o.current,p=eh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),tw(()=>{if(e){const c=d=>{const p=eh(r.current).includes(d.animationName);d.target===e&&p&&Cs.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(o.current=eh(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function eh(t){return(t==null?void 0:t.animationName)||"none"}let Ry=0;function vJ(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:aT()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:aT()),Ry++,()=>{Ry===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ry--}},[])}function aT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var gD=_R(),My=function(){},Jm=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:My,onWheelCapture:My,onTouchMoveCapture:My}),s=r[0],o=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,y=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,x=Dx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,C=PR([n,e]),E=wn(wn({},x),s);return g.createElement(g.Fragment,null,u&&g.createElement(b,{sideCar:gD,removeScrollBar:c,shards:d,noIsolation:p,inert:y,setCallbacks:o,allowPinchZoom:!!m,lockRef:n}),i?g.cloneElement(g.Children.only(a),wn(wn({},E),{ref:C})):g.createElement(v,wn({},E,{className:l,ref:C}),a))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:_u,zeroRight:Pu};var sw=!1;if(typeof window<"u")try{var th=Object.defineProperty({},"passive",{get:function(){return sw=!0,!0}});window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{sw=!1}var Ka=sw?{passive:!1}:!1,wJ=function(t){return t.tagName==="TEXTAREA"},yD=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!wJ(t)&&n[e]==="visible")},xJ=function(t){return yD(t,"overflowY")},bJ=function(t){return yD(t,"overflowX")},lT=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=vD(t,n);if(r){var s=wD(t,n),o=s[1],i=s[2];if(o>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},SJ=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},CJ=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},vD=function(t,e){return t==="v"?xJ(e):bJ(e)},wD=function(t,e){return t==="v"?SJ(e):CJ(e)},EJ=function(t,e){return t==="h"&&e==="rtl"?-1:1},kJ=function(t,e,n,r,s){var o=EJ(t,window.getComputedStyle(e).direction),i=o*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,f=0;do{var p=wD(t,a),y=p[0],m=p[1],w=p[2],v=m-w-o*y;(y||v)&&vD(t,a)&&(d+=v,f+=y),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(d===0||!s)||!u&&(f===0||!s))&&(c=!0),c},nh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},cT=function(t){return[t.deltaX,t.deltaY]},uT=function(t){return t&&"current"in t?t.current:t},TJ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},PJ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_J=0,qa=[];function NJ(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(_J++)[0],o=g.useState(function(){return Ix()})[0],i=g.useRef(t);g.useEffect(function(){i.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=TR([t.lockRef.current],(t.shards||[]).map(uT),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2)return!i.current.allowPinchZoom;var v=nh(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-v[0],C="deltaY"in m?m.deltaY:x[1]-v[1],E,k=m.target,P=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in m&&P==="h"&&k.type==="range")return!1;var S=lT(P,k);if(!S)return!0;if(S?E=P:(E=P==="v"?"h":"v",S=lT(P,k)),!S)return!1;if(!r.current&&"changedTouches"in m&&(b||C)&&(r.current=E),!E)return!0;var T=r.current||E;return kJ(T,w,m,T==="h"?b:C,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!qa.length||qa[qa.length-1]!==o)){var v="deltaY"in w?cT(w):nh(w),x=e.current.filter(function(E){return E.name===w.type&&E.target===w.target&&TJ(E.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(i.current.shards||[]).map(uT).filter(Boolean).filter(function(E){return E.contains(w.target)}),C=b.length>0?a(w,b[0]):!i.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,x){var b={name:m,delta:w,target:v,should:x};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),u=g.useCallback(function(m){n.current=nh(m),r.current=void 0},[]),d=g.useCallback(function(m){c(m.type,cT(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,nh(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return qa.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ka),document.addEventListener("touchmove",l,Ka),document.addEventListener("touchstart",u,Ka),function(){qa=qa.filter(function(m){return m!==o}),document.removeEventListener("wheel",l,Ka),document.removeEventListener("touchmove",l,Ka),document.removeEventListener("touchstart",u,Ka)}},[]);var p=t.removeScrollBar,y=t.inert;return g.createElement(g.Fragment,null,y?g.createElement(o,{styles:PJ(s)}):null,p?g.createElement(AR,{gapMode:"margin"}):null)}const RJ=RR(gD,NJ);var xD=g.forwardRef(function(t,e){return g.createElement(Jm,wn({},t,{ref:e,sideCar:RJ}))});xD.classNames=Jm.classNames;const bD="Dialog",[SD,Zoe]=WG(bD),[MJ,Na]=SD(bD),AJ=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,a=g.useRef(null),l=g.useRef(null),[c=!1,u]=GG({prop:r,defaultProp:s,onChange:o});return g.createElement(MJ,{scope:e,triggerRef:a,contentRef:l,contentId:Py(),titleId:Py(),descriptionId:Py(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i},n)},CD="DialogPortal",[OJ,ED]=SD(CD,{forceMount:void 0}),jJ=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Na(CD,e);return g.createElement(OJ,{scope:e,forceMount:n},g.Children.map(r,i=>g.createElement(Gm,{present:n||o.open},g.createElement(mJ,{asChild:!0,container:s},i))))},ow="DialogOverlay",DJ=g.forwardRef((t,e)=>{const n=ED(ow,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Na(ow,t.__scopeDialog);return o.modal?g.createElement(Gm,{present:r||o.open},g.createElement(IJ,Nn({},s,{ref:e}))):null}),IJ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Na(ow,n);return g.createElement(xD,{as:fS,allowPinchZoom:!0,shards:[s.contentRef]},g.createElement(Or.div,Nn({"data-state":TD(s.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),xd="DialogContent",LJ=g.forwardRef((t,e)=>{const n=ED(xd,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Na(xd,t.__scopeDialog);return g.createElement(Gm,{present:r||o.open},o.modal?g.createElement(FJ,Nn({},s,{ref:e})):g.createElement($J,Nn({},s,{ref:e})))}),FJ=g.forwardRef((t,e)=>{const n=Na(xd,t.__scopeDialog),r=g.useRef(null),s=af(e,n.contentRef,r);return g.useEffect(()=>{const o=r.current;if(o)return Gd(o)},[]),g.createElement(kD,Nn({},t,{ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Nl(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:Nl(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:Nl(t.onFocusOutside,o=>o.preventDefault())}))}),$J=g.forwardRef((t,e)=>{const n=Na(xd,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return g.createElement(kD,Nn({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i;if((i=t.onCloseAutoFocus)===null||i===void 0||i.call(t,o),!o.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),o.preventDefault()}r.current=!1,s.current=!1},onInteractOutside:o=>{var i,a;(i=t.onInteractOutside)===null||i===void 0||i.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=o.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}}))}),kD=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,a=Na(xd,n),l=g.useRef(null),c=af(e,l);return vJ(),g.createElement(g.Fragment,null,g.createElement(lJ,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o},g.createElement(oJ,Nn({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":TD(a.open)},i,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function TD(t){return t?"open":"closed"}const BJ=AJ,zJ=jJ,VJ=DJ,UJ=LJ;var eu='[cmdk-group=""]',Ay='[cmdk-group-items=""]',WJ='[cmdk-group-heading=""]',hS='[cmdk-item=""]',dT=`${hS}:not([aria-disabled="true"])`,iw="cmdk-item-select",Ri="data-value",HJ=(t,e,n)=>VG(t,e,n),PD=g.createContext(void 0),lf=()=>g.useContext(PD),_D=g.createContext(void 0),pS=()=>g.useContext(_D),ND=g.createContext(void 0),RD=g.forwardRef((t,e)=>{let n=Ya(()=>{var M,F;return{search:"",value:(F=(M=t.value)!=null?M:t.defaultValue)!=null?F:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Ya(()=>new Set),s=Ya(()=>new Map),o=Ya(()=>new Map),i=Ya(()=>new Set),a=MD(t),{label:l,children:c,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:y,disablePointerSelection:m=!1,vimBindings:w=!0,...v}=t,x=g.useId(),b=g.useId(),C=g.useId(),E=g.useRef(null),k=nY();pa(()=>{if(u!==void 0){let M=u.trim();n.current.value=M,P.emit()}},[u]),pa(()=>{k(6,V)},[]);let P=g.useMemo(()=>({subscribe:M=>(i.current.add(M),()=>i.current.delete(M)),snapshot:()=>n.current,setState:(M,F,J)=>{var Y,W,H;if(!Object.is(n.current[M],F)){if(n.current[M]=F,M==="search")j(),_(),k(1,R);else if(M==="value"&&(J||k(5,V),((Y=a.current)==null?void 0:Y.value)!==void 0)){let G=F??"";(H=(W=a.current).onValueChange)==null||H.call(W,G);return}P.emit()}},emit:()=>{i.current.forEach(M=>M())}}),[]),S=g.useMemo(()=>({value:(M,F,J)=>{var Y;F!==((Y=o.current.get(M))==null?void 0:Y.value)&&(o.current.set(M,{value:F,keywords:J}),n.current.filtered.items.set(M,T(F,J)),k(2,()=>{_(),P.emit()}))},item:(M,F)=>(r.current.add(M),F&&(s.current.has(F)?s.current.get(F).add(M):s.current.set(F,new Set([M]))),k(3,()=>{j(),_(),n.current.value||R(),P.emit()}),()=>{o.current.delete(M),r.current.delete(M),n.current.filtered.items.delete(M);let J=B();k(4,()=>{j(),(J==null?void 0:J.getAttribute("id"))===M&&R(),P.emit()})}),group:M=>(s.current.has(M)||s.current.set(M,new Set),()=>{o.current.delete(M),s.current.delete(M)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],disablePointerSelection:m,listId:x,inputId:C,labelId:b,listInnerRef:E}),[]);function T(M,F){var J,Y;let W=(Y=(J=a.current)==null?void 0:J.filter)!=null?Y:HJ;return M?W(M,n.current.search,F):0}function _(){if(!n.current.search||a.current.shouldFilter===!1)return;let M=n.current.filtered.items,F=[];n.current.filtered.groups.forEach(Y=>{let W=s.current.get(Y),H=0;W.forEach(G=>{let oe=M.get(G);H=Math.max(oe,H)}),F.push([Y,H])});let J=E.current;te().sort((Y,W)=>{var H,G;let oe=Y.getAttribute("id"),re=W.getAttribute("id");return((H=M.get(re))!=null?H:0)-((G=M.get(oe))!=null?G:0)}).forEach(Y=>{let W=Y.closest(Ay);W?W.appendChild(Y.parentElement===W?Y:Y.closest(`${Ay} > *`)):J.appendChild(Y.parentElement===J?Y:Y.closest(`${Ay} > *`))}),F.sort((Y,W)=>W[1]-Y[1]).forEach(Y=>{let W=E.current.querySelector(`${eu}[${Ri}="${encodeURIComponent(Y[0])}"]`);W==null||W.parentElement.appendChild(W)})}function R(){let M=te().find(J=>J.getAttribute("aria-disabled")!=="true"),F=M==null?void 0:M.getAttribute(Ri);P.setState("value",F||void 0)}function j(){var M,F,J,Y;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let W=0;for(let H of r.current){let G=(F=(M=o.current.get(H))==null?void 0:M.value)!=null?F:"",oe=(Y=(J=o.current.get(H))==null?void 0:J.keywords)!=null?Y:[],re=T(G,oe);n.current.filtered.items.set(H,re),re>0&&W++}for(let[H,G]of s.current)for(let oe of G)if(n.current.filtered.items.get(oe)>0){n.current.filtered.groups.add(H);break}n.current.filtered.count=W}function V(){var M,F,J;let Y=B();Y&&(((M=Y.parentElement)==null?void 0:M.firstChild)===Y&&((J=(F=Y.closest(eu))==null?void 0:F.querySelector(WJ))==null||J.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function B(){var M;return(M=E.current)==null?void 0:M.querySelector(`${hS}[aria-selected="true"]`)}function te(){var M;return Array.from((M=E.current)==null?void 0:M.querySelectorAll(dT))}function K(M){let F=te()[M];F&&P.setState("value",F.getAttribute(Ri))}function I(M){var F;let J=B(),Y=te(),W=Y.findIndex(G=>G===J),H=Y[W+M];(F=a.current)!=null&&F.loop&&(H=W+M<0?Y[Y.length-1]:W+M===Y.length?Y[0]:Y[W+M]),H&&P.setState("value",H.getAttribute(Ri))}function N(M){let F=B(),J=F==null?void 0:F.closest(eu),Y;for(;J&&!Y;)J=M>0?eY(J,eu):tY(J,eu),Y=J==null?void 0:J.querySelector(dT);Y?P.setState("value",Y.getAttribute(Ri)):I(M)}let O=()=>K(te().length-1),$=M=>{M.preventDefault(),M.metaKey?O():M.altKey?N(1):I(1)},U=M=>{M.preventDefault(),M.metaKey?K(0):M.altKey?N(-1):I(-1)};return g.createElement(Or.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:M=>{var F;if((F=v.onKeyDown)==null||F.call(v,M),!M.defaultPrevented)switch(M.key){case"n":case"j":{w&&M.ctrlKey&&$(M);break}case"ArrowDown":{$(M);break}case"p":case"k":{w&&M.ctrlKey&&U(M);break}case"ArrowUp":{U(M);break}case"Home":{M.preventDefault(),K(0);break}case"End":{M.preventDefault(),O();break}case"Enter":if(!M.nativeEvent.isComposing&&M.keyCode!==229){M.preventDefault();let J=B();if(J){let Y=new Event(iw);J.dispatchEvent(Y)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:sY},l),Ym(t,M=>g.createElement(_D.Provider,{value:P},g.createElement(PD.Provider,{value:S},M))))}),KJ=g.forwardRef((t,e)=>{var n,r;let s=g.useId(),o=g.useRef(null),i=g.useContext(ND),a=lf(),l=MD(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;pa(()=>{if(!c)return a.item(s,i==null?void 0:i.id)},[c]);let u=AD(s,o,[t.value,t.children,o],t.keywords),d=pS(),f=ma(k=>k.value&&k.value===u.current),p=ma(k=>c||a.filter()===!1?!0:k.search?k.filtered.items.get(s)>0:!0);g.useEffect(()=>{let k=o.current;if(!(!k||t.disabled))return k.addEventListener(iw,y),()=>k.removeEventListener(iw,y)},[p,t.onSelect,t.disabled]);function y(){var k,P;m(),(P=(k=l.current).onSelect)==null||P.call(k,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:w,value:v,onSelect:x,forceMount:b,keywords:C,...E}=t;return g.createElement(Or.div,{ref:bd([o,e]),...E,id:s,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!f,"data-disabled":!!w,"data-selected":!!f,onPointerMove:w||a.disablePointerSelection?void 0:m,onClick:w?void 0:y},t.children)}),qJ=g.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:s,...o}=t,i=g.useId(),a=g.useRef(null),l=g.useRef(null),c=g.useId(),u=lf(),d=ma(p=>s||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);pa(()=>u.group(i),[]),AD(i,a,[t.value,t.heading,l]);let f=g.useMemo(()=>({id:i,forceMount:s}),[s]);return g.createElement(Or.div,{ref:bd([a,e]),...o,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Ym(t,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g.createElement(ND.Provider,{value:f},p))))}),GJ=g.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,s=g.useRef(null),o=ma(i=>!i.search);return!n&&!o?null:g.createElement(Or.div,{ref:bd([s,e]),...r,"cmdk-separator":"",role:"separator"})}),JJ=g.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,s=t.value!=null,o=pS(),i=ma(u=>u.search),a=ma(u=>u.value),l=lf(),c=g.useMemo(()=>{var u;let d=(u=l.listInnerRef.current)==null?void 0:u.querySelector(`${hS}[${Ri}="${encodeURIComponent(a)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return g.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),g.createElement(Or.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:s?t.value:i,onChange:u=>{s||o.setState("search",u.target.value),n==null||n(u.target.value)}})}),YJ=g.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...s}=t,o=g.useRef(null),i=g.useRef(null),a=lf();return g.useEffect(()=>{if(i.current&&o.current){let l=i.current,c=o.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=l.offsetHeight;c.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(l),()=>{cancelAnimationFrame(u),d.unobserve(l)}}},[]),g.createElement(Or.div,{ref:bd([o,e]),...s,"cmdk-list":"",role:"listbox","aria-label":r,id:a.listId},Ym(t,l=>g.createElement("div",{ref:bd([i,a.listInnerRef]),"cmdk-list-sizer":""},l)))}),QJ=g.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:o,container:i,...a}=t;return g.createElement(BJ,{open:n,onOpenChange:r},g.createElement(zJ,{container:i},g.createElement(VJ,{"cmdk-overlay":"",className:s}),g.createElement(UJ,{"aria-label":t.label,"cmdk-dialog":"",className:o},g.createElement(RD,{ref:e,...a}))))}),XJ=g.forwardRef((t,e)=>ma(n=>n.filtered.count===0)?g.createElement(Or.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),ZJ=g.forwardRef((t,e)=>{let{progress:n,children:r,label:s="Loading...",...o}=t;return g.createElement(Or.div,{ref:e,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ym(t,i=>g.createElement("div",{"aria-hidden":!0},i)))}),Qn=Object.assign(RD,{List:YJ,Item:KJ,Input:JJ,Group:qJ,Separator:GJ,Dialog:QJ,Empty:XJ,Loading:ZJ});function eY(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function tY(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function MD(t){let e=g.useRef(t);return pa(()=>{e.current=t}),e}var pa=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Ya(t){let e=g.useRef();return e.current===void 0&&(e.current=t()),e}function bd(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function ma(t){let e=pS(),n=()=>t(e.snapshot());return g.useSyncExternalStore(e.subscribe,n,n)}function AD(t,e,n,r=[]){let s=g.useRef(),o=lf();return pa(()=>{var i;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():s.current}})(),l=r.map(c=>c.trim());o.value(t,a,l),(i=e.current)==null||i.setAttribute(Ri,a),s.current=a}),s}var nY=()=>{let[t,e]=g.useState(),n=Ya(()=>new Map);return pa(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,s)=>{n.current.set(r,s),e({})}};function rY(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Ym({asChild:t,children:e},n){return t&&g.isValidElement(e)?g.cloneElement(rY(e),{ref:e.ref},n(e.props.children)):n(e)}var sY={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const OD=g.forwardRef(({className:t,...e},n)=>h.jsx(Qn,{ref:n,className:ie("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));OD.displayName=Qn.displayName;const jD=g.forwardRef(({className:t,...e},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(FU,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(Qn.Input,{ref:n,className:ie("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));jD.displayName=Qn.Input.displayName;const oY=g.forwardRef(({className:t,...e},n)=>h.jsx(Qn.List,{ref:n,className:ie("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));oY.displayName=Qn.List.displayName;const DD=g.forwardRef((t,e)=>h.jsx(Qn.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));DD.displayName=Qn.Empty.displayName;const ID=g.forwardRef(({className:t,...e},n)=>h.jsx(Qn.Group,{ref:n,className:ie("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));ID.displayName=Qn.Group.displayName;const iY=g.forwardRef(({className:t,...e},n)=>h.jsx(Qn.Separator,{ref:n,className:ie("-mx-1 h-px bg-border",t),...e}));iY.displayName=Qn.Separator.displayName;const LD=g.forwardRef(({className:t,...e},n)=>h.jsx(Qn.Item,{ref:n,className:ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));LD.displayName=Qn.Item.displayName;var mS="Popover",[FD,eie]=Es(mS,[Mc]),cf=Mc(),[aY,mi]=FD(mS),$D=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,a=cf(e),l=g.useRef(null),[c,u]=g.useState(!1),[d=!1,f]=Qr({prop:r,defaultProp:s,onChange:o});return h.jsx(Xb,{...a,children:h.jsx(aY,{scope:e,contentId:Gr(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};$D.displayName=mS;var BD="PopoverAnchor",lY=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=mi(BD,n),o=cf(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=s;return g.useEffect(()=>(i(),()=>a()),[i,a]),h.jsx($m,{...o,...r,ref:e})});lY.displayName=BD;var zD="PopoverTrigger",VD=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=mi(zD,n),o=cf(n),i=$e(e,s.triggerRef),a=h.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":qD(s.open),...r,ref:i,onClick:se(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:h.jsx($m,{asChild:!0,...o,children:a})});VD.displayName=zD;var gS="PopoverPortal",[cY,uY]=FD(gS,{forceMount:void 0}),UD=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,o=mi(gS,e);return h.jsx(cY,{scope:e,forceMount:n,children:h.jsx(dn,{present:n||o.open,children:h.jsx(Sc,{asChild:!0,container:s,children:r})})})};UD.displayName=gS;var cc="PopoverContent",WD=g.forwardRef((t,e)=>{const n=uY(cc,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,o=mi(cc,t.__scopePopover);return h.jsx(dn,{present:r||o.open,children:o.modal?h.jsx(dY,{...s,ref:e}):h.jsx(fY,{...s,ref:e})})});WD.displayName=cc;var dY=g.forwardRef((t,e)=>{const n=mi(cc,t.__scopePopover),r=g.useRef(null),s=$e(e,r),o=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return Gd(i)},[]),h.jsx(qd,{as:Gs,allowPinchZoom:!0,children:h.jsx(HD,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:se(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),fY=g.forwardRef((t,e)=>{const n=mi(cc,t.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return h.jsx(HD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),HD=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=mi(cc,n),p=cf(n);return hm(),h.jsx(Kd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:h.jsx(bc,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(Zb,{"data-state":qD(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),KD="PopoverClose",hY=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=mi(KD,n);return h.jsx(be.button,{type:"button",...r,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});hY.displayName=KD;var pY="PopoverArrow",mY=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=cf(n);return h.jsx(eS,{...s,...r,ref:e})});mY.displayName=pY;function qD(t){return t?"open":"closed"}var gY=$D,yY=VD,vY=UD,GD=WD;const wY=gY,xY=yY,JD=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>h.jsx(vY,{children:h.jsx(GD,{ref:s,align:e,sideOffset:n,className:ie("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));JD.displayName=GD.displayName;function bY({options:t=[],value:e=[],onChange:n,placeholder:r}){const[s,o]=g.useState(!1),[i,a]=g.useState(""),l=g.useMemo(()=>t.filter(u=>u.label.toLowerCase().includes(i.toLowerCase())),[t,i]),c=g.useCallback(u=>{const d=e.includes(u)?e.filter(f=>f!==u):[...e,u];n(d)},[e,n]);return h.jsxs(wY,{open:s,onOpenChange:o,children:[h.jsx(xY,{asChild:!0,children:h.jsxs(xe,{variant:"outline",role:"combobox","aria-expanded":s,className:"w-full justify-between",children:[e.length===0?r||"Select items...":`${e.length} selected`,h.jsx(jU,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(JD,{className:"w-full p-0",align:"start",children:h.jsxs(OD,{shouldFilter:!1,children:[h.jsx(jD,{placeholder:"Search...",value:i,onValueChange:a}),h.jsx(DD,{children:"No items found."}),h.jsx(ID,{className:"max-h-64 overflow-auto",children:l.map(u=>h.jsxs(LD,{value:u.value,onSelect:()=>c(u.value),children:[h.jsx(Cc,{className:ie("mr-2 h-4 w-4",e.includes(u.value)?"opacity-100":"opacity-0")}),u.label]},u.value))})]})})]})}function SY({product:t,editValues:e,categories:n,onEditChange:r,onSave:s,onCancel:o,onImageUpload:i,onVideoUpload:a,onDeleteMedia:l,isSaving:c}){return di(),h.jsxs("div",{className:"fixed inset-0 bg-background z-50 overflow-auto",children:[h.jsxs("div",{className:"sticky top-0 z-10 bg-background border-b p-4 flex items-center justify-between",children:[h.jsx(xe,{variant:"ghost",size:"icon",onClick:o,children:h.jsx(zx,{className:"h-4 w-4"})}),h.jsx("h2",{className:"text-lg font-semibold",children:"Edit Product"}),h.jsx(xe,{variant:"ghost",size:"icon",onClick:o,children:h.jsx(ui,{className:"h-4 w-4"})})]}),h.jsx("div",{className:"p-4 space-y-6 pb-24",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"name",children:"Name"}),h.jsx(Fe,{id:"name",value:e.name||"",onChange:u=>r({...e,name:u.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"description",children:"Description"}),h.jsx(Oc,{id:"description",value:e.description||"",onChange:u=>r({...e,description:u.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"strain",children:"Strain"}),h.jsx(Fe,{id:"strain",value:e.strain||"",onChange:u=>r({...e,strain:u.target.value})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"categories",children:"Categories"}),n&&h.jsx(bY,{value:e.categories||[],onChange:u=>r({...e,categories:u}),options:n.map(u=>({label:u.name,value:u.name})),placeholder:"Select categories"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{children:"Media"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(_e,{children:"Image"}),h.jsx(Yn,{accept:"image/*",onUpload:u=>i(t.id,u),onDelete:()=>l(t.id,"image"),value:e.image_url})]}),h.jsxs("div",{children:[h.jsx(_e,{children:"Video"}),h.jsx(Yn,{accept:"video/*",onUpload:u=>a(t.id,u),onDelete:()=>l(t.id,"video"),value:e.video_url})]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"regular_price",children:"Price"}),h.jsx(Fe,{id:"regular_price",type:"number",value:e.regular_price||"",onChange:u=>r({...e,regular_price:parseFloat(u.target.value)})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"shipping_price",children:"Shipping"}),h.jsx(Fe,{id:"shipping_price",type:"number",value:e.shipping_price||"",onChange:u=>r({...e,shipping_price:parseFloat(u.target.value)})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"stock",children:"Stock"}),h.jsx(Fe,{id:"stock",type:"number",value:e.stock||"",onChange:u=>r({...e,stock:parseInt(u.target.value,10)})})]})]})}),h.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background border-t",children:h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx(xe,{variant:"outline",onClick:o,children:"Cancel"}),h.jsx(xe,{onClick:s,disabled:c,children:c?"Saving...":"Save"})]})})]})}function CY({product:t,visibleColumns:e,isEditing:n,editValues:r,categories:s,onEditStart:o,onEditSave:i,onEditCancel:a,onEditChange:l,onDelete:c,onImageUpload:u,onVideoUpload:d,onDeleteMedia:f,onMediaClick:p}){const[y,m]=g.useState(!1),[w,v]=g.useState(!1),x=di(),b=()=>{console.log("ProductTableRow: Starting edit for product:",t.id),o(t),m(!0)},C=async()=>{console.log("ProductTableRow: Saving product:",t.id),console.log("ProductTableRow: New categories:",r.categories),v(!0);try{const{error:k}=await we.from("product_categories").delete().eq("product_id",t.id);if(k)throw k;if(r.categories&&r.categories.length>0){const{data:P,error:S}=await we.from("categories").select("id, name").in("name",r.categories);if(S)throw S;if(P&&P.length>0){const T=P.map(R=>({product_id:t.id,category_id:R.id})),{error:_}=await we.from("product_categories").upsert(T,{onConflict:"product_id,category_id",ignoreDuplicates:!0});if(_)throw _}}await i(),m(!1),ve.success("Product updated successfully")}catch(k){console.error("ProductTableRow: Error saving categories:",k),ve.error("Failed to update product categories")}finally{v(!1)}},E=()=>{console.log("ProductTableRow: Canceling edit"),a(),m(!1)};return h.jsxs(h.Fragment,{children:[h.jsxs(aS,{children:[e.map(k=>h.jsx(_G,{column:k,product:t,isEditing:!1,editValues:r,categories:s,onEditChange:l,onMediaClick:p,onDeleteMedia:f,onImageUpload:u,onVideoUpload:d},k)),h.jsx(NG,{productId:t.id,isEditing:n,onEdit:b,onSave:C,onCancel:E,onDelete:c})]},t.id),y&&(x?h.jsx(SY,{product:t,editValues:r,categories:s,onEditChange:l,onSave:C,onCancel:E,onImageUpload:u,onVideoUpload:d,onDeleteMedia:f,isSaving:w}):h.jsx(dD,{open:y,onOpenChange:m,product:t,editValues:r,categories:s,onEditChange:l,onSave:C,onCancel:E,onImageUpload:u,onVideoUpload:d,onDeleteMedia:f,isSaving:w}))]})}function EY({products:t,visibleColumns:e,editingProduct:n,editValues:r,onEditStart:s,onEditSave:o,onEditCancel:i,onEditChange:a,onDelete:l,onImageUpload:c,onVideoUpload:u,onDeleteMedia:d,onMediaClick:f,sortConfig:p,onSort:y}){const m=[{key:"name",label:"Name",sortable:!0},{key:"strain",label:"Strain",sortable:!0},{key:"description",label:"Description",sortable:!0},{key:"image",label:"Image",sortable:!1},{key:"video_url",label:"Video",sortable:!1},{key:"categories",label:"Categories",sortable:!1},{key:"stock",label:"Stock",sortable:!0},{key:"regular_price",label:"Price",sortable:!0},{key:"shipping_price",label:"Shipping",sortable:!0}],{data:w}=Tc({queryKey:["categories"],queryFn:async()=>{const{data:v,error:x}=await we.from("categories").select("*").order("name");if(x)throw x;return v}});return h.jsx("div",{className:"rounded-md border",children:h.jsxs(oD,{children:[h.jsx(iD,{children:h.jsxs(aS,{children:[m.filter(v=>e.includes(v.key)).map(v=>h.jsx(X0,{children:v.sortable?h.jsxs(xe,{variant:"ghost",onClick:()=>y(v.key),className:"h-8 flex items-center gap-1 hover:bg-transparent",children:[v.label,h.jsx(MU,{className:"h-4 w-4"})]}):v.label},v.key)),h.jsx(X0,{className:"text-right",children:"Actions"})]})}),h.jsx(aD,{children:t.map(v=>h.jsx(CY,{product:v,visibleColumns:e,isEditing:n===v.id,editValues:r,categories:w,onEditStart:s,onEditSave:o,onEditCancel:i,onEditChange:a,onDelete:l,onImageUpload:c,onVideoUpload:u,onDeleteMedia:d,onMediaClick:f},v.id))})]})})}var aw=["Enter"," "],kY=["ArrowDown","PageUp","Home"],YD=["ArrowUp","PageDown","End"],TY=[...kY,...YD],PY={ltr:[...aw,"ArrowRight"],rtl:[...aw,"ArrowLeft"]},_Y={ltr:["ArrowLeft"],rtl:["ArrowRight"]},uf="Menu",[Sd,NY,RY]=Dm(uf),[Ra,QD]=Es(uf,[RY,Mc,Hm]),Qm=Mc(),XD=Hm(),[MY,Ma]=Ra(uf),[AY,df]=Ra(uf),ZD=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=t,a=Qm(e),[l,c]=g.useState(null),u=g.useRef(!1),d=wt(o),f=rf(s);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(Xb,{...a,children:h.jsx(MY,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(AY,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})};ZD.displayName=uf;var OY="MenuAnchor",yS=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Qm(n);return h.jsx($m,{...s,...r,ref:e})});yS.displayName=OY;var vS="MenuPortal",[jY,eI]=Ra(vS,{forceMount:void 0}),tI=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Ma(vS,e);return h.jsx(jY,{scope:e,forceMount:n,children:h.jsx(dn,{present:n||o.open,children:h.jsx(Sc,{asChild:!0,container:s,children:r})})})};tI.displayName=vS;var _r="MenuContent",[DY,wS]=Ra(_r),nI=g.forwardRef((t,e)=>{const n=eI(_r,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Ma(_r,t.__scopeMenu),i=df(_r,t.__scopeMenu);return h.jsx(Sd.Provider,{scope:t.__scopeMenu,children:h.jsx(dn,{present:r||o.open,children:h.jsx(Sd.Slot,{scope:t.__scopeMenu,children:i.modal?h.jsx(IY,{...s,ref:e}):h.jsx(LY,{...s,ref:e})})})})}),IY=g.forwardRef((t,e)=>{const n=Ma(_r,t.__scopeMenu),r=g.useRef(null),s=$e(e,r);return g.useEffect(()=>{const o=r.current;if(o)return Gd(o)},[]),h.jsx(xS,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:se(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),LY=g.forwardRef((t,e)=>{const n=Ma(_r,t.__scopeMenu);return h.jsx(xS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),xS=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...m}=t,w=Ma(_r,n),v=df(_r,n),x=Qm(n),b=XD(n),C=NY(n),[E,k]=g.useState(null),P=g.useRef(null),S=$e(e,P,w.onContentChange),T=g.useRef(0),_=g.useRef(""),R=g.useRef(0),j=g.useRef(null),V=g.useRef("right"),B=g.useRef(0),te=y?qd:g.Fragment,K=y?{as:Gs,allowPinchZoom:!0}:void 0,I=O=>{var H,G;const $=_.current+O,U=C().filter(oe=>!oe.disabled),M=document.activeElement,F=(H=U.find(oe=>oe.ref.current===M))==null?void 0:H.textValue,J=U.map(oe=>oe.textValue),Y=JY(J,$,F),W=(G=U.find(oe=>oe.textValue===Y))==null?void 0:G.ref.current;(function oe(re){_.current=re,window.clearTimeout(T.current),re!==""&&(T.current=window.setTimeout(()=>oe(""),1e3))})($),W&&setTimeout(()=>W.focus())};g.useEffect(()=>()=>window.clearTimeout(T.current),[]),hm();const N=g.useCallback(O=>{var U,M;return V.current===((U=j.current)==null?void 0:U.side)&&QY(O,(M=j.current)==null?void 0:M.area)},[]);return h.jsx(DY,{scope:n,searchRef:_,onItemEnter:g.useCallback(O=>{N(O)&&O.preventDefault()},[N]),onItemLeave:g.useCallback(O=>{var $;N(O)||(($=P.current)==null||$.focus(),k(null))},[N]),onTriggerLeave:g.useCallback(O=>{N(O)&&O.preventDefault()},[N]),pointerGraceTimerRef:R,onPointerGraceIntentChange:g.useCallback(O=>{j.current=O},[]),children:h.jsx(te,{...K,children:h.jsx(Kd,{asChild:!0,trapped:s,onMountAutoFocus:se(o,O=>{var $;O.preventDefault(),($=P.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(bc,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Wj,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:k,onEntryFocus:se(l,O=>{v.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(Zb,{role:"menu","aria-orientation":"vertical","data-state":vI(w.open),"data-radix-menu-content":"",dir:v.dir,...x,...m,ref:S,style:{outline:"none",...m.style},onKeyDown:se(m.onKeyDown,O=>{const U=O.target.closest("[data-radix-menu-content]")===O.currentTarget,M=O.ctrlKey||O.altKey||O.metaKey,F=O.key.length===1;U&&(O.key==="Tab"&&O.preventDefault(),!M&&F&&I(O.key));const J=P.current;if(O.target!==J||!TY.includes(O.key))return;O.preventDefault();const W=C().filter(H=>!H.disabled).map(H=>H.ref.current);YD.includes(O.key)&&W.reverse(),qY(W)}),onBlur:se(t.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(T.current),_.current="")}),onPointerMove:se(t.onPointerMove,Cd(O=>{const $=O.target,U=B.current!==O.clientX;if(O.currentTarget.contains($)&&U){const M=O.clientX>B.current?"right":"left";V.current=M,B.current=O.clientX}}))})})})})})})});nI.displayName=_r;var FY="MenuGroup",bS=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(be.div,{role:"group",...r,ref:e})});bS.displayName=FY;var $Y="MenuLabel",rI=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(be.div,{...r,ref:e})});rI.displayName=$Y;var Tp="MenuItem",fT="menu.itemSelect",Xm=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=g.useRef(null),i=df(Tp,t.__scopeMenu),a=wS(Tp,t.__scopeMenu),l=$e(e,o),c=g.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const f=new CustomEvent(fT,{bubbles:!0,cancelable:!0});d.addEventListener(fT,p=>r==null?void 0:r(p),{once:!0}),jx(d,f),f.defaultPrevented?c.current=!1:i.onClose()}};return h.jsx(sI,{...s,ref:l,disabled:n,onClick:se(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:se(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:se(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||aw.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Xm.displayName=Tp;var sI=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,i=wS(Tp,n),a=XD(n),l=g.useRef(null),c=$e(e,l),[u,d]=g.useState(!1),[f,p]=g.useState("");return g.useEffect(()=>{const y=l.current;y&&p((y.textContent??"").trim())},[o.children]),h.jsx(Sd.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:h.jsx(Hj,{asChild:!0,...a,focusable:!r,children:h.jsx(be.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:c,onPointerMove:se(t.onPointerMove,Cd(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(t.onPointerLeave,Cd(y=>i.onItemLeave(y))),onFocus:se(t.onFocus,()=>d(!0)),onBlur:se(t.onBlur,()=>d(!1))})})})}),BY="MenuCheckboxItem",oI=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return h.jsx(uI,{scope:t.__scopeMenu,checked:n,children:h.jsx(Xm,{role:"menuitemcheckbox","aria-checked":Pp(n)?"mixed":n,...s,ref:e,"data-state":CS(n),onSelect:se(s.onSelect,()=>r==null?void 0:r(Pp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oI.displayName=BY;var iI="MenuRadioGroup",[zY,VY]=Ra(iI,{value:void 0,onValueChange:()=>{}}),aI=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=wt(r);return h.jsx(zY,{scope:t.__scopeMenu,value:n,onValueChange:o,children:h.jsx(bS,{...s,ref:e})})});aI.displayName=iI;var lI="MenuRadioItem",cI=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=VY(lI,t.__scopeMenu),o=n===s.value;return h.jsx(uI,{scope:t.__scopeMenu,checked:o,children:h.jsx(Xm,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":CS(o),onSelect:se(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});cI.displayName=lI;var SS="MenuItemIndicator",[uI,UY]=Ra(SS,{checked:!1}),dI=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=UY(SS,n);return h.jsx(dn,{present:r||Pp(o.checked)||o.checked===!0,children:h.jsx(be.span,{...s,ref:e,"data-state":CS(o.checked)})})});dI.displayName=SS;var WY="MenuSeparator",fI=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(be.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});fI.displayName=WY;var HY="MenuArrow",hI=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Qm(n);return h.jsx(eS,{...s,...r,ref:e})});hI.displayName=HY;var KY="MenuSub",[tie,pI]=Ra(KY),pu="MenuSubTrigger",mI=g.forwardRef((t,e)=>{const n=Ma(pu,t.__scopeMenu),r=df(pu,t.__scopeMenu),s=pI(pu,t.__scopeMenu),o=wS(pu,t.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(yS,{asChild:!0,...c,children:h.jsx(sI,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":vI(n.open),...t,ref:fm(e,s.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:se(t.onPointerMove,Cd(d=>{o.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:se(t.onPointerLeave,Cd(d=>{var p,y;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(y=n.content)==null?void 0:y.dataset.side,w=m==="right",v=w?-5:5,x=f[w?"left":"right"],b=f[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:se(t.onKeyDown,d=>{var p;const f=o.searchRef.current!=="";t.disabled||f&&d.key===" "||PY[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});mI.displayName=pu;var gI="MenuSubContent",yI=g.forwardRef((t,e)=>{const n=eI(_r,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Ma(_r,t.__scopeMenu),i=df(_r,t.__scopeMenu),a=pI(gI,t.__scopeMenu),l=g.useRef(null),c=$e(e,l);return h.jsx(Sd.Provider,{scope:t.__scopeMenu,children:h.jsx(dn,{present:r||o.open,children:h.jsx(Sd.Slot,{scope:t.__scopeMenu,children:h.jsx(xS,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:se(t.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:se(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:se(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=_Y[i.dir].includes(u.key);d&&f&&(o.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});yI.displayName=gI;function vI(t){return t?"open":"closed"}function Pp(t){return t==="indeterminate"}function CS(t){return Pp(t)?"indeterminate":t?"checked":"unchecked"}function qY(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function GY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function JY(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=GY(t,Math.max(o,0));s.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function YY(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o].x,l=e[o].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function QY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return YY(n,e)}function Cd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var XY=ZD,ZY=yS,eQ=tI,tQ=nI,nQ=bS,rQ=rI,sQ=Xm,oQ=oI,iQ=aI,aQ=cI,lQ=dI,cQ=fI,uQ=hI,dQ=mI,fQ=yI,ES="DropdownMenu",[hQ,nie]=Es(ES,[QD]),Ln=QD(),[pQ,wI]=hQ(ES),xI=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=t,l=Ln(e),c=g.useRef(null),[u=!1,d]=Qr({prop:s,defaultProp:o,onChange:i});return h.jsx(pQ,{scope:e,triggerId:Gr(),triggerRef:c,contentId:Gr(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a,children:h.jsx(XY,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};xI.displayName=ES;var bI="DropdownMenuTrigger",SI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=wI(bI,n),i=Ln(n);return h.jsx(ZY,{asChild:!0,...i,children:h.jsx(be.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:fm(e,o.triggerRef),onPointerDown:se(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:se(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});SI.displayName=bI;var mQ="DropdownMenuPortal",CI=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ln(e);return h.jsx(eQ,{...r,...n})};CI.displayName=mQ;var EI="DropdownMenuContent",kI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=wI(EI,n),o=Ln(n),i=g.useRef(!1);return h.jsx(tQ,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:se(t.onCloseAutoFocus,a=>{var l;i.current||(l=s.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:se(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kI.displayName=EI;var gQ="DropdownMenuGroup",yQ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(nQ,{...s,...r,ref:e})});yQ.displayName=gQ;var vQ="DropdownMenuLabel",TI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(rQ,{...s,...r,ref:e})});TI.displayName=vQ;var wQ="DropdownMenuItem",PI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(sQ,{...s,...r,ref:e})});PI.displayName=wQ;var xQ="DropdownMenuCheckboxItem",_I=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(oQ,{...s,...r,ref:e})});_I.displayName=xQ;var bQ="DropdownMenuRadioGroup",SQ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(iQ,{...s,...r,ref:e})});SQ.displayName=bQ;var CQ="DropdownMenuRadioItem",NI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(aQ,{...s,...r,ref:e})});NI.displayName=CQ;var EQ="DropdownMenuItemIndicator",RI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(lQ,{...s,...r,ref:e})});RI.displayName=EQ;var kQ="DropdownMenuSeparator",MI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(cQ,{...s,...r,ref:e})});MI.displayName=kQ;var TQ="DropdownMenuArrow",PQ=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(uQ,{...s,...r,ref:e})});PQ.displayName=TQ;var _Q="DropdownMenuSubTrigger",AI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(dQ,{...s,...r,ref:e})});AI.displayName=_Q;var NQ="DropdownMenuSubContent",OI=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ln(n);return h.jsx(fQ,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});OI.displayName=NQ;var RQ=xI,MQ=SI,AQ=CI,jI=kI,DI=TI,II=PI,LI=_I,FI=NI,$I=RI,BI=MI,zI=AI,VI=OI;const OQ=RQ,jQ=MQ,DQ=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>h.jsxs(zI,{ref:s,className:ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,h.jsx(AU,{className:"ml-auto h-4 w-4"})]}));DQ.displayName=zI.displayName;const IQ=g.forwardRef(({className:t,...e},n)=>h.jsx(VI,{ref:n,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));IQ.displayName=VI.displayName;const UI=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(AQ,{children:h.jsx(jI,{ref:r,sideOffset:e,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));UI.displayName=jI.displayName;const LQ=g.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(II,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));LQ.displayName=II.displayName;const WI=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>h.jsxs(LI,{ref:s,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx($I,{children:h.jsx(Cc,{className:"h-4 w-4"})})}),e]}));WI.displayName=LI.displayName;const FQ=g.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(FI,{ref:r,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx($I,{children:h.jsx(DU,{className:"h-2 w-2 fill-current"})})}),e]}));FQ.displayName=FI.displayName;const HI=g.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(DI,{ref:r,className:ie("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));HI.displayName=DI.displayName;const KI=g.forwardRef(({className:t,...e},n)=>h.jsx(BI,{ref:n,className:ie("-mx-1 my-1 h-px bg-muted",t),...e}));KI.displayName=BI.displayName;function $Q({searchQuery:t,onSearchChange:e,columns:n,visibleColumns:r,onColumnToggle:s,showColumnToggle:o=!0,onAddProduct:i,onExport:a,onImport:l,onDownloadTemplate:c}){return h.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[h.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[h.jsx(Fe,{placeholder:"Search products...",value:t,onChange:u=>e(u.target.value),className:"max-w-[300px]"}),o&&h.jsxs(OQ,{children:[h.jsx(jQ,{asChild:!0,children:h.jsx(xe,{variant:"outline",size:"icon",children:h.jsx($U,{className:"h-4 w-4"})})}),h.jsxs(UI,{align:"end",className:"w-[200px]",children:[h.jsx(HI,{children:"Toggle columns"}),h.jsx(KI,{}),n.map(u=>h.jsx(WI,{checked:r.includes(u.key),onCheckedChange:()=>s(u.key),children:u.label},u.key))]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs(xe,{onClick:c,variant:"outline",size:"sm",children:[h.jsx(tc,{className:"mr-2 h-4 w-4"}),"Template"]}),h.jsxs(xe,{onClick:l,variant:"outline",size:"sm",children:[h.jsx(id,{className:"mr-2 h-4 w-4"}),"Import"]}),h.jsxs(xe,{onClick:a,variant:"outline",size:"sm",children:[h.jsx(tc,{className:"mr-2 h-4 w-4"}),"Export"]}),h.jsxs(xe,{onClick:i,size:"sm",children:[h.jsx(oM,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]})}const BQ=({id:t,name:e,description:n,image_url:r,categories:s,strain:o,stock:i,regular_price:a,shipping_price:l,onDelete:c,onEdit:u,"data-product-id":d})=>{const f=m=>m?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m):"-",p=m=>{m.stopPropagation(),console.log("AdminProductCard: Edit clicked for product:",t),u()},y=m=>{m.stopPropagation(),console.log("AdminProductCard: Delete clicked for product:",t),c(t)};return h.jsxs(Ca,{className:"overflow-hidden","data-product-id":d,children:[h.jsxs(Ea,{className:"p-0 relative aspect-square",children:[r?h.jsx("img",{src:r,alt:e,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:h.jsx(wm,{className:"h-8 w-8 text-gray-400"})}),h.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[h.jsx(xe,{size:"icon",variant:"secondary",className:"rounded-full w-8 h-8",onClick:p,"aria-label":"Edit product",children:h.jsx(Ux,{className:"h-4 w-4"})}),h.jsx(xe,{size:"icon",variant:"destructive",className:"rounded-full w-8 h-8",onClick:y,"aria-label":"Delete product",children:h.jsx(la,{className:"h-4 w-4"})})]})]}),h.jsxs(ka,{className:"p-4",children:[h.jsx("h3",{className:"font-bold truncate",children:e}),h.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:n}),h.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[(s==null?void 0:s.length)>0&&h.jsxs("div",{children:["Categories: ",s.join(", ")]}),o&&h.jsxs("div",{children:["Strain: ",o]}),i!==void 0&&h.jsxs("div",{children:["Stock: ",i]}),a!==void 0&&h.jsxs("div",{children:["Price: ",f(a)]}),l!==void 0&&h.jsxs("div",{children:["Shipping: ",f(l)]})]})]})]})};function zQ({products:t,onEditStart:e,onEditSave:n,onEditCancel:r,onEditChange:s,editingProduct:o,editValues:i,onDelete:a,onImageUpload:l,onVideoUpload:c,onDeleteMedia:u,onMediaClick:d}){const[f,p]=g.useState(!1),[y,m]=g.useState(null),w=C=>{console.log("ProductMobileGrid: Starting edit for product:",C.id),m(C),e(C),p(!0)},v=async()=>{console.log("ProductMobileGrid: Saving edit for product:",y==null?void 0:y.id),n(),p(!1),m(null)},x=()=>{console.log("ProductMobileGrid: Canceling edit"),r(),p(!1),m(null)},b=C=>{console.log("ProductMobileGrid: Deleting product:",C),a(C)};return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(C=>h.jsx(BQ,{...C,onUpdate:()=>{console.log("ProductMobileGrid: Update clicked for product:",C.id),w(C)},onDelete:E=>{console.log("ProductMobileGrid: Delete clicked for product:",E),b(E)},onEdit:()=>{console.log("ProductMobileGrid: Edit clicked for product:",C.id),w(C)},"data-product-id":C.id},C.id))}),y&&h.jsx(dD,{open:f,onOpenChange:p,product:y,editValues:i,onEditChange:s,onSave:v,onCancel:x,onImageUpload:l,onVideoUpload:c,onDeleteMedia:u})]})}function VQ({open:t,onOpenChange:e,onSave:n}){var i,a,l;const[r,s]=g.useState({name:"",description:"",strain:"",stock:0,regular_price:0,shipping_price:0}),o=()=>{if(!r.name){ve.error("Product name is required");return}n(r),s({name:"",description:"",strain:"",stock:0,regular_price:0,shipping_price:0})};return h.jsx(cS,{open:t,onOpenChange:e,children:h.jsxs(qm,{className:"max-w-2xl",children:[h.jsx(uS,{children:h.jsx(dS,{children:"Add New Product"})}),h.jsxs("div",{className:"grid gap-4 py-4",children:[h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"name",children:"Name"}),h.jsx(Fe,{id:"name",value:r.name,onChange:c=>s({...r,name:c.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"strain",children:"Strain"}),h.jsx(Fe,{id:"strain",value:r.strain,onChange:c=>s({...r,strain:c.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"description",children:"Description"}),h.jsx(Oc,{id:"description",value:r.description,onChange:c=>s({...r,description:c.target.value})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"stock",children:"Stock"}),h.jsx(Fe,{id:"stock",type:"number",value:(i=r.stock)==null?void 0:i.toString(),onChange:c=>s({...r,stock:parseInt(c.target.value)})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"regular_price",children:"Regular Price"}),h.jsx(Fe,{id:"regular_price",type:"number",step:"0.01",value:(a=r.regular_price)==null?void 0:a.toString(),onChange:c=>s({...r,regular_price:parseFloat(c.target.value)})})]}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx(_e,{htmlFor:"shipping_price",children:"Shipping Price"}),h.jsx(Fe,{id:"shipping_price",type:"number",step:"0.01",value:(l=r.shipping_price)==null?void 0:l.toString(),onChange:c=>s({...r,shipping_price:parseFloat(c.target.value)})})]})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx(xe,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),h.jsx(xe,{onClick:o,children:"Add Product"})]})]})})}var qI={exports:{}};/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(dr,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,o=!r.document&&!!r.postMessage,i=r.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(T){var _=E(T);_.chunkSize=parseInt(_.chunkSize),T.step||T.chunk||(_.chunkSize=null),this._handle=new m(_),(this._handle.streamer=this)._config=_}).call(this,S),this.parseChunk=function(T,_){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let V=this._config.newline;V||(j=this._config.quoteChar||'"',V=this._handle.guessLineEndings(T,j)),T=[...T.split(V).slice(R)].join(V)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(j=this._config.beforeFirstChunk(T))!==void 0&&(T=j),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+T,j=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=j.meta.cursor,R=(this._finished||(this._partialLine=R.substring(T-this._baseIndex),this._baseIndex=T),j&&j.data&&(this._rowCount+=j.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)r.postMessage({results:j,workerId:c.WORKER_ID,finished:R});else if(P(this._config.chunk)&&!_){if(this._config.chunk(j,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=j=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(j.data),this._completeResults.errors=this._completeResults.errors.concat(j.errors),this._completeResults.meta=j.meta),this._completed||!R||!P(this._config.complete)||j&&j.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||j&&j.meta.paused||this._nextChunk(),j}this._halted=!0},this._sendError=function(T){P(this._config.error)?this._config.error(T):i&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:T,finished:!1})}}function d(S){var T;(S=S||{}).chunkSize||(S.chunkSize=c.RemoteChunkSize),u.call(this,S),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(_){this._input=_,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),o||(T.onload=k(this._chunkLoaded,this),T.onerror=k(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var _,R=this._config.downloadRequestHeaders;for(_ in R)T.setRequestHeader(_,R[_])}var j;this._config.chunkSize&&(j=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+j));try{T.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}o&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=(_=>(_=_.getResponseHeader("Content-Range"))!==null?parseInt(_.substring(_.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function(_){_=T.statusText||_,this._sendError(new Error(_))}}function f(S){(S=S||{}).chunkSize||(S.chunkSize=c.LocalChunkSize),u.call(this,S);var T,_,R=typeof FileReader<"u";this.stream=function(j){this._input=j,_=j.slice||j.webkitSlice||j.mozSlice,R?((T=new FileReader).onload=k(this._chunkLoaded,this),T.onerror=k(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var j=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),j=_.call(j,this._start,V)),T.readAsText(j,this._config.encoding));R||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(j){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(j.target.result)},this._chunkError=function(){this._sendError(T.error)}}function p(S){var T;u.call(this,S=S||{}),this.stream=function(_){return T=_,this._nextChunk()},this._nextChunk=function(){var _,R;if(!this._finished)return _=this._config.chunkSize,T=_?(R=T.substring(0,_),T.substring(_)):(R=T,""),this._finished=!T,this.parseChunk(R)}}function y(S){u.call(this,S=S||{});var T=[],_=!0,R=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(j){this._input=j,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):_=!0},this._streamData=k(function(j){try{T.push(typeof j=="string"?j:j.toString(this._config.encoding)),_&&(_=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(V){this._streamError(V)}},this),this._streamError=k(function(j){this._streamCleanUp(),this._sendError(j)},this),this._streamEnd=k(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(S){var T,_,R,j,V=Math.pow(2,53),B=-V,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,I=this,N=0,O=0,$=!1,U=!1,M=[],F={data:[],errors:[],meta:{}};function J(G){return S.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function Y(){if(F&&R&&(H("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),R=!1),S.skipEmptyLines&&(F.data=F.data.filter(function(Q){return!J(Q)})),W()){let Q=function(q,ce){P(S.transformHeader)&&(q=S.transformHeader(q,ce)),M.push(q)};if(F)if(Array.isArray(F.data[0])){for(var G=0;W()&&G<F.data.length;G++)F.data[G].forEach(Q);F.data.splice(0,1)}else F.data.forEach(Q)}function oe(Q,q){for(var ce=S.header?{}:[],ae=0;ae<Q.length;ae++){var ge=ae,Re=Q[ae],Re=((Ee,Be)=>(Te=>(S.dynamicTypingFunction&&S.dynamicTyping[Te]===void 0&&(S.dynamicTyping[Te]=S.dynamicTypingFunction(Te)),(S.dynamicTyping[Te]||S.dynamicTyping)===!0))(Ee)?Be==="true"||Be==="TRUE"||Be!=="false"&&Be!=="FALSE"&&((Te=>{if(te.test(Te)&&(Te=parseFloat(Te),B<Te&&Te<V))return 1})(Be)?parseFloat(Be):K.test(Be)?new Date(Be):Be===""?null:Be):Be)(ge=S.header?ae>=M.length?"__parsed_extra":M[ae]:ge,Re=S.transform?S.transform(Re,ge):Re);ge==="__parsed_extra"?(ce[ge]=ce[ge]||[],ce[ge].push(Re)):ce[ge]=Re}return S.header&&(ae>M.length?H("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+ae,O+q):ae<M.length&&H("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+ae,O+q)),ce}var re;F&&(S.header||S.dynamicTyping||S.transform)&&(re=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(oe),re=F.data.length):F.data=oe(F.data,0),S.header&&F.meta&&(F.meta.fields=M),O+=re)}function W(){return S.header&&M.length===0}function H(G,oe,re,Q){G={type:G,code:oe,message:re},Q!==void 0&&(G.row=Q),F.errors.push(G)}P(S.step)&&(j=S.step,S.step=function(G){F=G,W()?Y():(Y(),F.data.length!==0&&(N+=G.data.length,S.preview&&N>S.preview?_.abort():(F.data=F.data[0],j(F,I))))}),this.parse=function(G,oe,re){var Q=S.quoteChar||'"',Q=(S.newline||(S.newline=this.guessLineEndings(G,Q)),R=!1,S.delimiter?P(S.delimiter)&&(S.delimiter=S.delimiter(G),F.meta.delimiter=S.delimiter):((Q=((q,ce,ae,ge,Re)=>{var Ee,Be,Te,mt;Re=Re||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Qt=0;Qt<Re.length;Qt++){for(var Xt,Ye=Re[Qt],$t=0,Ze=0,Mt=0,nt=(Te=void 0,new v({comments:ge,delimiter:Ye,newline:ce,preview:10}).parse(q)),gt=0;gt<nt.data.length;gt++)ae&&J(nt.data[gt])?Mt++:(Xt=nt.data[gt].length,Ze+=Xt,Te===void 0?Te=Xt:0<Xt&&($t+=Math.abs(Xt-Te),Te=Xt));0<nt.data.length&&(Ze/=nt.data.length-Mt),(Be===void 0||$t<=Be)&&(mt===void 0||mt<Ze)&&1.99<Ze&&(Be=$t,Ee=Ye,mt=Ze)}return{successful:!!(S.delimiter=Ee),bestDelimiter:Ee}})(G,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=Q.bestDelimiter:(R=!0,S.delimiter=c.DefaultDelimiter),F.meta.delimiter=S.delimiter),E(S));return S.preview&&S.header&&Q.preview++,T=G,_=new v(Q),F=_.parse(T,oe,re),Y(),$?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,_.abort(),T=P(S.chunk)?"":T.substring(_.getCharIndex())},this.resume=function(){I.streamer._halted?($=!1,I.streamer.parseChunk(T,!0)):setTimeout(I.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,_.abort(),F.meta.aborted=!0,P(S.complete)&&S.complete(F),T=""},this.guessLineEndings=function(q,Q){q=q.substring(0,1048576);var Q=new RegExp(w(Q)+"([^]*?)"+w(Q),"gm"),re=(q=q.replace(Q,"")).split("\r"),Q=q.split(`
`),q=1<Q.length&&Q[0].length<re[0].length;if(re.length===1||q)return`
`;for(var ce=0,ae=0;ae<re.length;ae++)re[ae][0]===`
`&&ce++;return ce>=re.length/2?`\r
`:"\r"}}function w(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(S){var T=(S=S||{}).delimiter,_=S.newline,R=S.comments,j=S.step,V=S.preview,B=S.fastMode,te=null,K=S.quoteChar==null?'"':S.quoteChar,I=K;if(S.escapeChar!==void 0&&(I=S.escapeChar),(typeof T!="string"||-1<c.BAD_DELIMITERS.indexOf(T))&&(T=","),R===T)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<c.BAD_DELIMITERS.indexOf(R))&&(R=!1),_!==`
`&&_!=="\r"&&_!==`\r
`&&(_=`
`);var N=0,O=!1;this.parse=function($,U,M){if(typeof $!="string")throw new Error("Input must be a string");var F=$.length,J=T.length,Y=_.length,W=R.length,H=P(j),G=[],oe=[],re=[],Q=N=0;if(!$)return Ye();if(B||B!==!1&&$.indexOf(K)===-1){for(var q=$.split(_),ce=0;ce<q.length;ce++){if(re=q[ce],N+=re.length,ce!==q.length-1)N+=_.length;else if(M)return Ye();if(!R||re.substring(0,W)!==R){if(H){if(G=[],Te(re.split(T)),$t(),O)return Ye()}else Te(re.split(T));if(V&&V<=ce)return G=G.slice(0,V),Ye(!0)}}return Ye()}for(var ae=$.indexOf(T,N),ge=$.indexOf(_,N),Re=new RegExp(w(I)+w(K),"g"),Ee=$.indexOf(K,N);;)if($[N]===K)for(Ee=N,N++;;){if((Ee=$.indexOf(K,Ee+1))===-1)return M||oe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:G.length,index:N}),Qt();if(Ee===F-1)return Qt($.substring(N,Ee).replace(Re,K));if(K===I&&$[Ee+1]===I)Ee++;else if(K===I||Ee===0||$[Ee-1]!==I){ae!==-1&&ae<Ee+1&&(ae=$.indexOf(T,Ee+1));var Be=mt((ge=ge!==-1&&ge<Ee+1?$.indexOf(_,Ee+1):ge)===-1?ae:Math.min(ae,ge));if($.substr(Ee+1+Be,J)===T){re.push($.substring(N,Ee).replace(Re,K)),$[N=Ee+1+Be+J]!==K&&(Ee=$.indexOf(K,N)),ae=$.indexOf(T,N),ge=$.indexOf(_,N);break}if(Be=mt(ge),$.substring(Ee+1+Be,Ee+1+Be+Y)===_){if(re.push($.substring(N,Ee).replace(Re,K)),Xt(Ee+1+Be+Y),ae=$.indexOf(T,N),Ee=$.indexOf(K,N),H&&($t(),O))return Ye();if(V&&G.length>=V)return Ye(!0);break}oe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:G.length,index:N}),Ee++}}else if(R&&re.length===0&&$.substring(N,N+W)===R){if(ge===-1)return Ye();N=ge+Y,ge=$.indexOf(_,N),ae=$.indexOf(T,N)}else if(ae!==-1&&(ae<ge||ge===-1))re.push($.substring(N,ae)),N=ae+J,ae=$.indexOf(T,N);else{if(ge===-1)break;if(re.push($.substring(N,ge)),Xt(ge+Y),H&&($t(),O))return Ye();if(V&&G.length>=V)return Ye(!0)}return Qt();function Te(Ze){G.push(Ze),Q=N}function mt(Ze){var Mt=0;return Mt=Ze!==-1&&(Ze=$.substring(Ee+1,Ze))&&Ze.trim()===""?Ze.length:Mt}function Qt(Ze){return M||(Ze===void 0&&(Ze=$.substring(N)),re.push(Ze),N=F,Te(re),H&&$t()),Ye()}function Xt(Ze){N=Ze,Te(re),re=[],ge=$.indexOf(_,N)}function Ye(Ze){if(S.header&&!U&&G.length){var Mt=G[0],nt={},gt=new Set(Mt);let fn=!1;for(let yt=0;yt<Mt.length;yt++){let Ut=Mt[yt];if(nt[Ut=P(S.transformHeader)?S.transformHeader(Ut,yt):Ut]){let At,Zn=nt[Ut];for(;At=Ut+"_"+Zn,Zn++,gt.has(At););gt.add(At),Mt[yt]=At,nt[Ut]++,fn=!0,(te=te===null?{}:te)[At]=Ut}else nt[Ut]=1,Mt[yt]=Ut;gt.add(Ut)}fn&&console.warn("Duplicate headers found and renamed.")}return{data:G,errors:oe,meta:{delimiter:T,linebreak:_,aborted:O,truncated:!!Ze,cursor:Q+(U||0),renamedHeaders:te}}}function $t(){j(Ye()),G=[],oe=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return N}}function x(S){var T=S.data,_=a[T.workerId],R=!1;if(T.error)_.userError(T.error,T.file);else if(T.results&&T.results.data){var j={abort:function(){R=!0,b(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(P(_.userStep)){for(var V=0;V<T.results.data.length&&(_.userStep({data:T.results.data[V],errors:T.results.errors,meta:T.results.meta},j),!R);V++);delete T.results}else P(_.userChunk)&&(_.userChunk(T.results,j,T.file),delete T.results)}T.finished&&!R&&b(T.workerId,T.results)}function b(S,T){var _=a[S];P(_.userComplete)&&_.userComplete(T),_.terminate(),delete a[S]}function C(){throw new Error("Not implemented.")}function E(S){if(typeof S!="object"||S===null)return S;var T,_=Array.isArray(S)?[]:{};for(T in S)_[T]=E(S[T]);return _}function k(S,T){return function(){S.apply(T,arguments)}}function P(S){return typeof S=="function"}return c.parse=function(S,T){var _=(T=T||{}).dynamicTyping||!1;if(P(_)&&(T.dynamicTypingFunction=_,_={}),T.dynamicTyping=_,T.transform=!!P(T.transform)&&T.transform,!T.worker||!c.WORKERS_SUPPORTED)return _=null,c.NODE_STREAM_INPUT,typeof S=="string"?(S=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(S),_=new(T.download?d:p)(T)):S.readable===!0&&P(S.read)&&P(S.on)?_=new y(T):(r.File&&S instanceof File||S instanceof Object)&&(_=new f(T)),_.stream(S);(_=(()=>{var R;return!!c.WORKERS_SUPPORTED&&(R=(()=>{var j=r.URL||r.webkitURL||null,V=n.toString();return c.BLOB_URL||(c.BLOB_URL=j.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=x,R.id=l++,a[R.id]=R)})()).userStep=T.step,_.userChunk=T.chunk,_.userComplete=T.complete,_.userError=T.error,T.step=P(T.step),T.chunk=P(T.chunk),T.complete=P(T.complete),T.error=P(T.error),delete T.worker,_.postMessage({input:S,config:T,workerId:_.id})},c.unparse=function(S,T){var _=!1,R=!0,j=",",V=`\r
`,B='"',te=B+B,K=!1,I=null,N=!1,O=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||c.BAD_DELIMITERS.filter(function(M){return T.delimiter.indexOf(M)!==-1}).length||(j=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||(_=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(K=T.skipEmptyLines),typeof T.newline=="string"&&(V=T.newline),typeof T.quoteChar=="string"&&(B=T.quoteChar),typeof T.header=="boolean"&&(R=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");I=T.columns}T.escapeChar!==void 0&&(te=T.escapeChar+B),T.escapeFormulae instanceof RegExp?N=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(w(B),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return $(null,S,K);if(typeof S[0]=="object")return $(I||Object.keys(S[0]),S,K)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||I),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),$(S.fields||[],S.data||[],K);throw new Error("Unable to serialize unrecognized input");function $(M,F,J){var Y="",W=(typeof M=="string"&&(M=JSON.parse(M)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(M)&&0<M.length),H=!Array.isArray(F[0]);if(W&&R){for(var G=0;G<M.length;G++)0<G&&(Y+=j),Y+=U(M[G],G);0<F.length&&(Y+=V)}for(var oe=0;oe<F.length;oe++){var re=(W?M:F[oe]).length,Q=!1,q=W?Object.keys(F[oe]).length===0:F[oe].length===0;if(J&&!W&&(Q=J==="greedy"?F[oe].join("").trim()==="":F[oe].length===1&&F[oe][0].length===0),J==="greedy"&&W){for(var ce=[],ae=0;ae<re;ae++){var ge=H?M[ae]:ae;ce.push(F[oe][ge])}Q=ce.join("").trim()===""}if(!Q){for(var Re=0;Re<re;Re++){0<Re&&!q&&(Y+=j);var Ee=W&&H?M[Re]:Re;Y+=U(F[oe][Ee],Re)}oe<F.length-1&&(!J||0<re&&!q)&&(Y+=V)}}return Y}function U(M,F){var J,Y;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(Y=!1,N&&typeof M=="string"&&N.test(M)&&(M="'"+M,Y=!0),J=M.toString().replace(O,te),(Y=Y||_===!0||typeof _=="function"&&_(M,F)||Array.isArray(_)&&_[F]||((W,H)=>{for(var G=0;G<H.length;G++)if(-1<W.indexOf(H[G]))return!0;return!1})(J,c.BAD_DELIMITERS)||-1<J.indexOf(j)||J.charAt(0)===" "||J.charAt(J.length-1)===" ")?B+J+B:J)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!o&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=v,c.ParserHandle=m,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=p,c.ReadableStreamStreamer=y,r.jQuery&&((s=r.jQuery).fn.parse=function(S){var T=S.config||{},_=[];return this.each(function(V){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)_.push({file:this.files[B],inputElem:this,instanceConfig:s.extend({},T)})}),R(),this;function R(){if(_.length===0)P(S.complete)&&S.complete();else{var V,B,te,K,I=_[0];if(P(S.before)){var N=S.before(I.file,I.inputElem);if(typeof N=="object"){if(N.action==="abort")return V="AbortError",B=I.file,te=I.inputElem,K=N.reason,void(P(S.error)&&S.error({name:V},B,te,K));if(N.action==="skip")return void j();typeof N.config=="object"&&(I.instanceConfig=s.extend(I.instanceConfig,N.config))}else if(N==="skip")return void j()}var O=I.instanceConfig.complete;I.instanceConfig.complete=function($){P(O)&&O($,I.file,I.inputElem),j()},c.parse(I.file,I.instanceConfig)}}function j(){_.splice(0,1),R()}}),i&&(r.onmessage=function(S){S=S.data,c.WORKER_ID===void 0&&S&&(c.WORKER_ID=S.workerId),typeof S.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(S.input,S.config),finished:!0}):(r.File&&S.input instanceof File||S.input instanceof Object)&&(S=c.parse(S.input,S.config))&&r.postMessage({workerId:c.WORKER_ID,results:S,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(y.prototype=Object.create(u.prototype)).constructor=y,c})})(qI);var UQ=qI.exports;const kS=Ow(UQ),WQ=t=>{const e=kS.unparse(t),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="products.csv",r.click()},HQ=()=>{const t=[{name:"",description:"",strain:"",stock:"",regular_price:"",shipping_price:""}],e=kS.unparse(t),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="products_template.csv",r.click()},KQ=t=>new Promise((e,n)=>{kS.parse(t,{header:!0,complete:r=>{e(r.data)},error:r=>{n(r)}})});function qQ(){const{data:t,isLoading:e,error:n}=Zq(),[r,s]=g.useState(null),[o,i]=g.useState({}),a=di(),[l,c]=g.useState(""),u=Pm(),[d,f]=g.useState(!1),[p,y]=g.useState(["name","strain","description","image","video_url","categories","stock","regular_price","shipping_price"]),m=[{key:"name",label:"Name"},{key:"strain",label:"Strain"},{key:"description",label:"Description"},{key:"image",label:"Image"},{key:"video_url",label:"Video"},{key:"categories",label:"Categories"},{key:"stock",label:"Stock"},{key:"regular_price",label:"Price"},{key:"shipping_price",label:"Shipping"}],w=I=>{y(N=>N.includes(I)?N.filter(O=>O!==I):[...N,I])},v=async I=>{console.log("ProductManagement: Starting edit for product:",I.id),s(I.id),i({...I,categories:I.categories||[]})},x=async()=>{console.log("ProductManagement: Saving product:",r);try{if(!r||!o.name){ve.error("Product name is required");return}const{error:I}=await we.from("products").update({name:o.name,description:o.description,strain:o.strain,stock:o.stock,regular_price:o.regular_price,shipping_price:o.shipping_price,primary_media_type:"image",media:[]}).eq("id",r);if(I)throw I;if(o.categories){const{error:N}=await we.from("product_categories").delete().eq("product_id",r);if(N)throw N;const{data:O}=await we.from("categories").select("id, name").in("name",o.categories);if(O){const $=O.map(M=>({product_id:r,category_id:M.id})),{error:U}=await we.from("product_categories").insert($);if(U)throw U}}await u.invalidateQueries({queryKey:["products"]}),await u.invalidateQueries({queryKey:["products","product_categories"]}),s(null),i({}),ve.success("Product updated successfully")}catch(I){console.error("Error updating product:",I),ve.error("Failed to update product")}},b=()=>{console.log("ProductManagement: Canceling edit"),s(null),i({})},C=I=>{console.log("ProductManagement: Updating edit values:",I),i(I)},E=async I=>{console.log("ProductManagement: Deleting product:",I);try{const{error:N}=await we.from("products").delete().eq("id",I);if(N)throw N;ve.success("Product deleted successfully")}catch(N){console.error("Error deleting product:",N),ve.error("Failed to delete product")}},k=async(I,N)=>{console.log("ProductManagement: Uploading image for product:",I);try{const{error:O}=await we.from("products").update({image_url:N}).eq("id",I);if(O)throw O;ve.success("Image uploaded successfully")}catch(O){console.error("Error uploading image:",O),ve.error("Failed to upload image")}},P=async(I,N)=>{console.log("ProductManagement: Uploading video for product:",I);try{const{error:O}=await we.from("products").update({video_url:N}).eq("id",I);if(O)throw O;ve.success("Video uploaded successfully")}catch(O){console.error("Error uploading video:",O),ve.error("Failed to upload video")}},S=async(I,N)=>{console.log("ProductManagement: Deleting media for product:",I,N);try{const O=N==="image"?{image_url:null}:{video_url:null},{error:$}=await we.from("products").update(O).eq("id",I);if($)throw $;ve.success(`${N} deleted successfully`)}catch(O){console.error("Error deleting media:",O),ve.error(`Failed to delete ${N}`)}},T=(I,N)=>{console.log("ProductManagement: Media clicked:",I,N),window.open(N,"_blank")},_=async I=>{try{if(!I.name){ve.error("Product name is required");return}const{data:N,error:O}=await we.from("products").insert([{name:I.name,description:I.description,strain:I.strain,stock:I.stock,regular_price:I.regular_price,shipping_price:I.shipping_price,primary_media_type:"image",media:[]}]).select().single();if(O)throw O;await u.invalidateQueries({queryKey:["products"]}),f(!1),ve.success("Product added successfully")}catch(N){console.error("Error adding product:",N),ve.error("Failed to add product")}},R=async()=>{const I=document.createElement("input");I.type="file",I.accept=".csv",I.onchange=async N=>{var $;const O=($=N.target.files)==null?void 0:$[0];if(O)try{const U=await KQ(O);console.log("Importing products:",U);for(const M of U){if(!M.name){console.error("Skipping product without name:",M);continue}const{error:F}=await we.from("products").insert([{name:M.name,description:M.description,strain:M.strain,stock:M.stock,regular_price:M.regular_price,shipping_price:M.shipping_price,primary_media_type:"image",media:[]}]);if(F)throw console.error("Error importing product:",F),F}await u.invalidateQueries({queryKey:["products"]}),ve.success("Products imported successfully")}catch(U){console.error("Error importing products:",U),ve.error("Failed to import products")}},I.click()},j=()=>{t&&(WQ(t),ve.success("Products exported successfully"))},V=()=>{HQ(),ve.success("Template downloaded successfully")},[B,te]=g.useState({key:"name",direction:"asc"}),K=I=>{te(N=>({key:I,direction:N.key===I&&N.direction==="asc"?"desc":"asc"}))};return e?h.jsx("div",{children:"Loading products..."}):n?h.jsxs("div",{children:["Error loading products: ",n.message]}):t?h.jsxs("div",{className:"space-y-4",children:[h.jsx($Q,{searchQuery:l,onSearchChange:c,columns:m,visibleColumns:p,onColumnToggle:w,showColumnToggle:!a,onAddProduct:()=>f(!0),onImport:R,onExport:j,onDownloadTemplate:V}),a?h.jsx(zQ,{products:t,onEditStart:v,onEditSave:x,onEditCancel:b,onEditChange:C,editingProduct:r,editValues:o,onDelete:E,onImageUpload:k,onVideoUpload:P,onDeleteMedia:S,onMediaClick:T}):h.jsx(EY,{products:t,editingProduct:r,editValues:o,visibleColumns:p,onEditStart:v,onEditSave:x,onEditCancel:b,onEditChange:C,onDelete:E,onImageUpload:k,onVideoUpload:P,onDeleteMedia:S,onMediaClick:T,sortConfig:B,onSort:K}),h.jsx(VQ,{open:d,onOpenChange:f,onSave:_})]}):h.jsx("div",{children:"No products found"})}function GQ({onCategoryAdded:t}){const[e,n]=g.useState(""),[r,s]=g.useState(!1),o=async i=>{if(i.preventDefault(),!!e.trim())try{s(!0),console.log("CategoryForm: Adding new category:",e);const{error:a}=await we.from("categories").insert([{name:e.trim()}]);if(a){console.error("CategoryForm: Error adding category:",a),a.code==="23505"?ve.error("A category with this name already exists"):ve.error("Failed to add category");return}console.log("CategoryForm: Category added successfully"),ve.success("Category added successfully"),n(""),t()}catch(a){console.error("CategoryForm: Unexpected error:",a),ve.error("An unexpected error occurred")}finally{s(!1)}};return h.jsxs("form",{onSubmit:o,className:"flex gap-2",children:[h.jsx(Fe,{placeholder:"New category name",value:e,onChange:i=>n(i.target.value),className:"flex-1",disabled:r}),h.jsxs(xe,{type:"submit",disabled:r,children:[h.jsx(oM,{className:"mr-2 h-4 w-4"}),"Add Category"]})]})}function JQ({onCategoryChange:t}){const[e,n]=g.useState(null),[r,s]=g.useState(""),{data:o,refetch:i}=Tc({queryKey:["categories"],queryFn:async()=>{const{data:d,error:f}=await we.from("categories").select("*").order("name");if(f)throw f;return d}}),a=d=>{n(d.id),s(d.name)},l=()=>{n(null),s("")},c=async d=>{try{console.log("CategoryList: Saving category edit:",{id:d,name:r});const{error:f}=await we.from("categories").update({name:r}).eq("id",d);if(f)throw f;console.log("CategoryList: Category updated successfully"),ve.success("Category updated successfully"),n(null),s(""),i(),t==null||t()}catch(f){console.error("CategoryList: Error updating category:",f),ve.error("Failed to update category")}},u=async d=>{try{console.log("CategoryList: Starting category deletion:",d);const{error:f}=await we.from("categories").delete().eq("id",d);if(f)throw f;console.log("CategoryList: Category deleted successfully"),ve.success("Category deleted successfully"),i(),t==null||t()}catch(f){console.error("CategoryList: Error deleting category:",f),ve.error("Failed to delete category")}};return h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"font-semibold",children:"Categories"}),h.jsx("div",{className:"space-y-2",children:o==null?void 0:o.map(d=>h.jsx("div",{className:"flex items-center justify-between gap-2 p-2 bg-white rounded-lg border",children:e===d.id?h.jsxs(h.Fragment,{children:[h.jsx(Fe,{value:r,onChange:f=>s(f.target.value),className:"flex-1"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(xe,{size:"icon",variant:"ghost",onClick:()=>c(d.id),children:h.jsx(LU,{className:"h-4 w-4"})}),h.jsx(xe,{size:"icon",variant:"ghost",onClick:l,children:h.jsx(ui,{className:"h-4 w-4"})})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:d.name}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(xe,{size:"icon",variant:"ghost",onClick:()=>a(d),children:h.jsx(Ux,{className:"h-4 w-4"})}),h.jsx(xe,{size:"icon",variant:"ghost",onClick:()=>u(d.id),children:h.jsx(la,{className:"h-4 w-4"})})]})]})},d.id))})]})}function YQ({onCategoryChange:t}){const e=Pm(),n=()=>{e.invalidateQueries({queryKey:["categories"]}),t==null||t()},r=()=>{e.invalidateQueries({queryKey:["categories"]}),t==null||t()};return h.jsxs("div",{className:"space-y-4",children:[h.jsx(GQ,{onCategoryAdded:n}),h.jsx(JQ,{onCategoryChange:r})]})}const QQ=t=>{const e=document.documentElement,n=r=>{r=r.replace("#","");const s=parseInt(r.substring(0,2),16)/255,o=parseInt(r.substring(2,4),16)/255,i=parseInt(r.substring(4,6),16)/255,a=Math.max(s,o,i),l=Math.min(s,o,i);let c=0,u=0;const d=(a+l)/2;if(a!==l){const f=a-l;switch(u=d>.5?f/(2-a-l):f/(a+l),a){case s:c=(o-i)/f+(o<i?6:0);break;case o:c=(i-s)/f+2;break;case i:c=(s-o)/f+4;break}c/=6}return`${Math.round(c*360)} ${Math.round(u*100)}% ${Math.round(d*100)}%`};t.primary&&e.style.setProperty("--primary",n(t.primary)),t.secondary&&e.style.setProperty("--secondary",n(t.secondary)),t.background&&e.style.setProperty("--background",n(t.background)),t.foreground&&e.style.setProperty("--foreground",n(t.foreground)),t.muted&&e.style.setProperty("--muted",n(t.muted)),t.accent&&e.style.setProperty("--accent",n(t.accent)),console.log("Updated theme colors:",t)};function XQ({settings:t,onSettingChange:e}){const n=s=>{const{name:o,value:i}=s.target;e(o,i),o.includes("color")&&ve.success("Color updated! Save to make permanent.",{description:`${o.replace("_"," ")} changed to ${i}`})},r=(s,o)=>{const i=parseFloat(s.target.value);e(`${o}_opacity`,i),ve.success(`${o} opacity updated! Save to make permanent.`,{description:`${o} opacity changed to ${Math.round(i*100)}%`})};return h.jsxs(Ca,{children:[h.jsx(Ea,{children:h.jsx(Hd,{children:"Theme Colors"})}),h.jsxs(ka,{className:"grid gap-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"primary_color",children:"Primary Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"primary_color",name:"primary_color",type:"color",value:t.primary_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.primary_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"secondary_color",children:"Secondary Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"secondary_color",name:"secondary_color",type:"color",value:t.secondary_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.secondary_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"pwa_theme_color",children:"Theme Color (Foreground)"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"pwa_theme_color",name:"pwa_theme_color",type:"color",value:t.pwa_theme_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.pwa_theme_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"pwa_background_color",children:"PWA Background Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"pwa_background_color",name:"pwa_background_color",type:"color",value:t.pwa_background_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.pwa_background_color})]})]})]}),h.jsxs("div",{className:"space-y-4 border-t pt-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"background_color",children:"Page Background Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"background_color",name:"background_color",type:"color",value:t.background_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.background_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"background_opacity",children:"Background Opacity"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"background_opacity",name:"background_opacity",type:"range",min:"0",max:"1",step:"0.1",value:t.background_opacity,onChange:s=>r(s,"background"),className:"w-full"}),h.jsxs("span",{className:"text-sm text-muted-foreground w-12",children:[Math.round(t.background_opacity*100),"%"]})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"header_color",children:"Header Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"header_color",name:"header_color",type:"color",value:t.header_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.header_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"header_opacity",children:"Header Opacity"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"header_opacity",name:"header_opacity",type:"range",min:"0",max:"1",step:"0.1",value:t.header_opacity,onChange:s=>r(s,"header"),className:"w-full"}),h.jsxs("span",{className:"text-sm text-muted-foreground w-12",children:[Math.round(t.header_opacity*100),"%"]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"toolbar_color",children:"Toolbar Color"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"toolbar_color",name:"toolbar_color",type:"color",value:t.toolbar_color,onChange:n,className:"w-20 h-10"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:t.toolbar_color})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"toolbar_opacity",children:"Toolbar Opacity"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Fe,{id:"toolbar_opacity",name:"toolbar_opacity",type:"range",min:"0",max:"1",step:"0.1",value:t.toolbar_opacity,onChange:s=>r(s,"toolbar"),className:"w-full"}),h.jsxs("span",{className:"text-sm text-muted-foreground w-12",children:[Math.round(t.toolbar_opacity*100),"%"]})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"text-sm font-medium mb-2",children:"Color Preview"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(xe,{variant:"default",children:"Primary Button"}),h.jsx(xe,{variant:"secondary",children:"Secondary Button"})]})]})]})]})}var TS="Switch",[ZQ,rie]=Es(TS),[eX,tX]=ZQ(TS),GI=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=g.useState(null),y=$e(e,b=>p(b)),m=g.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Qr({prop:s,defaultProp:o,onChange:c});return h.jsxs(eX,{scope:n,checked:v,disabled:a,children:[h.jsx(be.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":QI(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:y,onClick:se(t.onClick,b=>{x(C=>!C),w&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),w&&h.jsx(nX,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});GI.displayName=TS;var JI="SwitchThumb",YI=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tX(JI,n);return h.jsx(be.span,{"data-state":QI(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});YI.displayName=JI;var nX=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,o=g.useRef(null),i=$b(n),a=Bb(e);return g.useEffect(()=>{const l=o.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[i,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function QI(t){return t?"checked":"unchecked"}var XI=GI,rX=YI;const PS=g.forwardRef(({className:t,...e},n)=>h.jsx(XI,{className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:h.jsx(rX,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));PS.displayName=XI.displayName;function _p({status:t}){return h.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([e,n])=>h.jsxs("div",{className:"flex items-center gap-2",children:[n?h.jsx(Cc,{className:"h-4 w-4 text-green-500"}):h.jsx(ui,{className:"h-4 w-4 text-red-500"}),h.jsx("span",{className:"text-sm text-muted-foreground uppercase",children:e})]},e))})}function sX({settings:t,onSettingChange:e}){const n=async s=>{console.log("Handling logo upload:",{url:s});try{const{data:o,error:i}=await we.from("site_settings").select("*").maybeSingle();if(i)throw console.error("Error fetching settings:",i),i;if(!(o!=null&&o.id))throw new Error("No settings record found");const l=await(await fetch(s)).blob(),c=new File([l],"logo.png",{type:"image/png"});console.log("Converting to WebP...");const{webpBlob:u}=await wd(c),d=new File([u],"logo.webp",{type:"image/webp"});console.log("Uploading WebP version...");const{data:f,error:p}=await we.storage.from("media").upload("sitesettings/logo.webp",d,{cacheControl:"3600",upsert:!0});if(p)throw console.error("Error uploading WebP version:",p),p;console.log("WebP version uploaded successfully");const{error:y}=await we.from("site_settings").update({logo_url:s,logo_url_webp:"https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/logo.webp"}).eq("id",o.id);if(y)throw console.error("Error updating site settings:",y),y;e("logo_url",s),e("logo_url_webp","https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/logo.webp"),ve.success("Logo uploaded successfully")}catch(o){console.error("Error in handleLogoUpload:",o),ve.error("Failed to process logo upload")}},r=async s=>{console.log("Handling favicon upload:",{url:s});try{const{data:o,error:i}=await we.from("site_settings").select("*").maybeSingle();if(i)throw console.error("Error fetching settings:",i),i;if(!(o!=null&&o.id))throw new Error("No settings record found");const l=await(await fetch(s)).blob(),c=new File([l],"favicon.png",{type:"image/png"});console.log("Converting to WebP...");const{webpBlob:u}=await wd(c),d=new File([u],"favicon.webp",{type:"image/webp"}),f=new File([l],"favicon.ico",{type:"image/x-icon"});console.log("Uploading all versions...");const{error:p}=await we.storage.from("media").upload("sitesettings/favicon.ico",f,{cacheControl:"3600",upsert:!0});if(p)throw console.error("Error uploading ICO version:",p),p;const{error:y}=await we.storage.from("media").upload("sitesettings/favicon.png",c,{cacheControl:"3600",upsert:!0});if(y)throw console.error("Error uploading PNG version:",y),y;const{error:m}=await we.storage.from("media").upload("sitesettings/favicon.webp",d,{cacheControl:"3600",upsert:!0});if(m)throw console.error("Error uploading WebP version:",m),m;const w="https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/favicon.ico",v="https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/favicon.png",x="https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/favicon.webp",{error:b}=await we.from("site_settings").update({favicon_url:w,favicon_png_url:v,favicon_webp_url:x}).eq("id",o.id);if(b)throw console.error("Error updating site settings:",b),b;e("favicon_url",w),e("favicon_png_url",v),e("favicon_webp_url",x),ve.success("Favicon uploaded successfully")}catch(o){console.error("Error in handleFaviconUpload:",o),ve.error("Failed to process favicon upload")}};return h.jsxs(Ca,{children:[h.jsx(Ea,{children:h.jsx(Hd,{children:"Logo Settings"})}),h.jsxs(ka,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(PS,{id:"show_site_logo",checked:t.show_site_logo,onCheckedChange:s=>e("show_site_logo",s)}),h.jsx(_e,{htmlFor:"show_site_logo",children:"Show Site Logo"})]}),h.jsx(_e,{children:"Logo"}),h.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[t.logo_url&&h.jsxs("div",{className:"flex items-center justify-between p-4",children:[h.jsx("div",{className:"flex-1",children:h.jsx("img",{src:t.logo_url,alt:"Logo",className:"w-32 h-32 object-contain rounded-md mb-2"})}),h.jsx("div",{className:"ml-4",children:h.jsx(_p,{status:{png:!!t.logo_url,webp:!!t.logo_url_webp}})})]}),h.jsx("div",{className:"p-4",children:h.jsx(Yn,{onUploadComplete:n,accept:"image/*",folderPath:"sitesettings",fileName:"logo"})})]}),h.jsx(_e,{children:"Favicon"}),h.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[t.favicon_url&&h.jsxs("div",{className:"flex items-center justify-between p-4",children:[h.jsx("div",{className:"flex-1",children:h.jsx("img",{src:t.favicon_url,alt:"Favicon",className:"w-16 h-16 object-contain rounded-md mb-2"})}),h.jsx("div",{className:"ml-4",children:h.jsx(_p,{status:{ico:!!t.favicon_url,png:!!t.favicon_png_url,webp:!!t.favicon_webp_url}})})]}),h.jsx("div",{className:"p-4",children:h.jsx(Yn,{onUploadComplete:r,accept:"image/*",folderPath:"sitesettings",fileName:"favicon"})})]})]})]})}function oX({settings:t,onSettingChange:e}){return h.jsxs(Ca,{children:[h.jsx(Ea,{children:h.jsx(Hd,{children:"Description Settings"})}),h.jsxs(ka,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(PS,{id:"show_site_description",checked:t.show_site_description,onCheckedChange:n=>e("show_site_description",n)}),h.jsx(_e,{htmlFor:"show_site_description",children:"Show Site Description"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"site_description",children:"Site Description"}),h.jsx(Oc,{id:"site_description",value:t.site_description,onChange:n=>e("site_description",n.target.value),placeholder:"Enter site description",className:"min-h-[100px]"})]})]})]})}function iX({settings:t,onSettingChange:e}){const n=async r=>{try{const o=await(await fetch(r)).blob(),i=new File([o],"og-image.png",{type:"image/png"});console.log("Converting to WebP...");const{webpBlob:a}=await wd(i),l=new File([a],"og-image.webp",{type:"image/webp"});console.log("Uploading WebP version...");const{data:c,error:u}=await we.storage.from("media").upload("sitesettings/og-image.webp",l,{cacheControl:"3600",upsert:!0});if(u)throw u;const d="https://nzqdkelbytkvvwdgywja.supabase.co/storage/v1/object/public/media/sitesettings/og-image.webp",{error:f}=await we.from("site_settings").update({og_image:r,og_image_webp:d}).eq("id",t.id);if(f)throw f;e("og_image",r),e("og_image_webp",d),ve.success("OG image uploaded successfully")}catch(s){console.error("Error in handleOgImageUpload:",s),ve.error("Failed to process OG image upload")}};return h.jsxs(Ca,{children:[h.jsx(Ea,{children:h.jsx(Hd,{children:"Open Graph Settings"})}),h.jsxs(ka,{className:"space-y-4",children:[h.jsx(_e,{children:"OG Image"}),h.jsxs("div",{className:"rounded-lg border bg-card text-card-foreground shadow-sm",children:[t.og_image&&h.jsx("div",{className:"flex items-center justify-between p-4",children:h.jsx("div",{className:"flex-1",children:h.jsx("img",{src:t.og_image,alt:"OG Image",className:"w-32 h-32 object-contain rounded-md mb-2"})})}),h.jsx("div",{className:"p-4",children:h.jsx(Yn,{onUploadComplete:n,accept:"image/*",folderPath:"sitesettings",fileName:"og-image"})})]})]})]})}const aX=({desktopScreenshot:t,mobileScreenshot:e,onDesktopUpload:n,onMobileUpload:r})=>{const s=async(i,a)=>{console.log(`Handling ${a} screenshot upload:`,{url:i});try{const{data:l,error:c}=await we.from("site_settings").select("*").maybeSingle();if(c)throw console.error("Error fetching settings:",c),c;if(!(l!=null&&l.id))throw new Error("No settings record found");const d=await(await fetch(i)).blob(),f=new File([d],`${a}_screenshot.png`,{type:"image/png"});console.log("Converting to WebP...");const{webpBlob:p}=await wd(f),y=new File([p],`${a}_screenshot.webp`,{type:"image/webp"});console.log("Uploading WebP version...");const{data:m,error:w}=await we.storage.from("media").upload(`sitesettings/pwa/${a}_screenshot.webp`,y,{cacheControl:"3600",upsert:!0});if(w)throw console.error("Error uploading WebP version:",w),w;console.log("WebP version uploaded successfully");const{error:v}=await we.from("site_settings").update({[`pwa_${a}_screenshot`]:i,[`pwa_${a}_screenshot_webp`]:`https://fwsdoiaodphgyeteafbq.supabase.co/storage/v1/object/public/media/sitesettings/pwa/${a}_screenshot.webp`}).eq("id",l.id);if(v)throw console.error("Error updating site settings:",v),v;a==="desktop"?n(i):r(i),ve.success(`${a.charAt(0).toUpperCase()+a.slice(1)} screenshot uploaded successfully`)}catch(l){console.error(`Error in handle${a}ScreenshotUpload:`,l),ve.error(`Failed to process ${a} screenshot upload`)}},o=i=>i?`${i}?t=${Date.now()}`:"";return h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{children:"Desktop Screenshot (Wide)"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[t&&h.jsx("img",{src:o(t),alt:"Desktop screenshot",className:"w-full h-32 object-cover rounded-md mb-2"}),h.jsx(_p,{status:{png:!!t,webp:!!t}})]}),h.jsx(Yn,{onUploadComplete:i=>s(i,"desktop"),accept:"image/*",folderPath:"sitesettings/pwa",fileName:"desktop_screenshot"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a wide screenshot for desktop PWA install UI"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{children:"Mobile Screenshot"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[e&&h.jsx("img",{src:o(e),alt:"Mobile screenshot",className:"w-full h-32 object-cover rounded-md mb-2"}),h.jsx(_p,{status:{png:!!e,webp:!!e}})]}),h.jsx(Yn,{onUploadComplete:i=>s(i,"mobile"),accept:"image/*",folderPath:"sitesettings/pwa",fileName:"mobile_screenshot"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a mobile-optimized screenshot for PWA install UI"})]})]})};function lX(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var _S="ScrollArea",[ZI,sie]=Es(_S),[cX,jr]=ZI(_S),eL=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...i}=t,[a,l]=g.useState(null),[c,u]=g.useState(null),[d,f]=g.useState(null),[p,y]=g.useState(null),[m,w]=g.useState(null),[v,x]=g.useState(0),[b,C]=g.useState(0),[E,k]=g.useState(!1),[P,S]=g.useState(!1),T=$e(e,R=>l(R)),_=rf(s);return h.jsx(cX,{scope:n,type:r,dir:_,scrollHideDelay:o,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:f,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:k,scrollbarY:m,onScrollbarYChange:w,scrollbarYEnabled:P,onScrollbarYEnabledChange:S,onCornerWidthChange:x,onCornerHeightChange:C,children:h.jsx(be.div,{dir:_,...i,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});eL.displayName=_S;var tL="ScrollAreaViewport",nL=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:s,nonce:o,...i}=t,a=jr(tL,n),l=g.useRef(null),c=$e(e,l,a.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),h.jsx(be.div,{"data-radix-scroll-area-viewport":"",...i,asChild:s,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:wX({asChild:s,children:r},u=>h.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});nL.displayName=tL;var Ts="ScrollAreaScrollbar",NS=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=jr(Ts,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=s,a=t.orientation==="horizontal";return g.useEffect(()=>(a?o(!0):i(!0),()=>{a?o(!1):i(!1)}),[a,o,i]),s.type==="hover"?h.jsx(uX,{...r,ref:e,forceMount:n}):s.type==="scroll"?h.jsx(dX,{...r,ref:e,forceMount:n}):s.type==="auto"?h.jsx(rL,{...r,ref:e,forceMount:n}):s.type==="always"?h.jsx(RS,{...r,ref:e}):null});NS.displayName=Ts;var uX=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=jr(Ts,t.__scopeScrollArea),[o,i]=g.useState(!1);return g.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),h.jsx(dn,{present:n||o,children:h.jsx(rL,{"data-state":o?"visible":"hidden",...r,ref:e})})}),dX=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=jr(Ts,t.__scopeScrollArea),o=t.orientation==="horizontal",i=eg(()=>l("SCROLL_END"),100),[a,l]=lX("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),g.useEffect(()=>{const c=s.viewport,u=o?"scrollLeft":"scrollTop";if(c){let d=c[u];const f=()=>{const p=c[u];d!==p&&(l("SCROLL"),i()),d=p};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[s.viewport,o,l,i]),h.jsx(dn,{present:n||a!=="hidden",children:h.jsx(RS,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:se(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:se(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),rL=g.forwardRef((t,e)=>{const n=jr(Ts,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,i]=g.useState(!1),a=t.orientation==="horizontal",l=eg(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:u)}},10);return uc(n.viewport,l),uc(n.content,l),h.jsx(dn,{present:r||o,children:h.jsx(RS,{"data-state":o?"visible":"hidden",...s,ref:e})})}),RS=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=jr(Ts,t.__scopeScrollArea),o=g.useRef(null),i=g.useRef(0),[a,l]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=lL(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>o.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function d(f,p){return yX(f,i.current,a,p)}return n==="horizontal"?h.jsx(fX,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollLeft,p=hT(f,a,s.dir);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=d(f,s.dir))}}):n==="vertical"?h.jsx(hX,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollTop,p=hT(f,a);o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=d(f))}}):null}),fX=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=jr(Ts,t.__scopeScrollArea),[i,a]=g.useState(),l=g.useRef(null),c=$e(e,l,o.onScrollbarXChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(oL,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zm(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(o.viewport){const f=o.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),uL(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Rp(i.paddingLeft),paddingEnd:Rp(i.paddingRight)}})}})}),hX=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=jr(Ts,t.__scopeScrollArea),[i,a]=g.useState(),l=g.useRef(null),c=$e(e,l,o.onScrollbarYChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),h.jsx(oL,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zm(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(o.viewport){const f=o.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),uL(f,d)&&u.preventDefault()}},onResize:()=>{l.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Rp(i.paddingTop),paddingEnd:Rp(i.paddingBottom)}})}})}),[pX,sL]=ZI(Ts),oL=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...f}=t,p=jr(Ts,n),[y,m]=g.useState(null),w=$e(e,T=>m(T)),v=g.useRef(null),x=g.useRef(""),b=p.viewport,C=r.content-r.viewport,E=wt(u),k=wt(l),P=eg(d,10);function S(T){if(v.current){const _=T.clientX-v.current.left,R=T.clientY-v.current.top;c({x:_,y:R})}}return g.useEffect(()=>{const T=_=>{const R=_.target;(y==null?void 0:y.contains(R))&&E(_,C)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[b,y,C,E]),g.useEffect(k,[r,k]),uc(y,P),uc(p.content,P),h.jsx(pX,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:wt(o),onThumbPointerUp:wt(i),onThumbPositionChange:k,onThumbPointerDown:wt(a),children:h.jsx(be.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:se(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),S(T))}),onPointerMove:se(t.onPointerMove,S),onPointerUp:se(t.onPointerUp,T=>{const _=T.target;_.hasPointerCapture(T.pointerId)&&_.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),Np="ScrollAreaThumb",iL=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=sL(Np,t.__scopeScrollArea);return h.jsx(dn,{present:n||s.hasThumb,children:h.jsx(mX,{ref:e,...r})})}),mX=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=jr(Np,n),i=sL(Np,n),{onThumbPositionChange:a}=i,l=$e(e,d=>i.onThumbChange(d)),c=g.useRef(),u=eg(()=>{c.current&&(c.current(),c.current=void 0)},100);return g.useEffect(()=>{const d=o.viewport;if(d){const f=()=>{if(u(),!c.current){const p=vX(d,a);c.current=p,a()}};return a(),d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[o.viewport,u,a]),h.jsx(be.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:se(t.onPointerDownCapture,d=>{const p=d.target.getBoundingClientRect(),y=d.clientX-p.left,m=d.clientY-p.top;i.onThumbPointerDown({x:y,y:m})}),onPointerUp:se(t.onPointerUp,i.onThumbPointerUp)})});iL.displayName=Np;var MS="ScrollAreaCorner",aL=g.forwardRef((t,e)=>{const n=jr(MS,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(gX,{...t,ref:e}):null});aL.displayName=MS;var gX=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=jr(MS,n),[o,i]=g.useState(0),[a,l]=g.useState(0),c=!!(o&&a);return uc(s.scrollbarX,()=>{var d;const u=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),uc(s.scrollbarY,()=>{var d;const u=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(u),i(u)}),c?h.jsx(be.div,{...r,ref:e,style:{width:o,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Rp(t){return t?parseInt(t,10):0}function lL(t,e){const n=t/e;return isNaN(n)?0:n}function Zm(t){const e=lL(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function yX(t,e,n,r="ltr"){const s=Zm(n),o=s/2,i=e||o,a=s-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return cL([l,c],d)(t)}function hT(t,e,n="ltr"){const r=Zm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,i=e.content-e.viewport,a=o-r,l=n==="ltr"?[0,i]:[i*-1,0],c=z0(t,l);return cL([0,i],[0,a])(c)}function cL(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function uL(t,e){return t>0&&t<e}var vX=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},i=n.left!==o.left,a=n.top!==o.top;(i||a)&&e(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function eg(t,e){const n=wt(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function uc(t,e){const n=wt(e);un(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}function wX(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const s=g.Children.only(r);return g.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var dL=eL,xX=nL,bX=aL;const Mp=g.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(dL,{ref:r,className:ie("relative overflow-hidden",t),...n,children:[h.jsx(xX,{className:"h-full w-full rounded-[inherit]",children:e}),h.jsx(fL,{}),h.jsx(bX,{})]}));Mp.displayName=dL.displayName;const fL=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>h.jsx(NS,{ref:r,orientation:e,className:ie("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:h.jsx(iL,{className:"relative flex-1 rounded-full bg-border"})}));fL.displayName=NS.displayName;const SX=[72,96,128,144,152,192,384,512];function CX({icons:t,onIconsUpdate:e}){const n=async(r,s,o)=>{try{console.log(`Uploading ${s}x${s} ${o} icon`);const a=await(await fetch(r)).blob(),l=`icon-${s}${o==="maskable"?"-maskable":""}`,c=`pwa/${l}.png`,u=`pwa/${l}.webp`,{error:d}=await we.storage.from("media").upload(c,a,{contentType:"image/png",upsert:!0});if(d)throw d;const f=await new Promise(x=>{const b=document.createElement("canvas"),C=b.getContext("2d"),E=new Image;E.onload=()=>{b.width=s,b.height=s,C==null||C.drawImage(E,0,0,s,s),b.toBlob(k=>x(k),"image/webp",.9)},E.src=URL.createObjectURL(a)}),{error:p}=await we.storage.from("media").upload(u,f,{contentType:"image/webp",upsert:!0});if(p)throw p;const{data:{publicUrl:y}}=we.storage.from("media").getPublicUrl(c),{data:{publicUrl:m}}=we.storage.from("media").getPublicUrl(u),w={src:y,sizes:`${s}x${s}`,type:"image/png",purpose:o,webp:m},v=[...t.filter(x=>!(x.sizes===`${s}x${s}`&&x.purpose===o)),w];e(v),ve.success(`${s}x${s} ${o} icon uploaded successfully`)}catch(i){console.error("Error uploading icon:",i),ve.error(`Failed to upload ${s}x${s} ${o} icon`)}};return h.jsx(Mp,{className:"h-[400px] rounded-md border p-4",children:h.jsx("div",{className:"space-y-8",children:SX.map(r=>{const s=(t==null?void 0:t.filter(a=>a.sizes===`${r}x${r}`))||[],o=s.find(a=>a.purpose==="any"),i=s.find(a=>a.purpose==="maskable");return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"font-medium text-lg border-b pb-2",children:[r,"x",r]}),h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h5",{className:"font-medium",children:"Regular Icon"}),h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"w-20 h-20 bg-white rounded-lg border p-2 flex items-center justify-center",children:o&&h.jsx("img",{src:o.src,alt:`${r}x${r} regular`,className:"max-w-full max-h-full object-contain"})}),h.jsx("div",{className:"flex-1",children:h.jsx(Yn,{onUploadComplete:a=>n(a,r,"any"),accept:"image/png",folderPath:"pwa",fileName:`icon-${r}`})})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h5",{className:"font-medium",children:"Maskable Icon"}),h.jsxs("div",{className:"flex items-start space-x-4",children:[h.jsx("div",{className:"w-20 h-20 bg-white rounded-lg border p-2 flex items-center justify-center",children:i&&h.jsx("img",{src:i.src,alt:`${r}x${r} maskable`,className:"max-w-full max-h-full object-contain"})}),h.jsx("div",{className:"flex-1",children:h.jsx(Yn,{onUploadComplete:a=>n(a,r,"maskable"),accept:"image/png",folderPath:"pwa",fileName:`icon-${r}-maskable`})})]})]})]})]},r)})})})}const EX=[72,96,128,144,152,192,384,512];function kX({onIconsGenerated:t}){const[e,n]=g.useState(!1),r=(i,a,l)=>{const c=document.createElement("canvas"),u=c.getContext("2d");if(!u)return null;c.width=l,c.height=l;const d=l*.1,f=l-d*2;return u.fillStyle="white",u.fillRect(0,0,l,l),u.drawImage(i,d,d,f,f),c},s=async(i,a,l,c)=>{const d=`pwa/${`icon-${a}${l==="maskable"?"-maskable":""}.${c}`}`,{error:f}=await we.storage.from("media").upload(d,i,{cacheControl:"3600",upsert:!0,contentType:c==="webp"?"image/webp":"image/png"});if(f)throw f;const{data:{publicUrl:p}}=we.storage.from("media").getPublicUrl(d);return p},o=async i=>{try{n(!0),console.log("Starting image processing...");const a=document.createElement("canvas"),l=a.getContext("2d");if(!l)throw new Error("Could not get canvas context");const c=new Image;await new Promise((d,f)=>{c.onload=d,c.onerror=f,c.src=URL.createObjectURL(i)});const u=[];for(const d of EX){console.log(`Processing size: ${d}x${d}`),a.width=d,a.height=d,l.clearRect(0,0,d,d),l.drawImage(c,0,0,d,d);const f=r(a,l,d);if(!f)continue;const p=await new Promise(E=>a.toBlob(k=>E(k),"image/png")),y=await new Promise(E=>a.toBlob(k=>E(k),"image/webp")),m=await new Promise(E=>f.toBlob(k=>E(k),"image/png")),w=await new Promise(E=>f.toBlob(k=>E(k),"image/webp")),v=await s(p,d,"any","png"),x=await s(y,d,"any","webp"),b=await s(m,d,"maskable","png"),C=await s(w,d,"maskable","webp");u.push({src:v,sizes:`${d}x${d}`,type:"image/png",purpose:"any",webp:x}),u.push({src:b,sizes:`${d}x${d}`,type:"image/png",purpose:"maskable",webp:C})}t(u),ve.success("All PWA icons generated and uploaded successfully")}catch(a){console.error("Error processing image:",a),ve.error("Failed to process and upload PWA icons")}finally{n(!1)}};return h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{children:"Upload Single PWA Icon (512x512 PNG)"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a single 512x512 PNG image and we'll automatically generate all required sizes and formats"}),e?h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Vx,{className:"h-4 w-4 animate-spin"}),h.jsx("span",{children:"Processing and uploading icons..."})]}):h.jsx(Yn,{onUploadComplete:i=>{fetch(i).then(a=>a.blob()).then(a=>{const l=new File([a],"icon.png",{type:"image/png"});o(l)}).catch(a=>{console.error("Error fetching uploaded file:",a),ve.error("Failed to process uploaded file")})},accept:"image/png",folderPath:"pwa",fileName:"original"})]})})}const TX=Sa("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),hL=g.forwardRef(({className:t,variant:e,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:ie(TX({variant:e}),t),...n}));hL.displayName="Alert";const PX=g.forwardRef(({className:t,...e},n)=>h.jsx("h5",{ref:n,className:ie("mb-1 font-medium leading-none tracking-tight",t),...e}));PX.displayName="AlertTitle";const pL=g.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:ie("text-sm [&_p]:leading-relaxed",t),...e}));pL.displayName="AlertDescription";function _X(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[s,o]=g.useState(""),[i,a]=g.useState(!1),[l,c]=g.useState(!1);g.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:{publicUrl:m}}=we.storage.from("static").getPublicUrl("manifest.json");e(m);const v=await(await fetch(m)).json(),x=JSON.stringify(v,null,2);r(x),o(x)}catch(m){console.error("Error fetching manifest info:",m)}},d=()=>{a(!0),o(n)},f=()=>{a(!1),o(n),c(!1)},p=m=>{o(m),c(m!==n)},y=async()=>{try{JSON.parse(s);const m=new Blob([s],{type:"application/json"}),{error:w}=await we.storage.from("static").upload("manifest.json",m,{contentType:"application/json",upsert:!0});if(w)throw w;r(s),a(!1),c(!1),ve.success("Manifest file updated successfully"),await u()}catch(m){console.error("Error saving manifest:",m),m instanceof SyntaxError?ve.error("Invalid JSON format"):ve.error("Failed to save manifest file")}};return h.jsxs("div",{className:"space-y-6",children:[h.jsx(hL,{children:h.jsxs(pL,{children:["The manifest.json file is stored in the static bucket and referenced in index.html. Current manifest URL: ",h.jsx("code",{className:"bg-muted px-1 rounded",children:t})]})}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h4",{className:"font-medium",children:"Manifest Content:"}),h.jsxs("div",{className:"space-x-2",children:[!i&&h.jsx(xe,{onClick:d,variant:"outline",children:"Edit"}),i&&h.jsxs(h.Fragment,{children:[h.jsx(xe,{onClick:f,variant:"outline",children:"Cancel"}),h.jsx(xe,{onClick:y,disabled:!l,variant:l?"default":"outline",children:"Save Changes"})]})]})]}),i?h.jsx(Oc,{value:s,onChange:m=>p(m.target.value),className:"font-mono text-sm h-[400px]"}):h.jsx(Mp,{className:"h-[400px] w-full rounded-md border p-4",children:h.jsx("pre",{className:"text-sm",children:n})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"font-medium",children:"Index.html Reference:"}),h.jsx(Mp,{className:"h-[100px] w-full rounded-md border p-4",children:h.jsx("pre",{className:"text-sm",children:`<link rel="manifest" href="${t}">`})})]})]})}function NX({settings:t,onSettingChange:e}){const n=s=>{console.log("Updating PWA icons:",s),e("pwa_icons",s)},r=async()=>{var s;try{console.log("Generating manifest.json...");const o={id:"/",name:t.pwa_name||"Palmtree Smokes",short_name:t.pwa_short_name||"Palmtree",description:t.pwa_description||"Premium cannabis products",start_url:t.pwa_start_url||"/",display:t.pwa_display||"standalone",background_color:t.pwa_background_color||"#ffffff",theme_color:t.pwa_theme_color||"#000000",orientation:t.pwa_orientation||"portrait",scope:t.pwa_scope||"/",categories:["shopping","lifestyle","health"],prefer_related_applications:!1,icons:((s=t.pwa_icons)==null?void 0:s.map(c=>({src:c.src,sizes:c.sizes,type:c.type||"image/png",purpose:c.purpose||"any"})))||[],screenshots:[t.pwa_desktop_screenshot&&{src:t.pwa_desktop_screenshot,sizes:"1920x1080",type:"image/webp",form_factor:"wide"},t.pwa_mobile_screenshot&&{src:t.pwa_mobile_screenshot,sizes:"1080x1920",type:"image/webp",form_factor:"narrow"}].filter(Boolean)},i=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),{error:a}=await we.storage.from("static").upload("manifest.json",i,{contentType:"application/json",upsert:!0});if(a)throw a;const{data:{publicUrl:l}}=we.storage.from("static").getPublicUrl("manifest.json");console.log("Manifest generated and uploaded successfully:",l),ve.success("Manifest file generated and uploaded successfully")}catch(o){console.error("Error generating manifest:",o),ve.error("Failed to generate manifest file")}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-medium",children:"PWA Settings"}),h.jsx(xe,{onClick:r,children:"Generate Manifest"})]}),h.jsxs(iS,{defaultValue:"screenshots",className:"w-full",children:[h.jsxs(Km,{children:[h.jsx(Un,{value:"screenshots",children:"Screenshots"}),h.jsx(Un,{value:"manual",children:"Manual Upload"}),h.jsx(Un,{value:"auto",children:"Auto Generate"}),h.jsx(Un,{value:"manifest",children:"Manifest Info"})]}),h.jsx(Wn,{value:"screenshots",className:"mt-4",children:h.jsx(aX,{desktopScreenshot:t.pwa_desktop_screenshot||null,mobileScreenshot:t.pwa_mobile_screenshot||null,onDesktopUpload:s=>e("pwa_desktop_screenshot",s),onMobileUpload:s=>e("pwa_mobile_screenshot",s)})}),h.jsx(Wn,{value:"manual",className:"mt-4",children:h.jsx(CX,{icons:t.pwa_icons||[],onIconsUpdate:n})}),h.jsx(Wn,{value:"auto",className:"mt-4",children:h.jsx(kX,{onIconsGenerated:n})}),h.jsx(Wn,{value:"manifest",className:"mt-4",children:h.jsx(_X,{})})]})]})}function nn(t){this.content=t}nn.prototype={constructor:nn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),o=r.content.slice();return s==-1?o.push(n||t,e):(o[s+1]=e,n&&(o[s]=n)),new nn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new nn(n)},addToStart:function(t,e){return new nn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new nn(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),o=r.find(t);return s.splice(o==-1?s.length:o,0,e,n),new nn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=nn.from(t),t.size?new nn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=nn.from(t),t.size?new nn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=nn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};nn.from=function(t){if(t instanceof nn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new nn(e)};function mL(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=mL(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function gL(t,e,n,r){for(let s=t.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=t.child(--s),a=e.child(--o),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=gL(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Z{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,o){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,s+a,o||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let o="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new Z(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let o=0,i=0;i<n;o++){let a=this.content[o],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),s+=a.nodeSize),i=l}return new Z(r,s)}cutByIndex(e,n){return e==n?Z.empty:e==0&&n==this.content.length?this:new Z(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new Z(s,o)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return mL(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return gL(this,e,n,r)}findIndex(e,n=-1){if(e==0)return rh(0,e);if(e==this.size)return rh(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let o=this.child(r),i=s+o.nodeSize;if(i>=e)return i==e||n>0?rh(r+1,i):rh(r,s);s=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Z.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let n,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(n||(n=e.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Z(n||e,r)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const Oy={index:0,offset:0};function rh(t,e){return Oy.index=t,Oy.offset=e,Oy}function Ap(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ap(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ap(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ot=class lw{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ap(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return lw.none;if(e instanceof lw)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};ot.none=[];class Op extends Error{}class le{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=vL(this.content,e+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(e,n){return new le(yL(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return le.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(Z.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new le(e,r,s)}}le.empty=new le(Z.empty,0,0);function yL(t,e,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(s==e||o.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(yL(o.content,e-s-1,n-s-1)))}function vL(t,e,n,r){let{index:s,offset:o}=t.findIndex(e),i=t.maybeChild(s);if(o==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=vL(i.content,e-o-1,n);return a&&t.replaceChild(s,i.copy(a))}function RX(t,e,n){if(n.openStart>t.depth)throw new Op("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Op("Inconsistent open depths");return wL(t,e,n,0)}function wL(t,e,n,r){let s=t.index(r),o=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let i=wL(t,e,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return Xi(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=MX(n,t);return Xi(o,bL(t,i,a,e,r))}else return Xi(o,jp(t,e,r))}function xL(t,e){if(!e.type.compatibleContent(t.type))throw new Op("Cannot join "+e.type.name+" onto "+t.type.name)}function cw(t,e,n){let r=t.node(n);return xL(r,e.node(n)),r}function Qi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Fu(t,e,n,r){let s=(e||t).node(n),o=0,i=e?e.index(n):s.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Qi(t.nodeAfter,r),o++));for(let a=o;a<i;a++)Qi(s.child(a),r);e&&e.depth==n&&e.textOffset&&Qi(e.nodeBefore,r)}function Xi(t,e){return t.type.checkContent(e),t.copy(e)}function bL(t,e,n,r,s){let o=t.depth>s&&cw(t,e,s+1),i=r.depth>s&&cw(n,r,s+1),a=[];return Fu(null,t,s,a),o&&i&&e.index(s)==n.index(s)?(xL(o,i),Qi(Xi(o,bL(t,e,n,r,s+1)),a)):(o&&Qi(Xi(o,jp(t,e,s+1)),a),Fu(e,n,s,a),i&&Qi(Xi(i,jp(n,r,s+1)),a)),Fu(r,null,s,a),new Z(a)}function jp(t,e,n){let r=[];if(Fu(null,t,n,r),t.depth>n){let s=cw(t,e,n+1);Qi(Xi(s,jp(t,e,n+1)),r)}return Fu(e,null,n,r),new Z(r)}function MX(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)s=e.node(o).copy(Z.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Ed{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ot.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Dp(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(o),c=o-l;if(r.push(i,a,s+l),!c||(i=i.child(a),i.isText))break;o=c-1,s+=l+1}return new Ed(n,r,o)}static resolveCached(e,n){let r=pT.get(e);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else pT.set(e,r=new AX);let s=r.elts[r.i]=Ed.resolve(e,n);return r.i=(r.i+1)%OX,s}}class AX{constructor(){this.elts=[],this.i=0}}const OX=12,pT=new WeakMap;class Dp{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const jX=Object.create(null);let Ko=class uw{constructor(e,n,r,s=ot.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ap(this.attrs,n||e.defaultAttrs||jX)&&ot.sameSet(this.marks,r||ot.none)}copy(e=null){return e==this.content?this:new uw(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new uw(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return le.empty;let s=this.resolve(e),o=this.resolve(n),i=r?0:s.sharedDepth(n),a=s.start(i),c=s.node(i).content.cut(s.pos-a,o.pos-a);return new le(c,s.depth-i,o.depth-i)}replace(e,n,r){return RX(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Ed.resolveCached(this,e)}resolveNoCache(e){return Ed.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),SL(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Z.empty,s=0,o=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ot.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ot.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=Z.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Ko.prototype.text=void 0;class Ip extends Ko{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):SL(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ip(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ip(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function SL(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ga{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new DX(e,n);if(r.next==null)return ga.empty;let s=CL(r);r.next&&r.err("Unexpected trailing text");let o=VX(zX(s));return UX(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function o(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return Z.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:d}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:l}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return o}).join(`
`)}}ga.empty=new ga(!0);class DX{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function CL(t){let e=[];do e.push(IX(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function IX(t){let e=[];do e.push(LX(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function LX(t){let e=BX(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=FX(t,e);else break;return e}function mT(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function FX(t,e){let n=mT(t),r=n;return t.eat(",")&&(t.next!="}"?r=mT(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function $X(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(e)&&s.push(i)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function BX(t){if(t.eat("(")){let e=CL(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=$X(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function zX(t){let e=[[]];return s(o(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function s(i,a){i.forEach(l=>l.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=o(i.exprs[l],a);if(l==i.exprs.length-1)return c;s(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),s(o(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return s(o(i.expr,a),l),s(o(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();s(o(i.expr,l),u),l=u}if(i.max==-1)s(o(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),s(o(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function EL(t,e){return e-t}function gT(t,e){let n=[];return r(e),n.sort(EL);function r(s){let o=t[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:a,to:l}=o[i];!a&&n.indexOf(l)==-1&&r(l)}}}function VX(t){let e=Object.create(null);return n(gT(t,0));function n(r){let s=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);gT(t,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new ga(r.indexOf(t.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(EL);o.next.push({type:s[i][0],next:e[a.join(",")]||n(a)})}return o}}function UX(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];i.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function kL(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function TL(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let o=t[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function PL(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let o=t[s];o.validate&&o.validate(e[s])}}function _L(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new HX(t,r,e[r]);return n}let yT=class NL{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=_L(e,r.attrs),this.defaultAttrs=kL(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ga.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:TL(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ko(this,this.computeAttrs(e),Z.from(n),ot.setFrom(r))}createChecked(e=null,n,r){return n=Z.from(n),this.checkContent(n),new Ko(this,this.computeAttrs(e),n,ot.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Z.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(Z.empty,!0);return o?new Ko(this,e,n.append(o),ot.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){PL(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ot.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,i)=>r[o]=new NL(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function WX(t,e,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class HX{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?WX(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class tg{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=_L(e,s.attrs),this.excluded=null;let o=kL(this.attrs);this.instance=o?new ot(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ot(this,TL(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((o,i)=>r[o]=new tg(o,s++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){PL(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class RL{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=nn.from(e.nodes),n.marks=nn.from(e.marks||{}),this.nodes=yT.compile(this.spec.nodes,this),this.marks=tg.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=ga.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?vT(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:vT(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof yT){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Ip(r,r.defaultAttrs,e,ot.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ko.fromJSON(this,e)}markFromJSON(e){return ot.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function vT(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],o=t.marks[s],i=o;if(o)n.push(o);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function KX(t){return t.tag!=null}function qX(t){return t.style!=null}class qo{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(KX(s))this.tags.push(s);else if(qX(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new xT(this,n,!1);return r.addAll(e,ot.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new xT(this,n,!0);return r.addAll(e,ot.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(YX(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(e);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(e,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<o)break}n.splice(i,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=bT(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=bT(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new qo(e,qo.schemaRules(e)))}}const ML={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},GX={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},AL={ol:!0,ul:!0},kd=1,dw=2,$u=4;function wT(t,e,n){return e!=null?(e?kd:0)|(e==="full"?dw:0):t&&t.whitespace=="pre"?kd|dw:n&~$u}class sh{constructor(e,n,r,s,o,i){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=ot.none,this.match=o||(i&$u?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Z.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&kd)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=Z.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ML.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class xT{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=wT(null,n.preserveWhitespace,0)|(r?$u:0);s?o=new sh(s.type,s.attrs,ot.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new sh(null,null,ot.none,!0,null,i):o=new sh(e.schema.topNodeType,null,ot.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,o=s.options&dw?"full":this.localPreserveWS||(s.options&kd)>0;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=s.content[s.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;AL.hasOwnProperty(i)&&this.parser.normalizeLists&&JX(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:GX.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(ML.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(o,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,s){let o=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,n);this.findAtPoint(e,o)}findPlace(e,n){let r,s;for(let o=this.open;o>=0;o--){let i=this.nodes[o],a=i.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,s=i,!a.length)||i.solid)break}if(!r)return null;this.sync(s);for(let o=0;o<r.length;o++)n=this.enterInner(r[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=ot.none;for(let i of r.concat(e.marks))(s.type?s.type.allowsMarkType(i.type):ST(i.type,e.type))&&(o=i.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let o=this.findPlace(e.create(n),r);return o&&(o=this.enterInner(e,n,r,!0,s)),o}enterInner(e,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=wT(e,o,i.options);i.options&$u&&i.content.length==0&&(a|=$u);let l=ot.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):ST(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new sh(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=kd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function JX(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&AL.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function YX(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function bT(t){let e={};for(let n in t)e[n]=t[n];return e}function ST(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let o=[],i=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&i(u))return!0}};if(i(s.contentMatch))return!0}}class Aa{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=jy(n).createDocumentFragment());let s=r,o=[];return e.forEach(i=>{if(o.length||i.marks.length){let a=0,l=0;for(;a<o.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)s=o.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(o.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Mh(jy(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Mh(jy(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Mh(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Aa(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=CT(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return CT(e.marks)}}function CT(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function jy(t){return t.document||window.document}const ET=new WeakMap;function QX(t){let e=ET.get(t);return e===void 0&&ET.set(t,e=XX(t)),e}function XX(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Mh(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=QX(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:y}=Mh(t,f,n,r);if(l.appendChild(p),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const OL=65535,jL=Math.pow(2,16);function ZX(t,e){return t+e*jL}function kT(t){return t&OL}function eZ(t){return(t-(t&OL))/jL}const DL=1,IL=2,Ah=4,LL=8;class fw{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&LL)>0}get deletedBefore(){return(this.delInfo&(DL|Ah))>0}get deletedAfter(){return(this.delInfo&(IL|Ah))>0}get deletedAcross(){return(this.delInfo&Ah)>0}}class ir{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ir.empty)return ir.empty}recover(e){let n=0,r=kT(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+eZ(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+i],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+s+(f<0?0:u);if(r)return p;let y=e==(n<0?l:d)?null:ZX(a/3,e-l),m=e==l?IL:e==d?DL:Ah;return(n<0?e!=l:e!=d)&&(m|=LL),new fw(p,m,y)}s+=u-c}return r?e+s:new fw(e+s,0,null)}touches(e,n){let r=0,s=kT(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),l=i+(this.inverted?0:o),c=this.ranges[s+n],u=this.ranges[s+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new ir(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ir.empty:new ir(e<0?[0,-e,0]:[0,0,e])}}ir.empty=new ir([]);class Rl{constructor(e=[],n,r=0,s=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=s}slice(e=0,n=this.maps.length){return new Rl(this.maps,this.mirror,e,n)}copy(){return new Rl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let s=e.getMirror(n);this.appendMap(e.maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e.maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Rl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this.maps[o],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new fw(e,s,null)}}const Dy=Object.create(null);class Cn{getMap(){return ir.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Dy[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Dy)throw new RangeError("Duplicate use of step JSON ID "+e);return Dy[e]=n,n.prototype.jsonID=e,n}}class Ft{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ft(e,null)}static fail(e){return new Ft(null,e)}static fromReplace(e,n,r,s){try{return Ft.ok(e.replace(n,r,s))}catch(o){if(o instanceof Op)return Ft.fail(o.message);throw o}}}function AS(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let o=t.child(s);o.content.size&&(o=o.copy(AS(o.content,e,o))),o.isInline&&(o=e(o,n,s)),r.push(o)}return Z.fromArray(r)}class Oo extends Cn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new le(AS(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,o)}invert(){return new ms(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Oo(n.pos,r.pos,this.mark)}merge(e){return e instanceof Oo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Oo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Oo(n.from,n.to,e.markFromJSON(n.mark))}}Cn.jsonID("addMark",Oo);class ms extends Cn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new le(AS(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,r)}invert(){return new Oo(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ms(n.pos,r.pos,this.mark)}merge(e){return e instanceof ms&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ms(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ms(n.from,n.to,e.markFromJSON(n.mark))}}Cn.jsonID("removeMark",ms);class jo extends Cn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new le(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new jo(this.pos,n.marks[s]);return new jo(this.pos,this.mark)}}return new dc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new jo(n.pos,e.markFromJSON(n.mark))}}Cn.jsonID("addNodeMark",jo);class dc extends Cn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new le(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new jo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new dc(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new dc(n.pos,e.markFromJSON(n.mark))}}Cn.jsonID("removeNodeMark",dc);class Kt extends Cn{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&hw(e,this.from,this.to)?Ft.fail("Structure replace would overwrite content"):Ft.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ir([this.from,this.to-this.from,this.slice.size])}invert(e){return new Kt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Kt(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Kt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Kt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Kt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Kt(n.from,n.to,le.fromJSON(e,n.slice),!!n.structure)}}Cn.jsonID("replace",Kt);class Gt extends Cn{constructor(e,n,r,s,o,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(e){if(this.structure&&(hw(e,this.from,this.gapFrom)||hw(e,this.gapTo,this.to)))return Ft.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ft.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ft.fromReplace(e,this.from,this.to,r):Ft.fail("Content does not fit in gap")}getMap(){return new ir([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Gt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new Gt(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Gt(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(e,n.slice),n.insert,!!n.structure)}}Cn.jsonID("replaceAround",Gt);function hw(t,e,n){let r=t.resolve(e),s=n-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function tZ(t,e,n,r){let s=[],o=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),y=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(y)||(i&&i.to==f&&i.mark.eq(d[m])?i.to=p:s.push(i=new ms(f,p,d[m])));a&&a.to==f?a.to=p:o.push(a=new Oo(f,p,r))}}),s.forEach(l=>t.step(l)),o.forEach(l=>t.step(l))}function nZ(t,e,n,r){let s=[],o=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof tg){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<s.length;p++){let y=s[p];y.step==o-1&&d.eq(s[p].style)&&(f=y)}f?(f.to=c,f.step=o):s.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),s.forEach(i=>t.step(new ms(i.from,i.to,i.style)))}function OS(t,e,n,r=n.contentMatch,s=!0){let o=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)i.push(new Kt(a,u,le.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new ms(a,u,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,y;for(;f=p.exec(c.text);)y||(y=new le(Z.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new Kt(a+f.index,a+f.index+f[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(Z.empty,!0);t.replace(a,a,new le(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function rZ(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function jc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(o,i,n))return r;if(r==0||s.type.spec.isolating||!rZ(s,o,i))break}return null}function sZ(t,e,n){let{$from:r,$to:s,depth:o}=e,i=r.before(o+1),a=s.after(o+1),l=i,c=a,u=Z.empty,d=0;for(let y=o,m=!1;y>n;y--)m||r.index(y)>0?(m=!0,u=Z.from(r.node(y).copy(u)),d++):l--;let f=Z.empty,p=0;for(let y=o,m=!1;y>n;y--)m||s.after(y+1)<s.end(y)?(m=!0,f=Z.from(s.node(y).copy(f)),p++):c++;t.step(new Gt(l,c,i,a,new le(u.append(f),d,p),u.size-d,!0))}function jS(t,e,n=null,r=t){let s=oZ(t,e),o=s&&iZ(r,e);return o?s.map(TT).concat({type:e,attrs:n}).concat(o.map(TT)):null}function TT(t){return{type:t,attrs:null}}function oZ(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let i=o.length?o[0]:e;return n.canReplaceWith(r,s,i)?o:null}function iZ(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.child(r),i=e.contentMatch.findWrapping(o.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function aZ(t,e,n){let r=Z.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(n[i].type.create(n[i].attrs,r))}let s=e.start,o=e.end;t.step(new Gt(s,o,s,o,new le(r,0,0),n.length,!0))}function lZ(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,l)&&cZ(t.doc,t.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!y?c=!1:!p&&y&&(c=!0)}c===!1&&$L(t,i,a,o),OS(t,t.mapping.slice(o).map(a,1),r,void 0,c===null);let u=t.mapping.slice(o),d=u.map(a,1),f=u.map(a+i.nodeSize,1);return t.step(new Gt(d,f,d+1,f-1,new le(Z.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&FL(t,i,a,o),!1}})}function FL(t,e,n,r){e.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+o+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function $L(t,e,n,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+o);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function cZ(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function uZ(t,e,n,r,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Gt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new le(Z.from(i),0,0),1,!0))}function Ml(t,e,n=1,r){let s=t.resolve(e),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>o;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),y=r&&r[u+1];y&&(p=p.replaceChild(0,y.type.create(y.attrs)));let m=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(p))return!1}let a=s.indexAfter(o),l=r&&r[0];return s.node(o).canReplaceWith(a,a,l?l.type:s.node(o+1).type)}function dZ(t,e,n=1,r){let s=t.doc.resolve(e),o=Z.empty,i=Z.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){o=Z.from(s.node(a).copy(o));let u=r&&r[c];i=Z.from(u?u.type.create(u.attrs,i):s.node(a).copy(i))}t.step(new Kt(e,e,new le(o.append(i),n,n),!0))}function gi(t,e){let n=t.resolve(e),r=n.index();return BL(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function fZ(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),i=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function BL(t,e){return!!(t&&e&&!t.isLeaf&&fZ(t,e))}function ng(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&BL(o,i)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function hZ(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,o=t.doc.resolve(e-n),i=o.node().type;if(s&&i.inlineContent){let u=i.whitespace=="pre",d=!!i.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);$L(t,u.node(),u.before(),a)}i.inlineContent&&OS(t,e+n-1,i,o.node().contentMatchAt(o.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Kt(c,l.map(e+n,-1),le.empty,!0)),r===!0){let u=t.doc.resolve(c);FL(t,u.node(),u.before(),t.steps.length)}return t}function pZ(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function zL(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(o==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function rg(t,e,n=e,r=le.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),o=t.resolve(n);return VL(s,o,r)?new Kt(e,n,r):new mZ(s,o,r).fit()}function VL(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class mZ{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Z.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let l=new le(o,i,a);return e>-1?new Gt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Kt(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=Iy(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(i?c.matchType(i.type)||(d=c.fillBefore(Z.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Iy(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new le(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=Iy(e,n);if(s.childCount<=1&&n>0){let o=e.size-n<=n+s.size;this.unplaced=new le(mu(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new le(mu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let m=0;m<s.childCount;m++)u.push(s.child(m));d=d.matchFragment(s)}let p=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let m=a.child(c),w=d.matchType(m.type);if(!w)break;c++,(c>1||l==0||m.content.size)&&(d=w,u.push(UL(m.mark(f.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?p:-1)))}let y=c==a.childCount;y||(p=-1),this.placed=gu(this.placed,n,Z.from(u)),this.frontier[n].match=d,y&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,w=a;m<p;m++){let v=w.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),w=v.content}this.unplaced=y?e==0?le.empty:new le(mu(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new le(mu(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Ly(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=Ly(e,n,s,r,o);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ly(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=gu(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=gu(this.placed,this.depth,Z.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Z.empty,!0);n.childCount&&(this.placed=gu(this.placed,this.frontier.length,n))}}function mu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(mu(t.firstChild.content,e-1,n)))}function gu(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(gu(t.lastChild.content,e-1,n)))}function Iy(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function UL(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,UL(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),t.copy(r)}function Ly(t,e,n,r,s){let o=t.node(e),i=s?t.indexAfter(e):t.index(e);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!gZ(n,o.content,i)?a:null}function gZ(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function yZ(t){return t.spec.defining||t.spec.definingForContent}function vZ(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(VL(s,o,r))return t.step(new Kt(e,n,r));let i=HL(s,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let y=s.node(f).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;i.indexOf(f)>-1?a=f:s.before(f)==p&&i.splice(1,0,-f)}let l=i.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let y=f.firstChild;if(c.push(y),p==r.openStart)break;f=y.content}for(let f=u-1;f>=0;f--){let p=c[f],y=yZ(p.type);if(y&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(y||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),y=c[p];if(y)for(let m=0;m<i.length;m++){let w=i[(m+l)%i.length],v=!0;w<0&&(v=!1,w=-w);let x=s.node(w-1),b=s.index(w-1);if(x.canReplaceWith(b,b,y.type,y.marks))return t.replace(s.before(w),v?o.after(w):n,new le(WL(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=i[f];p<0||(e=s.before(p),n=o.after(p))}}function WL(t,e,n,r,s){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(WL(o.content,e+1,n,r,o)))}if(e>r){let o=s.contentMatchAt(0),i=o.fillBefore(t).append(t);t=i.append(o.matchFragment(i).fillBefore(Z.empty,!0))}return t}function wZ(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=pZ(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new le(Z.from(r),0,0))}function xZ(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),o=HL(r,s);for(let i=0;i<o.length;i++){let a=o[i],l=i==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function HL(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let o=t.start(s);if(o<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&n.push(s)}return n}class Al extends Cn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Ft.fromReplace(e,this.pos,this.pos+1,new le(Z.from(s),0,n.isLeaf?0:1))}getMap(){return ir.empty}invert(e){return new Al(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Al(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Al(n.pos,n.attr,n.value)}}Cn.jsonID("attr",Al);class Td extends Cn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ft.ok(r)}getMap(){return ir.empty}invert(e){return new Td(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Td(n.attr,n.value)}}Cn.jsonID("docAttr",Td);let fc=class extends Error{};fc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};fc.prototype=Object.create(Error.prototype);fc.prototype.constructor=fc;fc.prototype.name="TransformError";class bZ{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Rl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new fc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=le.empty){let s=rg(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new le(Z.from(r),0,0))}delete(e,n){return this.replace(e,n,le.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return vZ(this,e,n,r),this}replaceRangeWith(e,n,r){return wZ(this,e,n,r),this}deleteRange(e,n){return xZ(this,e,n),this}lift(e,n){return sZ(this,e,n),this}join(e,n=1){return hZ(this,e,n),this}wrap(e,n){return aZ(this,e,n),this}setBlockType(e,n=e,r,s=null){return lZ(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return uZ(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Al(e,n,r)),this}setDocAttribute(e,n){return this.step(new Td(e,n)),this}addNodeMark(e,n){return this.step(new jo(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ot)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new dc(e,n)),this}split(e,n=1,r){return dZ(this,e,n,r),this}addMark(e,n,r){return tZ(this,e,n,r),this}removeMark(e,n,r){return nZ(this,e,n,r),this}clearIncompatible(e,n,r){return OS(this,e,n,r),this}}const Fy=Object.create(null);class De{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new SZ(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=le.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let o=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?le.empty:n),a==0&&NT(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),NT(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new Oe(e):Qa(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let i=n<0?Qa(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Qa(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Nr(e.node(0))}static atStart(e){return Qa(e,e,0,0,1)||new Nr(e)}static atEnd(e){return Qa(e,e,e.content.size,e.childCount,-1)||new Nr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Fy[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Fy)throw new RangeError("Duplicate use of selection JSON ID "+e);return Fy[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Oe.between(this.$anchor,this.$head).getBookmark()}}De.prototype.visible=!0;class SZ{constructor(e,n){this.$from=e,this.$to=n}}let PT=!1;function _T(t){!PT&&!t.parent.inlineContent&&(PT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Oe extends De{constructor(e,n=e){_T(e),_T(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return De.near(r);let s=e.resolve(n.map(this.anchor));return new Oe(s.parent.inlineContent?s:r,r)}replace(e,n=le.empty){if(super.replace(e,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Oe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new sg(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Oe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=De.findFrom(n,r,!0)||De.findFrom(n,-r,!0);if(o)n=o.$head;else return De.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(De.findFrom(e,-r,!0)||De.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new Oe(e,n)}}De.jsonID("text",Oe);class sg{constructor(e,n){this.anchor=e,this.head=n}map(e){return new sg(e.map(this.anchor),e.map(this.head))}resolve(e){return Oe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ke extends De{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=e.resolve(s);return r?De.near(o):new ke(o)}content(){return new le(Z.from(this.node),0,0)}eq(e){return e instanceof ke&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new DS(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ke(e.resolve(n.anchor))}static create(e,n){return new ke(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ke.prototype.visible=!1;De.jsonID("node",ke);class DS{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new sg(r,r):new DS(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ke.isSelectable(r)?new ke(n):De.near(n)}}class Nr extends De{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=le.empty){if(n==le.empty){e.delete(0,e.doc.content.size);let r=De.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Nr(e)}map(e){return new Nr(e)}eq(e){return e instanceof Nr}getBookmark(){return CZ}}De.jsonID("all",Nr);const CZ={map(){return this},resolve(t){return new Nr(t)}};function Qa(t,e,n,r,s,o=!1){if(e.inlineContent)return Oe.create(t,n);for(let i=r-(s>0?0:1);s>0?i<e.childCount:i>=0;i+=s){let a=e.child(i);if(a.isAtom){if(!o&&ke.isSelectable(a))return ke.create(t,n-(s<0?a.nodeSize:0))}else{let l=Qa(t,a,n+s,s<0?a.childCount:0,s,o);if(l)return l}n+=a.nodeSize*s}return null}function NT(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Kt||s instanceof Gt))return;let o=t.mapping.maps[r],i;o.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(De.near(t.doc.resolve(i),n))}const RT=1,oh=2,MT=4;class EZ extends bZ{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|RT)&~oh,this.storedMarks=null,this}get selectionSet(){return(this.updated&RT)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=oh,this}ensureMarks(e){return ot.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&oh)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~oh,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ot.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,o)),this.selection.empty||this.setSelection(De.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=MT,this}get scrolledIntoView(){return(this.updated&MT)>0}}function AT(t,e){return!e||!t?t:t.bind(e)}class yu{constructor(e,n,r){this.name=e,this.init=AT(n.init,r),this.apply=AT(n.apply,r)}}const kZ=[new yu("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new yu("selection",{init(t,e){return t.selection||De.atStart(e.doc)},apply(t){return t.selection}}),new yu("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new yu("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class $y{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=kZ.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new yu(r.key,r.spec.state,r))})}}class gl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=s?s[i].n:0,c=s?s[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new gl(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new EZ(this)}static create(e){let n=new $y(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new gl(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new $y(this.schema,e.plugins),r=n.fields,s=new gl(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new $y(e.schema,e.plugins),o=new gl(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=Ko.fromJSON(e.schema,n.doc);else if(i.name=="selection")o.selection=De.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[i.name]=c.fromJSON.call(l,e,n[a],o);return}}o[i.name]=i.init(e,o)}}),o}}function KL(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=KL(s,e,{})),n[r]=s}return n}class Xn{constructor(e){this.spec=e,this.props={},e.props&&KL(e.props,this,this.props),this.key=e.key?e.key.key:qL("plugin")}getState(e){return e[this.key]}}const By=Object.create(null);function qL(t){return t in By?t+"$"+ ++By[t]:(By[t]=0,t+"$")}class Ps{constructor(e="key"){this.key=qL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const on=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Pd=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let pw=null;const Ds=function(t,e,n){let r=pw||(pw=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},TZ=function(){pw=null},ya=function(t,e,n,r){return n&&(OT(t,e,n,r,-1)||OT(t,e,n,r,1))},PZ=/^(img|br|input|textarea|hr)$/i;function OT(t,e,n,r,s){for(;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Er(t))){let o=t.parentNode;if(!o||o.nodeType!=1||ff(t)||PZ.test(t.nodeName)||t.contentEditable=="false")return!1;e=on(t)+(s<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.contentEditable=="false")return!1;e=s<0?Er(t):0}else return!1}}function Er(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function _Z(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Er(t)}else if(t.parentNode&&!ff(t))e=on(t),t=t.parentNode;else return null}}function NZ(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ff(t))e=on(t)+1,t=t.parentNode;else return null}}function RZ(t,e,n){for(let r=e==0,s=e==Er(t);r||s;){if(t==n)return!0;let o=on(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,s=s&&o==Er(t)}}function ff(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const og=function(t){return t.focusNode&&ya(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Mi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function MZ(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function AZ(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Er(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Er(r.startContainer),r.startOffset)}}}const bs=typeof navigator<"u"?navigator:null,jT=typeof document<"u"?document:null,yi=bs&&bs.userAgent||"",mw=/Edge\/(\d+)/.exec(yi),GL=/MSIE \d/.exec(yi),gw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yi),Jn=!!(GL||gw||mw),Go=GL?document.documentMode:gw?+gw[1]:mw?+mw[1]:0,es=!Jn&&/gecko\/(\d+)/i.test(yi);es&&+(/Firefox\/(\d+)/.exec(yi)||[0,0])[1];const yw=!Jn&&/Chrome\/(\d+)/.exec(yi),bn=!!yw,JL=yw?+yw[1]:0,Rn=!Jn&&!!bs&&/Apple Computer/.test(bs.vendor),hc=Rn&&(/Mobile\/\w+/.test(yi)||!!bs&&bs.maxTouchPoints>2),br=hc||(bs?/Mac/.test(bs.platform):!1),OZ=bs?/Win/.test(bs.platform):!1,$s=/Android \d/.test(yi),hf=!!jT&&"webkitFontSmoothing"in jT.documentElement.style,jZ=hf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function DZ(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ms(t,e){return typeof t=="number"?t:t[e]}function IZ(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function DT(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let i=n||t.dom;i;i=Pd(i)){if(i.nodeType!=1)continue;let a=i,l=a==o.body,c=l?DZ(o):IZ(a),u=0,d=0;if(e.top<c.top+Ms(r,"top")?d=-(c.top-e.top+Ms(s,"top")):e.bottom>c.bottom-Ms(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Ms(s,"top")-c.top:e.bottom-c.bottom+Ms(s,"bottom")),e.left<c.left+Ms(r,"left")?u=-(c.left-e.left+Ms(s,"left")):e.right>c.right-Ms(r,"right")&&(u=e.right-c.right+Ms(s,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-f,m=a.scrollTop-p;e={left:e.left-y,top:e.top-m,right:e.right-y,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function LZ(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(o,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:YL(t.dom)}}function YL(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Pd(r));return e}function FZ({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;QL(n,r==0?0:r-e)}function QL(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:o}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Ga=null;function $Z(t){if(t.setActive)return t.setActive();if(Ga)return t.focus(Ga);let e=YL(t);t.focus(Ga==null?{get preventScroll(){return Ga={preventScroll:!0},!0}}:void 0),Ga||(Ga=!1,QL(e,0))}function XL(t,e){let n,r=2e8,s,o=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Ds(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let y=f[p];if(y.top<=i&&y.bottom>=a){i=Math.max(y.bottom,i),a=Math.min(y.top,a);let m=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(m<r){n=u,r=m,s=m&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,u.nodeType==1&&m&&(o=d+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!l&&y.left<=e.left&&y.right>=e.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(o=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?BZ(n,s):!n||r&&n.nodeType==1?{node:t,offset:o}:XL(n,s)}function BZ(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=ho(r,1);if(o.top!=o.bottom&&IS(e,o))return{node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function IS(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function zZ(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function VZ(t,e,n){let{node:r,offset:s}=XL(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,s,o)}function UZ(t,e,n,r){let s=-1;for(let o=e,i=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?s=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function ZL(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=t.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(IS(e,c))return ZL(i,e,c)}}if((o=(o+1)%r)==s)break}return t}function WZ(t,e){let n=t.dom.ownerDocument,r,s=0,o=AZ(n,e.left,e.top);o&&({node:r,offset:s}=o);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!IS(e,c)||(i=ZL(t.dom,e,c),!i))return null}if(Rn)for(let c=i;r&&c;c=Pd(c))c.draggable&&(r=void 0);if(i=zZ(i,e),r){if(es&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;hf&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=UZ(t,r,s,e))}a==null&&(a=VZ(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function IT(t){return t.top<t.bottom||t.left<t.right}function ho(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(IT(r))return r}return Array.prototype.find.call(n,IT)||t.getBoundingClientRect()}const HZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function e2(t,e,n){let{node:r,offset:s,atom:o}=t.docView.domFromPos(e,n<0?-1:1),i=hf||es;if(r.nodeType==3)if(i&&(HZ.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=ho(Ds(r,s,s),n);if(es&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=ho(Ds(r,s-1,s-1),-1);if(c.top==l.top){let u=ho(Ds(r,s,s+1),-1);if(u.top!=l.top)return tu(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,tu(ho(Ds(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Er(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return zy(l.getBoundingClientRect(),!1)}if(o==null&&s<Er(r)){let l=r.childNodes[s];if(l.nodeType==1)return zy(l.getBoundingClientRect(),!0)}return zy(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Er(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Ds(l,Er(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return tu(ho(c,1),!1)}if(o==null&&s<Er(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ds(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return tu(ho(c,-1),!0)}return tu(ho(r.nodeType==3?Ds(r):r,-n),n>=0)}function tu(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function zy(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function t2(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function KZ(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return t2(t,e,()=>{let{node:o}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=e2(t,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ds(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const qZ=/[\u0590-\u08ac]/;function GZ(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=t.domSelection();return a?!qZ.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:i:t2(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:m}=t.domSelectionRange(),w=y&&!p.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),w}):r.pos==r.start()||r.pos==r.end()}let LT=null,FT=null,$T=!1;function JZ(t,e,n){return LT==e&&FT==n?$T:(LT=e,FT=n,$T=n=="up"||n=="down"?KZ(t,e,n):GZ(t,e,n))}const Rr=0,BT=1,Fi=2,Ss=3;class pf{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Rr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,i;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>on(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>e||i instanceof r2){s=e-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof n2&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?on(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?on(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(s==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=on(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=on(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let o=Math.min(e,n),i=Math.max(e,n);for(let p=0,y=0;p<this.children.length;p++){let m=this.children[p],w=y+m.size;if(o>y&&i<w)return m.setSelection(e-y-m.border,n-y-m.border,r,s);y=w}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((es||Rn)&&e==n){let{node:p,offset:y}=a;if(p.nodeType==3){if(d=!!(y&&p.nodeValue[y-1]==`
`),d&&y==p.nodeValue.length)for(let m=p,w;m;m=m.parentNode){if(w=m.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:on(w)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=p.childNodes[y-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(es&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&Rn)&&ya(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ya(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let y=a;a=l,l=y}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+o.border,l=i-o.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?Fi:BT,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ss:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Fi:Ss}r=i}this.dirty=Fi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Fi:BT;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class n2 extends pf{constructor(e,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Rr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class YZ extends pf{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class va extends pf{constructor(e,n,r,s,o){super(e,[],r,s),this.mark=n,this.spec=o}static create(e,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=Aa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new va(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Ss||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ss&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Rr}}slice(e,n,r){let s=va.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=ww(o,n,i,r)),e>0&&(o=ww(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Jo extends pf{constructor(e,n,r,s,o,i,a,l,c){super(e,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,o,i){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Aa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=i2(u,r,n),c?l=new QZ(e,n,r,s,u,d||null,f,c,o,i+1):n.isText?new ig(e,n,r,s,u,f,o):new Jo(e,n,r,s,u,d||null,f,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,n,r){return this.dirty==Rr&&e.eq(this.node)&&Lp(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,o=e.composing?this.localCompositionInfo(e,n):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new ZZ(this,i&&i.node,e);nee(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?ot.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Fi)&&(i&&this.protectLocalComposition(e,i),s2(this.contentDOM,this.children,e),hc&&ree(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Oe)||r<n||s>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=see(this.node.content,i,r-n,s-n);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new YZ(this,o,n,s);e.input.compositionNodes.push(i),this.children=ww(this.children,r,r+s.length,e,i)}update(e,n,r,s){return this.dirty==Ss||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Rr}updateOuterDeco(e){if(Lp(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=o2(this.dom,this.nodeDOM,vw(this.outerDeco,this.node,n),vw(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function zT(t,e,n,r,s){i2(r,e,t);let o=new Jo(void 0,t,e,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class ig extends Jo{constructor(e,n,r,s,o,i,a){super(e,n,r,s,o,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Ss||this.dirty!=Rr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Rr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Rr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),o=document.createTextNode(s.text);return new ig(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ss)}get domAtom(){return!1}isText(e){return this.node.text==e}}class r2 extends pf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Rr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class QZ extends Jo{constructor(e,n,r,s,o,i,a,l,c,u){super(e,n,r,s,o,i,a,c,u),this.spec=l}update(e,n,r,s){if(this.dirty==Ss)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function s2(t,e,n){let r=t.firstChild,s=!1;for(let o=0;o<e.length;o++){let i=e[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=VT(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(i instanceof va){let l=r?r.previousSibling:t.lastChild;s2(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=VT(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Bu=function(t){t&&(this.nodeName=t)};Bu.prototype=Object.create(null);const $i=[new Bu];function vw(t,e,n){if(t.length==0)return $i;let r=n?$i[0]:new Bu,s=[r];for(let o=0;o<t.length;o++){let i=t[o].type.attrs;if(i){i.nodeName&&s.push(r=new Bu(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&s.length==1&&s.push(r=new Bu(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function o2(t,e,n,r){if(n==$i&&r==$i)return e;let s=e;for(let o=0;o<r.length;o++){let i=r[o],a=n[o];if(o){let l;a&&a.nodeName==i.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=$i[0]),s=l}XZ(s,a||$i[0],i)}return s}function XZ(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&t.classList.add(s[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function i2(t,e,n){return o2(t,t,$i,vw(e,n,t.nodeType!=1))}function Lp(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function VT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ZZ{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=eee(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Rr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=va.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,s,o){let i=this.top.children[s];return i.dirty==Ss&&i.dom==i.contentDOM&&(i.dirty=Fi),i.update(e,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Jo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ss&&Lp(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,s,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Fi,d.updateChildren(s,i+1),d.dirty=Rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,o,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Lp(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Jo.create(this.top,n,r,s,o,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,o){let i=Jo.create(this.top,e,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new n2(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof va;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof ig)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Rn||bn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new r2(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function eee(t,e){let n=e,r=n.children.length,s=t.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof va)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function tee(t,e){return t.type.side-e.type.side}function nee(t,e,n,r){let s=e.locals(t),o=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(o,u),c),o+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,d;for(;i<s.length&&s[i].to==o;){let w=s[i++];w.widget&&(u?(d||(d=[u])).push(w):u=w)}if(u)if(d){d.sort(tee);for(let w=0;w<d.length;w++)n(d[w],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let w=0;w<a.length;w++)a[w].to<=o&&a.splice(w--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let y=o+f.nodeSize;if(f.isText){let w=y;i<s.length&&s[i].from<w&&(w=s[i].from);for(let v=0;v<a.length;v++)a[v].to<w&&(w=a[v].to);w<y&&(l=f.cut(w-o),f=f.cut(0,w-o),y=w,p=-1)}else for(;i<s.length&&s[i].to<y;)i++;let m=f.isInline&&!f.isLeaf?a.filter(w=>!w.inline):a.slice();r(f,m,e.forChild(o,f),p),o=y}}function ree(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function see(t,e,n,r){for(let s=0,o=0;s<t.childCount&&o<=r;){let i=t.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let l=i.text;for(;s<t.childCount;){let c=t.child(s++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function ww(t,e,n,r,s){let o=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),s&&(o.push(s),s=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function LS(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(og(n)){for(l=i;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&ke.isSelectable(d)&&s.parent&&!(d.isInline&&RZ(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new ke(i==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=i,f=i;for(let p=0;p<n.rangeCount;p++){let y=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(d<0)return null;[l,i]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;c=FS(t,u,a,d)}return c}function a2(t){return t.editable?t.hasFocus():c2(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Us(t,e=!1){let n=t.state.selection;if(l2(t,n),!!a2(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&bn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&ya(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)iee(t);else{let{anchor:r,head:s}=n,o,i;UT&&!(n instanceof Oe)&&(n.$from.parent.inlineContent||(o=WT(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=WT(t,n.to))),t.docView.setSelection(r,s,t,e),UT&&(o&&HT(o),i&&HT(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&oee(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const UT=Rn||bn&&JL<63;function WT(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Rn&&s&&s.contentEditable=="false")return Vy(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return Vy(s);if(o)return Vy(o)}}function Vy(t){return t.contentEditable="true",Rn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function HT(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function oee(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!a2(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function iee(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,s=r.nodeName=="IMG";s?n.setStart(r.parentNode,on(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!s&&!t.state.selection.visible&&Jn&&Go<=11&&(r.disabled=!0,r.disabled=!1)}function l2(t,e){if(e instanceof ke){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(KT(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else KT(t)}function KT(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function FS(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||Oe.between(e,n,r)}function qT(t){return t.editable&&!t.hasFocus()?!1:c2(t)}function c2(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function aee(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ya(e.node,e.offset,n.anchorNode,n.anchorOffset)}function xw(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return o&&De.findFrom(o,e)}function yo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function GT(t,e,n){let r=t.state.selection;if(r instanceof Oe)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=t.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return yo(t,new Oe(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=xw(t.state,e);return s&&s instanceof ke?yo(t,s):!1}else if(!(br&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?ke.isSelectable(o)?yo(t,new ke(e<0?t.state.doc.resolve(s.pos-o.nodeSize):s)):hf?yo(t,new Oe(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ke&&r.node.isInline)return yo(t,new Oe(e>0?r.$to:r.$from));{let s=xw(t.state,e);return s?yo(t,s):!1}}}function Fp(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function zu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ja(t,e){return e<0?lee(t):cee(t)}function lee(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,o,i=!1;for(es&&n.nodeType==1&&r<Fp(n)&&zu(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(zu(a,-1))s=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(u2(n))break;{let a=n.previousSibling;for(;a&&zu(a,-1);)s=n.parentNode,o=on(a),a=a.previousSibling;if(a)n=a,r=Fp(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?bw(t,n,r):s&&bw(t,s,o)}function cee(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Fp(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(zu(a,1))o=n,i=++r;else break}else{if(u2(n))break;{let a=n.nextSibling;for(;a&&zu(a,1);)o=a.parentNode,i=on(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Fp(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&bw(t,o,i)}function u2(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function uee(t,e){for(;t&&e==t.childNodes.length&&!ff(t);)e=on(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function dee(t,e){for(;t&&!e&&!ff(t);)e=on(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function bw(t,e,n){if(e.nodeType!=3){let o,i;(i=uee(e,n))?(e=i,n=0):(o=dee(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(og(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Us(t)},50)}function JT(t,e){let n=t.state.doc.resolve(e);if(!(bn||OZ)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function YT(t,e,n){let r=t.state.selection;if(r instanceof Oe&&!r.empty||n.indexOf("s")>-1||br&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=xw(t.state,e);if(i&&i instanceof ke)return yo(t,i)}if(!s.parent.inlineContent){let i=e<0?s:o,a=r instanceof Nr?De.near(i,e):De.findFrom(i,e);return a?yo(t,a):!1}return!1}function QT(t,e){if(!(t.state.selection instanceof Oe))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=t.state.tr;return e<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),t.dispatch(i),!0}return!1}function XT(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function fee(t){if(!Rn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;XT(t,r,"true"),setTimeout(()=>XT(t,r,"false"),20)}return!1}function hee(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function pee(t,e){let n=e.keyCode,r=hee(e);if(n==8||br&&n==72&&r=="c")return QT(t,-1)||Ja(t,-1);if(n==46&&!e.shiftKey||br&&n==68&&r=="c")return QT(t,1)||Ja(t,1);if(n==13||n==27)return!0;if(n==37||br&&n==66&&r=="c"){let s=n==37?JT(t,t.state.selection.from)=="ltr"?-1:1:-1;return GT(t,s,r)||Ja(t,s)}else if(n==39||br&&n==70&&r=="c"){let s=n==39?JT(t,t.state.selection.from)=="ltr"?1:-1:1;return GT(t,s,r)||Ja(t,s)}else{if(n==38||br&&n==80&&r=="c")return YT(t,-1,r)||Ja(t,-1);if(n==40||br&&n==78&&r=="c")return fee(t)||YT(t,1,r)||Ja(t,1);if(r==(br?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function d2(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||Aa.fromSchema(t.state.schema),a=y2(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=g2[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let y=a.createElement(u[p]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function f2(t,e,n,r,s){let o=s.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||o||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return e?new le(Z.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)a=d;else{let f=s.marks(),{schema:p}=t.state,y=Aa.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let w=i.appendChild(document.createElement("p"));m&&w.appendChild(y.serializeNode(p.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=vee(n),hf&&wee(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||qo.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!mee.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=xee(ZT(a,+u[1],+u[2]),u[4]);else if(a=le.maxOpen(gee(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=ZT(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const mee=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function gee(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),o,i=[];if(t.forEach(a=>{if(!i)return;let l=s.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&o.length&&p2(l,o,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=m2(i[i.length-1],o.length));let u=h2(a,l);i.push(u),s=s.matchType(u.type),o=l}}),i)return Z.from(i)}return t}function h2(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Z.from(t));return t}function p2(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let o=p2(t,e,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(Z.from(h2(n,t,s+1))))}}function m2(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,m2(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Z.empty,!0);return t.copy(n.append(r))}function Sw(t,e,n,r,s,o){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(o=0),s<r-1&&(a=Sw(a,e,n,r,s+1,o)),s>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(Z.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function ZT(t,e,n){return e<t.openStart&&(t=new le(Sw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new le(Sw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const g2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let eP=null;function y2(){return eP||(eP=document.implementation.createHTMLDocument("title"))}let Uy=null;function yee(t){let e=window.trustedTypes;return e?(Uy||(Uy=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Uy.createHTML(t)):t}function vee(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=y2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&g2[r[1].toLowerCase()])&&(t=s.map(o=>"<"+o+">").join("")+t+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=yee(t),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function wee(t){let e=t.querySelectorAll(bn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function xee(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:o,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=Z.from(l.create(r[a+1],s)),o++,i++}return new le(s,o,i)}const Mn={},An={},bee={touchstart:!0,touchmove:!0};class See{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Cee(t){for(let e in Mn){let n=Mn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{kee(t,r)&&!$S(t,r)&&(t.editable||!(r.type in An))&&n(t,r)},bee[e]?{passive:!0}:void 0)}Rn&&t.dom.addEventListener("input",()=>null),Cw(t)}function Do(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Eee(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Cw(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$S(t,r))})}function $S(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function kee(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Tee(t,e){!$S(t,e)&&Mn[e.type]&&(t.editable||!(e.type in An))&&Mn[e.type](t,e)}An.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!w2(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($s&&bn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),hc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Mi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||pee(t,n)?n.preventDefault():Do(t,"key")};An.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};An.keypress=(t,e)=>{let n=e;if(w2(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||br&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Oe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode);!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s))&&t.dispatch(t.state.tr.insertText(s).scrollIntoView()),n.preventDefault()}};function ag(t){return{left:t.clientX,top:t.clientY}}function Pee(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function BS(t,e,n,r,s){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(t.someProp(e,a=>i>o.depth?a(t,n,o.nodeAfter,o.before(i),s,!0):a(t,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function Ol(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function _ee(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ke.isSelectable(r)?(Ol(t,new ke(n)),!0):!1}function Nee(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof ke&&(r=n.node);let o=t.state.doc.resolve(e);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(ke.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(Ol(t,ke.create(t.state.doc,s)),!0):!1}function Ree(t,e,n,r,s){return BS(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(s?Nee(t,n):_ee(t,n))}function Mee(t,e,n,r){return BS(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function Aee(t,e,n,r){return BS(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||Oee(t,n,r)}function Oee(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ol(t,Oe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)Ol(t,Oe.create(r,a+1,a+1+i.content.size));else if(ke.isSelectable(i))Ol(t,ke.create(r,a));else continue;return!0}}function zS(t){return $p(t)}const v2=br?"metaKey":"ctrlKey";Mn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=zS(t),s=Date.now(),o="singleClick";s-t.input.lastClick.time<500&&Pee(n,t.input.lastClick)&&!n[v2]&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o};let i=t.posAtCoords(ag(n));i&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new jee(t,i,n,!!r)):(o=="doubleClick"?Mee:Aee)(t,i.pos,i.inside,n)?n.preventDefault():Do(t,"pointer"))};class jee{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[v2],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);o=u.parent,i=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof ke&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&es&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Do(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Us(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ag(e))),this.updateAllowDefault(e),this.allowDefault||!n?Do(this.view,"pointer"):Ree(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Rn&&this.mightDrag&&!this.mightDrag.node.isAtom||bn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ol(this.view,De.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Do(this.view,"pointer")}move(e){this.updateAllowDefault(e),Do(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mn.touchstart=t=>{t.input.lastTouch=Date.now(),zS(t),Do(t,"pointer")};Mn.touchmove=t=>{t.input.lastTouch=Date.now(),Do(t,"pointer")};Mn.contextmenu=t=>zS(t);function w2(t,e){return t.composing?!0:Rn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Dee=$s?5e3:-1;An.compositionstart=An.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Oe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),$p(t,!0),t.markCursor=null;else if($p(t,!e.selection.empty),es&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}t.input.composing=!0}x2(t,Dee)};An.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,x2(t,20))};function x2(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>$p(t),e))}function b2(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Lee());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Iee(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=_Z(e.focusNode,e.focusOffset),r=NZ(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function Lee(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function $p(t,e=!1){if(!($s&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),b2(t),e||t.docView&&t.docView.dirty){let n=LS(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Fee(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const _d=Jn&&Go<15||hc&&jZ<604;Mn.copy=An.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let o=_d?null:n.clipboardData,i=r.content(),{dom:a,text:l}=d2(t,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):Fee(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $ee(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Bee(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Nd(t,r.value,null,s,e):Nd(t,r.textContent,r.innerHTML,s,e)},50)}function Nd(t,e,n,r,s){let o=f2(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,o||le.empty)))return!0;if(!o)return!1;let i=$ee(o),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function S2(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}An.paste=(t,e)=>{let n=e;if(t.composing&&!$s)return;let r=_d?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Nd(t,S2(r),r.getData("text/html"),s,n)?n.preventDefault():Bee(t,n)};class C2{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const E2=br?"altKey":"ctrlKey";Mn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,o=s.empty?null:t.posAtCoords(ag(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof ke?s.to-1:s.to))){if(r&&r.mightDrag)i=ke.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(i=ke.create(t.state.doc,d.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:u}=d2(t,a);(!n.dataTransfer.files.length||!bn||JL>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(_d?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",_d||n.dataTransfer.setData("text/plain",c),t.dragging=new C2(u,!n[E2],i)};Mn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};An.dragover=An.dragenter=(t,e)=>e.preventDefault();An.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(ag(n));if(!s)return;let o=t.state.doc.resolve(s.pos),i=r&&r.slice;i?t.someProp("transformPasted",y=>{i=y(i,t)}):i=f2(t,S2(n.dataTransfer),_d?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!n[E2]);if(t.someProp("handleDrop",y=>y(t,n,i||le.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?zL(t.state.doc,o.pos,i):o.pos;l==null&&(l=o.pos);let c=t.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(f))return;let p=c.doc.resolve(u);if(d&&ke.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new ke(p));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,w,v,x)=>y=x),c.setSelection(FS(t,p,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Mn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Us(t)},20))};Mn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Mn.beforeinput=(t,e)=>{if(bn&&$s&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Mi(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in An)Mn[t]=An[t];function Rd(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Bp{constructor(e,n){this.toDOM=e,this.spec=n||Zi,this.side=this.spec.side||0}map(e,n,r,s){let{pos:o,deleted:i}=e.mapResult(n.from+s,this.side<0?-1:1);return i?null:new Tr(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Bp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Rd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Yo{constructor(e,n){this.attrs=e,this.spec=n||Zi}map(e,n,r,s){let o=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new Tr(o,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Yo&&Rd(this.attrs,e.attrs)&&Rd(this.spec,e.spec)}static is(e){return e.type instanceof Yo}destroy(){}}class VS{constructor(e,n){this.attrs=e,this.spec=n||Zi}map(e,n,r,s){let o=e.mapResult(n.from+s,1);if(o.deleted)return null;let i=e.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new Tr(o.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),o;return s==n.from&&!(o=e.child(r)).isText&&s+o.nodeSize==n.to}eq(e){return this==e||e instanceof VS&&Rd(this.attrs,e.attrs)&&Rd(this.spec,e.spec)}destroy(){}}class Tr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Tr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Tr(e,e,new Bp(n,r))}static inline(e,n,r,s){return new Tr(e,n,new Yo(r,s))}static node(e,n,r,s){return new Tr(e,n,new VS(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Yo}get widget(){return this.type instanceof Bp}}const Xa=[],Zi={};class zt{constructor(e,n){this.local=e.length?e:Xa,this.children=n.length?n:Xa}static create(e,n){return n.length?zp(n,e,0,Zi):yn}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,s+a,o)}}map(e,n,r){return this==yn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Zi)}mapInner(e,n,r,s,o){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?zee(this.children,i||[],e,n,r,s,o):i?new zt(i.sort(ea),Xa):yn}add(e,n){return n.length?this==yn?zt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=T2(n,a,c)){for(s||(s=this.children.slice());o<s.length&&s[o]<l;)o+=3;s[o]==l?s[o+2]=s[o+2].addInner(a,u,c+1):s.splice(o,0,l,l+a.nodeSize,zp(u,a,c+1,Zi)),o+=3}});let i=k2(o?P2(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new zt(i.length?this.local.concat(i).sort(ea):this.local,s||this.children)}remove(e){return e.length==0||this==yn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+n,l=r[o+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,a+1);c!=yn?r[o+2]=c:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<e.length;o++)if(i=e[o])for(let a=0;a<s.length;a++)s[a].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new zt(s,r):yn}forChild(e,n){if(this==yn)return this;if(n.isLeaf)return zt.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,i=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>o&&l.type instanceof Yo){let c=Math.max(o,l.from)-o,u=Math.min(i,l.to)-o;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new zt(s.sort(ea),Xa);return r?new So([a,r]):a}return r||yn}eq(e){if(this==e)return!0;if(!(e instanceof zt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return US(this.localsInner(e))}localsInner(e){if(this==yn)return Xa;if(e.inlineContent||!this.local.some(Yo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Yo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}zt.empty=new zt([],[]);zt.removeOverlap=US;const yn=zt.empty;class So{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Zi));return So.from(r)}forChild(e,n){if(n.isLeaf)return zt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,n);o!=yn&&(o instanceof So?r=r.concat(o.members):r.push(o))}return So.from(r)}eq(e){if(!(e instanceof So)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?US(r?n:n.sort(ea)):Xa}static from(e){switch(e.length){case 0:return yn;case 1:return e[0];default:return new So(e.every(n=>n instanceof zt)?e:e.reduce((n,r)=>n.concat(r instanceof zt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function zee(t,e,n,r,s,o,i){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,y,m)=>{let w=m-y-(p-f);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||f>x+u-d)continue;let b=a[v]+u-d;p>=b?a[v+1]=f<=b?-2:-1:f>=u&&w&&(a[v]+=w,a[v+1]+=w)}d+=w}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+o),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+o,-1),p=f-s,{index:y,offset:m}=r.content.findIndex(d),w=r.maybeChild(y);if(w&&m==d&&m+w.nodeSize==p){let v=a[c+2].mapInner(n,w,u+1,t[c]+o+1,i);v!=yn?(a[c]=d,a[c+1]=p,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Vee(a,t,e,n,s,o,i),u=zp(c,r,0,i);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new zt(e.sort(ea),a)}function k2(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Tr(s.from+e,s.to+e,s.type))}return n}function Vee(t,e,n,r,s,o,i){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+o+1);return n}function T2(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let o=0,i;o<t.length;o++)(i=t[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),t[o]=null);return s}function P2(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function zp(t,e,n,r){let s=[],o=!1;e.forEach((a,l)=>{let c=T2(t,a,l+n);if(c){o=!0;let u=zp(c,a,n+l+1,r);u!=yn&&s.push(l,l+a.nodeSize,u)}});let i=k2(o?P2(t):t,-n).sort(ea);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new zt(i,s):yn}function ea(t,e){return t.from-e.from||t.to-e.to}function US(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[s]=o.copy(o.from,r.to),tP(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),tP(e,s,r.copy(o.from,r.to)));break}}}return e}function tP(t,e,n){for(;e<t.length&&ea(n,t[e])>0;)e++;t.splice(e,0,n)}function Wy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=yn&&e.push(r)}),t.cursorWrapper&&e.push(zt.create(t.state.doc,[t.cursorWrapper.deco])),So.from(e)}const Uee={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Wee=Jn&&Go<=11;class Hee{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Kee{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Hee,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Jn&&Go<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),Wee&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Uee)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qT(this.view)){if(this.suppressingSelectionUpdates)return Us(this.view);if(Jn&&Go<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ya(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Pd(o))n.add(o);for(let o=e.anchorNode;o;o=Pd(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&qT(e)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(a=!0))}if(es&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||Jee(e,d)!=p)&&f.remove()}}}let c=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&og(r)&&(c=LS(e))&&c.eq(De.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Us(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,i),qee(e)),this.handleDOMChange(o,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Us(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(Jn&&Go<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let i=s&&s.parentNode==e.target?on(s)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=o&&o.parentNode==e.target?on(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let nP=new WeakMap,rP=!1;function qee(t){if(!nP.has(t)&&(nP.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=es,rP)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),rP=!0}}function sP(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return ya(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function Gee(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return sP(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?sP(t,n):null}function Jee(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Yee(t,e,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],og(l)||c.push({node:l.focusNode,offset:l.focusOffset})),bn&&t.input.lastKeyCode===8)for(let w=o;w>s;w--){let v=r.childNodes[w-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){o=w;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||qo.fromSchema(t.state.schema),p=d.resolve(i),y=null,m=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Qee,context:p});if(c&&c[0].pos!=null){let w=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=w),y={anchor:w+i,head:v+i}}return{doc:m,sel:y,from:i,to:a}}function Qee(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Rn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Rn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Xee=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Zee(t,e,n,r,s){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=LS(t,T);if(_&&!t.state.selection.eq(_)){if(bn&&$s&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,Mi(13,"Enter"))))return;let R=t.state.tr.setSelection(_);T=="pointer"?R.setMeta("pointer",!0):T=="key"&&R.scrollIntoView(),o&&R.setMeta("composition",o),t.dispatch(R)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=Yee(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let y=nte(d.content,c.doc.content,c.from,f,p);if(y&&t.input.domChangeCount++,(hc&&t.input.lastIOSEnter>Date.now()-225||$s)&&s.some(T=>T.nodeType==1&&!Xee.test(T.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",T=>T(t,Mi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof Oe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=oP(t,t.state.doc,c.sel);if(T&&!T.eq(t.state.selection)){let _=t.state.tr.setSelection(T);o&&_.setMeta("composition",o),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof Oe&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),Jn&&Go<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)=="  "&&(y.start--,y.endA--,y.endB--);let m=c.doc.resolveNoCache(y.start-c.from),w=c.doc.resolveNoCache(y.endB-c.from),v=u.resolve(y.start),x=m.sameParent(w)&&m.parent.inlineContent&&v.end()>=y.endA,b;if((hc&&t.input.lastIOSEnter>Date.now()-225&&(!x||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!x&&m.pos<c.doc.content.size&&!m.sameParent(w)&&(b=De.findFrom(c.doc.resolve(m.pos+1),1,!0))&&b.head==w.pos)&&t.someProp("handleKeyDown",T=>T(t,Mi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&tte(u,y.start,y.endA,m,w)&&t.someProp("handleKeyDown",T=>T(t,Mi(8,"Backspace")))){$s&&bn&&t.domObserver.suppressSelectionUpdates();return}bn&&y.endB==y.start&&(t.input.lastChromeDelete=Date.now()),$s&&!x&&m.start()!=w.start()&&w.parentOffset==0&&m.depth==w.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,w=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,Mi(13,"Enter"))})},20));let C=y.start,E=y.endA,k,P,S;if(x){if(m.pos==w.pos)Jn&&Go<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Us(t),20)),k=t.state.tr.delete(C,E),P=u.resolve(y.start).marksAcross(u.resolve(y.endA));else if(y.endA==y.endB&&(S=ete(m.parent.content.cut(m.parentOffset,w.parentOffset),v.parent.content.cut(v.parentOffset,y.endA-v.start()))))k=t.state.tr,S.type=="add"?k.addMark(C,E,S.mark):k.removeMark(C,E,S.mark);else if(m.parent.child(m.index()).isText&&m.index()==w.index()-(w.textOffset?0:1)){let T=m.parent.textBetween(m.parentOffset,w.parentOffset);if(t.someProp("handleTextInput",_=>_(t,C,E,T)))return;k=t.state.tr.insertText(T,C,E)}}if(k||(k=t.state.tr.replace(C,E,c.doc.slice(y.start-c.from,y.endB-c.from))),c.sel){let T=oP(t,k.doc,c.sel);T&&!(bn&&t.composing&&T.empty&&(y.start!=y.endB||t.input.lastChromeDelete<Date.now()-100)&&(T.head==C||T.head==k.mapping.map(E)-1)||Jn&&T.empty&&T.head==C)&&k.setSelection(T)}P&&k.ensureMarks(P),o&&k.setMeta("composition",o),t.dispatch(k.scrollIntoView())}function oP(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:FS(t,e.resolve(n.anchor),e.resolve(n.head))}function ete(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,o=r,i,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)o=n[u].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Z.from(c).eq(t))return{mark:a,type:i}}function tte(t,e,n,r,s){if(n-e<=s.pos-r.pos||Hy(r,!0,!1)<s.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=t.resolve(Hy(o,!0,!0));return!i.parent.isTextblock||i.pos>n||Hy(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Hy(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function nte(t,e,n,r,s){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,o-Math.min(i,a));r-=i+l-o}if(i<o&&t.size<e.size){let l=r<=o&&r>=i?o-r:0;o-=l,o&&o<e.size&&iP(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-i),i=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<t.size&&iP(t.textBetween(o-1,o+1))&&(o+=l?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function iP(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class rte{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new See,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(dP),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=cP(this),lP(this),this.nodeViews=uP(this),this.docView=zT(this.state.doc,aP(this),Wy(this),this.dom,this),this.domObserver=new Kee(this,(r,s,o,i)=>Zee(this,r,s,o,i)),this.domObserver.start(),Cee(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Cw(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(dP),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(b2(this),i=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=uP(this);ote(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Cw(this),this.editable=cP(this),lP(this);let l=Wy(this),c=aP(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(i=!0);let f=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&LZ(this);if(i){this.domObserver.stop();let p=d&&(Jn||bn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&ste(s.selection,e.selection);if(d){let y=bn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Iee(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=zT(e.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&aee(this))?Us(this,p):(l2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&FZ(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ke){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&DT(this,n.getBoundingClientRect(),e)}else DT(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new C2(e.slice,e.move,s<0?void 0:ke.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(s=n?n(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Jn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$Z(this.dom),Us(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return WZ(this,e)}coordsAtPos(e,n=1){return e2(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return JZ(this,n||this.state,e)}pasteHTML(e,n){return Nd(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Nd(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(Eee(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,TZ())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Tee(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Rn&&this.root.nodeType===11&&MZ(this.dom.ownerDocument)==this.dom&&Gee(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function aP(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Tr.node(0,t.state.doc.content.size,e)]}function lP(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function cP(t){return!t.someProp("editable",e=>e(t.state)===!1)}function ste(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function uP(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function ote(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function dP(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var si={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ite=typeof navigator<"u"&&/Mac/.test(navigator.platform),ate=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var an=0;an<10;an++)si[48+an]=si[96+an]=String(an);for(var an=1;an<=24;an++)si[an+111]="F"+an;for(var an=65;an<=90;an++)si[an]=String.fromCharCode(an+32),Vp[an]=String.fromCharCode(an);for(var Ky in si)Vp.hasOwnProperty(Ky)||(Vp[Ky]=si[Ky]);function lte(t){var e=ite&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ate&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Vp:si)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const cte=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ute(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))cte?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function dte(t){let e=Object.create(null);for(let n in t)e[ute(n)]=t[n];return e}function qy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function fte(t){return new Xn({props:{handleKeyDown:_2(t)}})}function _2(t){let e=dte(t);return function(n,r){let s=lte(r),o,i=e[qy(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[qy(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||s.charCodeAt(0)>127)&&(o=si[r.keyCode])&&o!=s){let a=e[qy(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const hte=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function N2(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const pte=(t,e,n)=>{let r=N2(t,n);if(!r)return!1;let s=WS(r);if(!s){let i=r.blockRange(),a=i&&jc(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(O2(t,s,e,-1))return!0;if(r.parent.content.size==0&&(pc(o,"end")||ke.isSelectable(o)))for(let i=r.depth;;i--){let a=rg(t.doc,r.before(i),r.after(i),le.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(pc(o,"end")?De.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):ke.create(l.doc,s.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},mte=(t,e,n)=>{let r=N2(t,n);if(!r)return!1;let s=WS(r);return s?R2(t,s,e):!1},gte=(t,e,n)=>{let r=M2(t,n);if(!r)return!1;let s=HS(r);return s?R2(t,s,e):!1};function R2(t,e,n){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=rg(t.doc,o,l,le.empty);if(!c||c.from!=o||c instanceof Kt&&c.slice.size>=l-o)return!1;if(n){let u=t.tr.step(c);u.setSelection(Oe.create(u.doc,o)),n(u.scrollIntoView())}return!0}function pc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const yte=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=WS(r)}let i=o&&o.nodeBefore;return!i||!ke.isSelectable(i)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function WS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function M2(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const vte=(t,e,n)=>{let r=M2(t,n);if(!r)return!1;let s=HS(r);if(!s)return!1;let o=s.nodeAfter;if(O2(t,s,e,1))return!0;if(r.parent.content.size==0&&(pc(o,"start")||ke.isSelectable(o))){let i=rg(t.doc,r.before(),r.after(),le.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(pc(o,"start")?De.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):ke.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},wte=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=HS(r)}let i=o&&o.nodeAfter;return!i||!ke.isSelectable(i)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,o.pos)).scrollIntoView()),!0)};function HS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const xte=(t,e)=>{let n=t.selection,r=n instanceof ke,s;if(r){if(n.node.isTextblock||!gi(t.doc,n.from))return!1;s=n.from}else if(s=ng(t.doc,n.from,-1),s==null)return!1;if(e){let o=t.tr.join(s);r&&o.setSelection(ke.create(o.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},bte=(t,e)=>{let n=t.selection,r;if(n instanceof ke){if(n.node.isTextblock||!gi(t.doc,n.to))return!1;r=n.to}else if(r=ng(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Ste=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),o=s&&jc(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)},Cte=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function A2(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Ete=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=A2(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(De.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},kte=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Nr||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=A2(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(i,o.createAndFill());a.setSelection(Oe.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},Tte=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ml(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&jc(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},Pte=(t,e)=>{let{$from:n,to:r}=t.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),e&&e(t.tr.setSelection(ke.create(t.doc,s))),!0)};function _te(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||gi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function O2(t,e,n,r){let s=e.nodeBefore,o=e.nodeAfter,i,a,l=s.type.spec.isolating||o.type.spec.isolating;if(!l&&_te(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,y=Z.empty;for(let v=i.length-1;v>=0;v--)y=Z.from(i[v].create(null,y));y=Z.from(s.copy(y));let m=t.tr.step(new Gt(e.pos-1,p,e.pos,p,new le(y,1,0),i.length,!0)),w=m.doc.resolve(p+2*i.length);w.nodeAfter&&w.nodeAfter.type==s.type&&gi(m.doc,w.pos)&&m.join(w.pos),n(m.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:De.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&jc(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&pc(o,"start",!0)&&pc(s,"end")){let p=s,y=[];for(;y.push(p),!p.isTextblock;)p=p.lastChild;let m=o,w=1;for(;!m.isTextblock;m=m.firstChild)w++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let v=Z.empty;for(let b=y.length-1;b>=0;b--)v=Z.from(y[b].copy(v));let x=t.tr.step(new Gt(e.pos-y.length,e.pos+o.nodeSize,e.pos+w,e.pos+o.nodeSize-w,new le(v,y.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function j2(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(e.tr.setSelection(Oe.create(e.doc,t<0?s.start(o):s.end(o)))),!0):!1}}const Nte=j2(-1),Rte=j2(1);function Mte(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),a=i&&jS(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function fP(t,e=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(i,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];o.setBlockType(a,l,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Ate(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let a=r?n.tr:null;return Ote(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Ote(t,e,n,r=null){let s=!1,o=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);o=new Dp(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Dp(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=jS(o,n,r,e);return a?(t&&jte(t,e,a,s,n),!0):!1}function jte(t,e,n,r,s){let o=Z.empty;for(let u=n.length-1;u>=0;u--)o=Z.from(n[u].type.create(n[u].attrs,o));t.step(new Gt(e.start-(r?2:0),e.end,e.start,e.end,new le(o,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==s&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Ml(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function Dte(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Ite(e,n,t,o):Lte(e,n,o):!0:!1}}function Ite(t,e,n,r){let s=t.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new Gt(o-1,i,o,i,new le(Z.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Dp(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=jc(r);if(a==null)return!1;s.lift(r,a);let l=s.mapping.map(o,-1)-1;return gi(s.doc,l)&&s.join(l),e(s.scrollIntoView()),!0}function Lte(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,y=n.endIndex-1,m=n.startIndex;y>m;y--)p-=s.child(y).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?Z.empty:Z.from(s))))return!1;let d=o.pos,f=d+i.nodeSize;return r.step(new Gt(d-(a?1:0),f+(l?1:0),d+1,f-1,new le((a?Z.empty:Z.from(s.copy(Z.empty))).append(l?Z.empty:Z.from(s.copy(Z.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Fte(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Z.from(c?t.create():null),d=new le(Z.from(t.create(null,Z.from(a.type.create(null,u)))),c?3:1,0),f=o.start,p=o.end;n(e.tr.step(new Gt(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}function lg(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}class cg{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],l=!!e,c=e||o.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,p])=>[f,(...m)=>{const w=this.buildProps(c,n),v=p(...m)(w);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,s=!1,o=e||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a={tr:e,editor:s,view:i,state:lg({state:o,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class $te{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(s=>s!==n):delete this.callbacks[e]),this}once(e,n){const r=(...s)=>{this.off(e,r),n.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function me(t,e,n){return t.config[e]===void 0&&t.parent?me(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?me(t.parent,e,n):null}):t.config[e]}function ug(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function D2(t){const e=[],{nodeExtensions:n,markExtensions:r}=ug(t),s=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},l=me(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...o,...p}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=me(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...o,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:i.name,name:u,attribute:f})})}),e}function Yt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function On(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=o?o.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=o}),r},{})}function Ew(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>On(n,r),{})}function I2(t){return typeof t=="function"}function Le(t,e=void 0,...n){return I2(t)?e?t.bind(e)(...n):t(...n):t}function Bte(t={}){return Object.keys(t).length===0&&t.constructor===Object}function zte(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function hP(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):zte(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function pP(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Bte(n)?!1:n!=null))}function Vte(t,e){var n;const r=D2(t),{nodeExtensions:s,markExtensions:o}=ug(t),i=(n=s.find(c=>me(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,x)=>{const b=me(x,"extendNodeSchema",d);return{...v,...b?b(c):{}}},{}),p=pP({...f,content:Le(me(c,"content",d)),marks:Le(me(c,"marks",d)),group:Le(me(c,"group",d)),inline:Le(me(c,"inline",d)),atom:Le(me(c,"atom",d)),selectable:Le(me(c,"selectable",d)),draggable:Le(me(c,"draggable",d)),code:Le(me(c,"code",d)),whitespace:Le(me(c,"whitespace",d)),linebreakReplacement:Le(me(c,"linebreakReplacement",d)),defining:Le(me(c,"defining",d)),isolating:Le(me(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var x;return[v.name,{default:(x=v==null?void 0:v.attribute)===null||x===void 0?void 0:x.default}]}))}),y=Le(me(c,"parseHTML",d));y&&(p.parseDOM=y.map(v=>hP(v,u)));const m=me(c,"renderHTML",d);m&&(p.toDOM=v=>m({node:v,HTMLAttributes:Ew(v,u)}));const w=me(c,"renderText",d);return w&&(p.toText=w),[c.name,p]})),l=Object.fromEntries(o.map(c=>{const u=r.filter(w=>w.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((w,v)=>{const x=me(v,"extendMarkSchema",d);return{...w,...x?x(c):{}}},{}),p=pP({...f,inclusive:Le(me(c,"inclusive",d)),excludes:Le(me(c,"excludes",d)),group:Le(me(c,"group",d)),spanning:Le(me(c,"spanning",d)),code:Le(me(c,"code",d)),attrs:Object.fromEntries(u.map(w=>{var v;return[w.name,{default:(v=w==null?void 0:w.attribute)===null||v===void 0?void 0:v.default}]}))}),y=Le(me(c,"parseHTML",d));y&&(p.parseDOM=y.map(w=>hP(w,u)));const m=me(c,"renderHTML",d);return m&&(p.toDOM=w=>m({mark:w,HTMLAttributes:Ew(w,u)})),[c.name,p]}));return new RL({topNode:i,nodes:a,marks:l})}function Gy(t,e){return e.nodes[t]||e.marks[t]||null}function mP(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function KS(t,e){const n=Aa.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}const Ute=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,i,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-o))}),n};function qS(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class dg{constructor(e){this.find=e.find,this.handler=e.handler}}const Wte=(t,e)=>{if(qS(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ih(t){var e;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=Ute(c)+o;return i.forEach(f=>{if(u)return;const p=Wte(d,f.find);if(!p)return;const y=l.state.tr,m=lg({state:l.state,transaction:y}),w={from:r-(p[0].length-o.length),to:s},{commands:v,chain:x,can:b}=new cg({editor:n,state:m});f.handler({state:m,range:w,match:p,commands:v,chain:x,can:b})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:s,text:o}),l.dispatch(y),u=!0)}),u}function Hte(t){const{editor:e,rules:n}=t,r=new Xn({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=KS(Z.from(u),i.schema);const{from:d}=l,f=d+u.length;ih({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return ih({editor:e,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&ih({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?ih({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Kte(t){return Object.prototype.toString.call(t).slice(8,-1)}function ah(t){return Kte(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function fg(t,e){const n={...t};return ah(t)&&ah(e)&&Object.keys(e).forEach(r=>{ah(e[r])&&ah(t[r])?n[r]=fg(t[r],e[r]):n[r]=e[r]}),n}class oi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(me(this,"addOptions",{name:this.name}))),this.storage=Le(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new oi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>fg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new oi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(me(n,"addOptions",{name:n.name})),n.storage=Le(me(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function qte(t){return typeof t=="number"}class Gte{constructor(e){this.find=e.find,this.handler=e.handler}}const Jte=(t,e,n)=>{if(qS(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function Yte(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:u}=new cg({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(p,y)=>{if(!p.isTextblock||p.type.spec.code)return;const m=Math.max(r,y),w=Math.min(s,y+p.content.size),v=p.textBetween(m-y,w-y,void 0,"￼");Jte(v,o.find,i).forEach(b=>{if(b.index===void 0)return;const C=m+b.index+1,E=C+b[0].length,k={from:n.tr.mapping.map(C),to:n.tr.mapping.map(E)},P=o.handler({state:n,range:k,match:b,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});d.push(P)})}),d.every(p=>p!==null)}let lh=null;const Qte=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Xte(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:p,pasteEvt:y})=>{const m=u.tr,w=lg({state:u,transaction:m});if(!(!Yte({editor:e,state:w,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:y,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new Xn({view(d){const f=y=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(y.target)?d.dom.parentElement:null,r&&(lh=e)},p=()=>{lh&&(lh=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,a=f,!o){const p=lh;p&&setTimeout(()=>{const y=p.state.selection;y&&p.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(d,f)=>{var p;const y=(p=f.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return i=f,s=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const y=d[0],m=y.getMeta("uiEvent")==="paste"&&!s,w=y.getMeta("uiEvent")==="drop"&&!o,v=y.getMeta("applyPasteRules"),x=!!v;if(!m&&!w&&!x)return;if(x){let{text:E}=v;typeof E=="string"?E=E:E=KS(Z.from(E),p.schema);const{from:k}=v,P=k+E.length,S=Qte(E);return l({rule:u,state:p,from:k,to:{b:P},pasteEvt:S})}const b=f.doc.content.findDiffStart(p.doc.content),C=f.doc.content.findDiffEnd(p.doc.content);if(!(!qte(b)||!C||b===C.b))return l({rule:u,state:p,from:b,to:C,pasteEvt:i})}}))}function Zte(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class yl{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=yl.resolve(e),this.schema=Vte(this.extensions,n),this.setupExtensions()}static resolve(e){const n=yl.sort(yl.flatten(e)),r=Zte(n.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},s=me(n,"addExtensions",r);return s?[n,...this.flatten(s())]:n}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=me(r,"priority")||100,i=me(s,"priority")||100;return o>i?-1:o<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Gy(n.name,this.schema)},s=me(n,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,n=yl.sort([...this.extensions].reverse()),r=[],s=[],o=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Gy(i.name,this.schema)},l=[],c=me(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&me(i,"exitable",a)&&(u.ArrowRight=()=>oi.handleExit({editor:e,mark:i})),c){const m=Object.fromEntries(Object.entries(c()).map(([w,v])=>[w,()=>v({editor:e})]));u={...u,...m}}const d=fte(u);l.push(d);const f=me(i,"addInputRules",a);mP(i,e.options.enableInputRules)&&f&&r.push(...f());const p=me(i,"addPasteRules",a);mP(i,e.options.enablePasteRules)&&p&&s.push(...p());const y=me(i,"addProseMirrorPlugins",a);if(y){const m=y();l.push(...m)}return l}).flat();return[Hte({editor:e,rules:r}),...Xte({editor:e,rules:s}),...o]}get attributes(){return D2(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=ug(this.extensions);return Object.fromEntries(n.filter(r=>!!me(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Yt(r.name,this.schema)},i=me(r,"addNodeView",o);if(!i)return[];const a=(l,c,u,d,f)=>{const p=Ew(l,s);return i()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Gy(e.name,this.schema)};e.type==="mark"&&(!((n=Le(me(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const s=me(e,"onBeforeCreate",r),o=me(e,"onCreate",r),i=me(e,"onUpdate",r),a=me(e,"onSelectionUpdate",r),l=me(e,"onTransaction",r),c=me(e,"onFocus",r),u=me(e,"onBlur",r),d=me(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class jn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(me(this,"addOptions",{name:this.name}))),this.storage=Le(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new jn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>fg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new jn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(me(n,"addOptions",{name:n.name})),n.storage=Le(me(n,"addStorage",{name:n.name,options:n.options})),n}}function L2(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=o);const p=i==null?void 0:i[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,s-c))}),a}function F2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const ene=jn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xn({key:new Ps("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,i=Math.min(...o.map(u=>u.$from.pos)),a=Math.max(...o.map(u=>u.$to.pos)),l=F2(n);return L2(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),tne=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),nne=(t=!1)=>({commands:e})=>e.setContent("",t),rne=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{t.doc.nodesBetween(o.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(f);if(!p)return;const y=jc(p);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,m)}(y||y===0)&&e.lift(p,y)})}),!0},sne=t=>e=>t(e),one=()=>({state:t,dispatch:e})=>kte(t,e),ine=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,o.content),r.setSelection(new Oe(r.doc.resolve(i-1))),!0},ane=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const a=s.before(o),l=s.after(o);t.delete(a,l).scrollIntoView()}return!0}return!1},lne=t=>({tr:e,state:n,dispatch:r})=>{const s=Yt(t,n.schema),o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const l=o.before(i),c=o.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},cne=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},une=()=>({state:t,dispatch:e})=>hte(t,e),dne=()=>({commands:t})=>t.keyboardShortcut("Enter"),fne=()=>({state:t,dispatch:e})=>Ete(t,e);function Up(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:qS(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function $2(t,e,n={}){return t.find(r=>r.type===e&&Up(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function gP(t,e,n={}){return!!$2(t,e,n)}function GS(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!$2([...s.node.marks],e,n)))return;let i=s.index,a=t.start()+s.offset,l=i+1,c=a+s.node.nodeSize;for(;i>0&&gP([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&gP([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function vi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const hne=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=vi(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=GS(l,o,e);if(d&&d.from<=c&&d.to>=u){const f=Oe.create(i,d.from,d.to);n.setSelection(f)}}return!0},pne=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function B2(t){return t instanceof Oe}function Bi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function z2(t,e=null){if(!e)return null;const n=De.atStart(t),r=De.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?Oe.create(t,Bi(0,s,o),Bi(t.content.size,s,o)):Oe.create(t,Bi(e,s,o),Bi(e,s,o))}const mne=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const i=()=>{r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!B2(n.state.selection))return i(),!0;const a=z2(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},gne=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),yne=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),V2=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&V2(r)}return t};function ch(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return V2(n)}function Wp(t,e,n){if(t instanceof Ko||t instanceof Z)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Z.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Wp("",e,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const l=new RL({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?qo.fromSchema(l).parseSlice(ch(t),n.parseOptions):qo.fromSchema(l).parse(ch(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=qo.fromSchema(e);return n.slice?o.parseSlice(ch(t),n.parseOptions).content:o.parse(ch(t),n.parseOptions)}return Wp("",e,n)}function vne(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Kt||s instanceof Gt))return;const o=t.mapping.maps[r];let i=0;o.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(De.near(t.doc.resolve(i),n))}const wne=t=>!("type"in t),xne=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=Wp(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:o.options.enableContentCheck})}catch(y){return o.emit("contentError",{editor:o,error:y,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((wne(a)?a:[a]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,d=d?y.isBlock:!1}),l===c&&d){const{parent:y}=r.doc.resolve(l);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(y=>y.text||"").join("");else if(e instanceof Z){let y="";e.forEach(m=>{m.text&&(y+=m.text)}),p=y}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&vne(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},bne=()=>({state:t,dispatch:e})=>xte(t,e),Sne=()=>({state:t,dispatch:e})=>bte(t,e),Cne=()=>({state:t,dispatch:e})=>pte(t,e),Ene=()=>({state:t,dispatch:e})=>vte(t,e),kne=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ng(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Tne=()=>({state:t,dispatch:e,tr:n})=>{try{const r=ng(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Pne=()=>({state:t,dispatch:e})=>mte(t,e),_ne=()=>({state:t,dispatch:e})=>gte(t,e);function U2(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function W2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Nne(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))U2()||W2()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}const Rne=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=Nne(t).split(/-(?!$)/),i=o.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Md(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,i=e?Yt(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),y=Math.min(s,f+d.nodeSize);a.push({node:d,from:p,to:y})});const l=s-r,c=a.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>Up(d.node.attrs,n,{strict:!1}));return o?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const Mne=(t,e={})=>({state:n,dispatch:r})=>{const s=Yt(t,n.schema);return Md(n,s,e)?Ste(n,r):!1},Ane=()=>({state:t,dispatch:e})=>Tte(t,e),One=t=>({state:e,dispatch:n})=>{const r=Yt(t,e.schema);return Dte(r)(e,n)},jne=()=>({state:t,dispatch:e})=>Cte(t,e);function hg(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function yP(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}const Dne=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=hg(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Yt(t,r.schema)),a==="mark"&&(i=vi(t,r.schema)),s&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{o&&o===c.type&&n.setNodeMarkup(u,void 0,yP(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(d=>{i===d.type&&n.addMark(u,u+c.nodeSize,i.create(yP(d.attrs,e)))})})}),!0):!1},Ine=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Lne=()=>({tr:t,dispatch:e})=>{if(e){const n=new Nr(t.doc);t.setSelection(n)}return!0},Fne=()=>({state:t,dispatch:e})=>yte(t,e),$ne=()=>({state:t,dispatch:e})=>wte(t,e),Bne=()=>({state:t,dispatch:e})=>Pte(t,e),zne=()=>({state:t,dispatch:e})=>Rte(t,e),Vne=()=>({state:t,dispatch:e})=>Nte(t,e);function kw(t,e,n={},r={}){return Wp(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Une=(t,e=!1,n={},r={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{var l,c;const{doc:u}=o;if(n.preserveWhitespace!=="full"){const d=kw(t,s.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return i&&o.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return i&&o.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function H2(t,e){const n=vi(e,t.schema),{from:r,to:s,empty:o}=t.selection,i=[];o?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Wne(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Hne(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function JS(t){return e=>Hne(e.$from,t)}function Kne(t,e){const n={from:0,to:t.content.size};return L2(t,n,e)}function qne(t,e){const n=Yt(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function Gne(t,e){const n=hg(typeof e=="string"?e:e.name,t.schema);return n==="node"?qne(t,e):n==="mark"?H2(t,e):{}}function K2(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),i=GS(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(t,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function Oh(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function Tw(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?vi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>Up(d.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const p=d.pos,y=f.pos;t.doc.nodesBetween(p,y,(m,w)=>{if(!m.isText&&!m.marks.length)return;const v=Math.max(p,w),x=Math.min(y,w+m.nodeSize),b=x-v;i+=b,a.push(...m.marks.map(C=>({mark:C,from:v,to:x})))})}),i===0)return!1;const l=a.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>Up(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=i}function Jne(t,e,n={}){if(!e)return Md(t,null,n)||Tw(t,null,n);const r=hg(e,t.schema);return r==="node"?Md(t,e,n):r==="mark"?Tw(t,e,n):!1}function vP(t,e){const{nodeExtensions:n}=ug(e),r=n.find(i=>i.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Le(me(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function YS(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(YS(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function Yne(t){return t instanceof ke}function Qne(t,e,n){var r;const{selection:s}=e;let o=null;if(B2(s)&&(o=s.$cursor),o){const a=(r=t.storedMarks)!==null&&r!==void 0?r:o.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=s;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=p&&y}return!c}),c})}const Xne=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,l=vi(t,r.schema);if(s)if(i){const c=H2(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const y=Math.max(p,u),m=Math.min(p+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(y,m,l.create({...v.attrs,...e}))}):n.addMark(y,m,l.create(e))})});return Qne(r,n,l)},Zne=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),ere=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=Yt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>fP(o,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>fP(o,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},tre=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Bi(t,0,r.content.size),o=ke.create(r,s);e.setSelection(o)}return!0},nre=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,i=Oe.atStart(r).from,a=Oe.atEnd(r).to,l=Bi(s,i,a),c=Bi(o,i,a),u=Oe.create(r,l,c);e.setSelection(u)}return!0},rre=t=>({state:e,dispatch:n})=>{const r=Yt(t,e.schema);return Fte(r)(e,n)};function wP(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}const sre=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=e,{$from:a,$to:l}=o,c=s.extensionManager.attributes,u=Oh(c,a.node().type.name,a.node().attrs);if(o instanceof ke&&o.node.isBlock)return!a.parentOffset||!Ml(i,a.pos)?!1:(r&&(t&&wP(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:Wne(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,y=Ml(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!y&&Ml(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(y=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(y&&(o instanceof Oe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const m=e.mapping.map(a.before()),w=e.doc.resolve(m);a.node(-1).canReplaceWith(w.index(),w.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&wP(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return y},ore=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=Yt(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=o.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let v=Z.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let S=l.depth-x;S>=l.depth-3;S-=1)v=Z.from(l.node(S).copy(v));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...Oh(f,l.node().type.name,l.node().attrs),...e},E=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(C))||void 0;v=v.append(Z.from(a.createAndFill(null,E)||void 0));const k=l.before(l.depth-(x-1));n.replace(k,l.after(-b),new le(v,4-x,0));let P=-1;n.doc.nodesBetween(k,n.doc.content.size,(S,T)=>{if(P>-1)return!1;S.isTextblock&&S.content.size===0&&(P=T+1)}),P>-1&&n.setSelection(Oe.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,y={...Oh(f,d.type.name,d.attrs),...e},m={...Oh(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const w=p?[{type:a,attrs:y},{type:p,attrs:m}]:[{type:a,attrs:y}];if(!Ml(n.doc,l.pos,2))return!1;if(s){const{selection:v,storedMarks:x}=r,{splittableMarks:b}=o.extensionManager,C=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,w).scrollIntoView(),!C||!s)return!0;const E=C.filter(k=>b.includes(k.type.name));n.ensureMarks(E)}return!0},Jy=(t,e)=>{const n=JS(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&gi(t.doc,n.pos)&&t.join(n.pos),!0},Yy=(t,e)=>{const n=JS(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&gi(t.doc,r)&&t.join(r),!0},ire=(t,e,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,p=Yt(t,i.schema),y=Yt(e,i.schema),{selection:m,storedMarks:w}=i,{$from:v,$to:x}=m,b=v.blockRange(x),C=w||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const E=JS(k=>vP(k.type.name,d))(m);if(b.depth>=1&&E&&b.depth-E.depth<=1){if(E.node.type===p)return c.liftListItem(y);if(vP(E.node.type.name,d)&&p.validContent(E.node.content)&&a)return l().command(()=>(o.setNodeMarkup(E.pos,p),!0)).command(()=>Jy(o,p)).command(()=>Yy(o,p)).run()}return!n||!C||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Jy(o,p)).command(()=>Yy(o,p)).run():l().command(()=>{const k=u().wrapInList(p,r),P=C.filter(S=>f.includes(S.type.name));return o.ensureMarks(P),k?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Jy(o,p)).command(()=>Yy(o,p)).run()},are=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=vi(t,r.schema);return Tw(r,i,e)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,e)},lre=(t,e,n={})=>({state:r,commands:s})=>{const o=Yt(t,r.schema),i=Yt(e,r.schema),a=Md(r,o,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(i,l):s.setNode(o,{...l,...n})},cre=(t,e={})=>({state:n,commands:r})=>{const s=Yt(t,n.schema);return Md(n,s,e)?r.lift(s):r.wrapIn(s,e)},ure=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const i=t.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(o.text){const l=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,t.schema.text(o.text,l))}else i.delete(o.from,o.to)}return!0}}return!1},dre=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},fre=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=vi(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&i){let{from:f,to:p}=a;const y=(o=c.marks().find(w=>w.type===l))===null||o===void 0?void 0:o.attrs,m=GS(c,l,y);m&&(f=m.from,p=m.to),n.removeMark(f,p,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},hre=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=hg(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=Yt(t,r.schema)),a==="mark"&&(i=vi(t,r.schema)),s&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,f,p,y;n.selection.empty?r.doc.nodesBetween(c,u,(m,w)=>{o&&o===m.type&&(p=Math.max(w,c),y=Math.min(w+m.nodeSize,u),d=w,f=m)}):r.doc.nodesBetween(c,u,(m,w)=>{w<c&&o&&o===m.type&&(p=Math.max(w,c),y=Math.min(w+m.nodeSize,u),d=w,f=m),w>=c&&w<=u&&(o&&o===m.type&&n.setNodeMarkup(w,void 0,{...m.attrs,...e}),i&&m.marks.length&&m.marks.forEach(v=>{if(i===v.type){const x=Math.max(w,c),b=Math.min(w+m.nodeSize,u);n.addMark(x,b,i.create({...v.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),i&&f.marks.length&&f.marks.forEach(m=>{i===m.type&&n.addMark(p,y,i.create({...m.attrs,...e}))}))}),!0):!1},pre=(t,e={})=>({state:n,dispatch:r})=>{const s=Yt(t,n.schema);return Mte(s,e)(n,r)},mre=(t,e={})=>({state:n,dispatch:r})=>{const s=Yt(t,n.schema);return Ate(s,e)(n,r)};var gre=Object.freeze({__proto__:null,blur:tne,clearContent:nne,clearNodes:rne,command:sne,createParagraphNear:one,cut:ine,deleteCurrentNode:ane,deleteNode:lne,deleteRange:cne,deleteSelection:une,enter:dne,exitCode:fne,extendMarkRange:hne,first:pne,focus:mne,forEach:gne,insertContent:yne,insertContentAt:xne,joinBackward:Cne,joinDown:Sne,joinForward:Ene,joinItemBackward:kne,joinItemForward:Tne,joinTextblockBackward:Pne,joinTextblockForward:_ne,joinUp:bne,keyboardShortcut:Rne,lift:Mne,liftEmptyBlock:Ane,liftListItem:One,newlineInCode:jne,resetAttributes:Dne,scrollIntoView:Ine,selectAll:Lne,selectNodeBackward:Fne,selectNodeForward:$ne,selectParentNode:Bne,selectTextblockEnd:zne,selectTextblockStart:Vne,setContent:Une,setMark:Xne,setMeta:Zne,setNode:ere,setNodeSelection:tre,setTextSelection:nre,sinkListItem:rre,splitBlock:sre,splitListItem:ore,toggleList:ire,toggleMark:are,toggleNode:lre,toggleWrap:cre,undoInputRule:ure,unsetAllMarks:dre,unsetMark:fre,updateAttributes:hre,wrapIn:pre,wrapInList:mre});const yre=jn.create({name:"commands",addCommands(){return{...gre}}}),vre=jn.create({name:"drop",addProseMirrorPlugins(){return[new Xn({key:new Ps("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),wre=jn.create({name:"editable",addProseMirrorPlugins(){return[new Xn({key:new Ps("editable"),props:{editable:()=>this.editor.options.editable}})]}}),xre=jn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xn({key:new Ps("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),bre=jn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:p}=d,y=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,m=y.parent.type.spec.isolating,w=d.pos-d.parentOffset,v=m&&y.parent.childCount===1?w===d.pos:De.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return U2()||W2()?o:s},addProseMirrorPlugins(){return[new Xn({key:new Ps("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),s=t.some(m=>m.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=e.selection,l=De.atStart(e.doc).from,c=De.atEnd(e.doc).to;if(o||!(i===l&&a===c)||!YS(n.doc))return;const f=n.tr,p=lg({state:n,transaction:f}),{commands:y}=new cg({editor:this.editor,state:p});if(y.clearNodes(),!!f.steps.length)return f}})]}}),Sre=jn.create({name:"paste",addProseMirrorPlugins(){return[new Xn({key:new Ps("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Cre=jn.create({name:"tabindex",addProseMirrorPlugins(){return[new Xn({key:new Ps("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ai{get name(){return this.node.type.name}constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ai(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ai(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ai(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1),a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const l=new Ai(a,this.editor,s,s?n:null);s&&(l.actualDepth=this.depth+1),e.push(new Ai(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===e&&o.every(l=>n[l]===i.node.attrs[l])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const Ere=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function kre(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}class Tre extends $te{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:s})=>this.options.onDrop(n,r,s)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=kre(Ere,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=I2(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;r=n.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[wre,ene.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),yre,xre,bre,Cre,vre,Sre].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new yl(s,this)}createCommandManager(){this.commandManager=new cg({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=kw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=kw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=z2(n,this.options.autofocus);this.view=new rte(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:gl.create({doc:n,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Gne(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return Jne(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return KS(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return Kne(this.state.doc,{blockSeparator:n,textSerializers:{...F2(this.schema),...r}})}get isEmpty(){return YS(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Ai(n,this)}get $doc(){return this.$pos(0)}}function mc(t){return new dg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Le(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(K2(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&o.delete(u,n.to),c>n.from&&o.delete(n.from+l,c);const f=n.from+l+i.length;o.addMark(n.from+l,f,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function Pre(t){return new dg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Le(t.getAttributes,void 0,r)||{},{tr:o}=e,i=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=i+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,i+r[0].length-1),o.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?i:i-1;o.insert(c,t.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()}})}function Pw(t){return new dg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=Le(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Ad(t){return new dg({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=Le(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),l=i.doc.resolve(n.from).blockRange(),c=l&&jS(l,t.type,o);if(!c)return null;if(i.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,y=f||d.$to.parentOffset&&d.$from.marks();if(y){const m=y.filter(w=>p.includes(w.type.name));i.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,o).run()}const u=i.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&gi(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&i.join(n.from-1)}})}let ns=class _w{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(me(this,"addOptions",{name:this.name}))),this.storage=Le(me(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _w(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>fg(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new _w(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(me(n,"addOptions",{name:n.name})),n.storage=Le(me(n,"addStorage",{name:n.name,options:n.options})),n}};function gc(t){return new Gte({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=Le(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(K2(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(w=>w===t.type&&w!==y.mark.type)).filter(y=>y.to>d).length)return null;f<n.to&&i.delete(f,n.to),d>n.from&&i.delete(n.from+u,d),c=n.from+u+a.length,i.addMark(n.from+u,c,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function _re(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var q2={exports:{}},Qy={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP;function Nre(){if(xP)return Qy;xP=1;var t=ee;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,i=t.useDebugValue;function a(d,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),m=y[0].inst,w=y[1];return o(function(){m.value=p,m.getSnapshot=f,l(m)&&w({inst:m})},[d,p,f]),s(function(){return l(m)&&w({inst:m}),d(function(){l(m)&&w({inst:m})})},[d]),i(p),p}function l(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Qy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Qy}q2.exports=Nre();var QS=q2.exports;const Rre=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Mre=({contentComponent:t})=>{const e=QS.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return ee.createElement(ee.Fragment,null,Object.values(e))};function Are(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Vd.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}class Ore extends ee.Component{constructor(e){var n;super(e),this.editorContentRef=ee.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=Are(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return ee.createElement(ee.Fragment,null,ee.createElement("div",{ref:Rre(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&ee.createElement(Mre,{contentComponent:e.contentComponent}))}}const jre=g.forwardRef((t,e)=>{const n=ee.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ee.createElement(Ore,{key:n,innerRef:e,...t})}),Dre=ee.memo(jre);var Ire=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var i=o[s];if(!(i==="_owner"&&e.$$typeof)&&!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n},Lre=_re(Ire),G2={exports:{}},Xy={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP;function Fre(){if(bP)return Xy;bP=1;var t=ee,e=QS;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Xy.useSyncExternalStoreWithSelector=function(c,u,d,f,p){var y=o(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=a(function(){function v(k){if(!x){if(x=!0,b=k,k=f(k),p!==void 0&&m.hasValue){var P=m.value;if(p(P,k))return C=P}return C=k}if(P=C,r(b,k))return P;var S=f(k);return p!==void 0&&p(P,S)?P:(b=k,C=S)}var x=!1,b,C,E=d===void 0?null:d;return[function(){return v(u())},E===null?void 0:function(){return v(E())}]},[u,d,f,p]);var w=s(c,y[0],y[1]);return i(function(){m.hasValue=!0,m.value=w},[w]),l(w),w},Xy}G2.exports=Fre();var $re=G2.exports;const Bre=typeof window<"u"?g.useLayoutEffect:g.useEffect;class zre{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function Vre(t){var e;const[n]=g.useState(()=>new zre(t.editor)),r=$re.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:Lre);return Bre(()=>n.watch(t.editor),[t.editor,n]),g.useDebugValue(r),r}const Ure=!1,Nw=typeof window>"u",Wre=Nw||!!(typeof window<"u"&&window.next);class Hre{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return Nw||Wre?null:this.createEditor();if(this.options.current.immediatelyRender&&Nw&&Ure)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new Tre(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Kre(t={},e=[]){const n=g.useRef(t);n.current=t;const[r]=g.useState(()=>new Hre(n)),s=QS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return g.useDebugValue(s),g.useEffect(r.onRender(e)),Vre({editor:s,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&o===0?0:o+1}),s}const qre=g.createContext({editor:null});qre.Consumer;const Gre=g.createContext({onDragStart:void 0}),Jre=()=>g.useContext(Gre);ee.forwardRef((t,e)=>{const{onDragStart:n}=Jre(),r=t.as||"div";return ee.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const Yre=/^\s*>\s$/,Qre=ns.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ad({find:Yre,type:this.type})]}}),Xre=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Zre=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ese=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,tse=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nse=oi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[mc({find:Xre,type:this.type}),mc({find:ese,type:this.type})]},addPasteRules(){return[gc({find:Zre,type:this.type}),gc({find:tse,type:this.type})]}}),rse="listItem",SP="textStyle",CP=/^\s*([-+*])\s$/,sse=ns.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(rse,this.editor.getAttributes(SP)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ad({find:CP,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ad({find:CP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(SP),editor:this.editor})),[t]}}),ose=/(^|[^`])`([^`]+)`(?!`)/,ise=/(^|[^`])`([^`]+)`(?!`)/g,ase=oi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[mc({find:ose,type:this.type})]},addPasteRules(){return[gc({find:ise,type:this.type})]}}),lse=/^```([a-z]+)?[\s\n]$/,cse=/^~~~([a-z]+)?[\s\n]$/,use=ns.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",On(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(De.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[Pw({find:lse,type:this.type,getAttributes:t=>({language:t[1]})}),Pw({find:cse,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xn({key:new Ps("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:i,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},l)),i.selection.$from.parent.type!==this.type&&i.setSelection(Oe.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),dse=ns.create({name:"doc",topNode:!0,content:"block+"});function fse(t={}){return new Xn({view(e){return new hse(e,t)}})}class hse{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let s=this.editorView.dom.offsetParent;this.element||(this.element=s.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let o,i;if(!s||s==document.body&&getComputedStyle(s).position=="static")o=-pageXOffset,i=-pageYOffset;else{let a=s.getBoundingClientRect();o=a.left-s.scrollLeft,i=a.top-s.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=zL(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const pse=jn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[fse(this.options)]}});class Nt extends De{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Nt.valid(r)?new Nt(r):De.near(r)}content(){return le.empty}eq(e){return e instanceof Nt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Nt(e.resolve(n.pos))}getBookmark(){return new XS(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!mse(e)||!gse(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Nt.valid(e))return e;let s=e.pos,o=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){o=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;s+=n;let l=e.doc.resolve(s);if(Nt.valid(l))return l}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!ke.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let a=e.doc.resolve(s);if(Nt.valid(a))return a}return null}}}Nt.prototype.visible=!1;Nt.findFrom=Nt.findGapCursorFrom;De.jsonID("gapcursor",Nt);class XS{constructor(e){this.pos=e}map(e){return new XS(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Nt.valid(n)?new Nt(n):De.near(n)}}function mse(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function gse(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function yse(){return new Xn({props:{decorations:bse,createSelectionBetween(t,e,n){return e.pos==n.pos&&Nt.valid(n)?new Nt(n):null},handleClick:wse,handleKeyDown:vse,handleDOMEvents:{beforeinput:xse}}})}const vse=_2({ArrowLeft:uh("horiz",-1),ArrowRight:uh("horiz",1),ArrowUp:uh("vert",-1),ArrowDown:uh("vert",1)});function uh(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof Oe){if(!o.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Nt.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Nt(c))),!0):!1}}function wse(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Nt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&ke.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Nt(r))),!0)}function xse(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Nt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Z.empty;for(let i=r.length-1;i>=0;i--)s=Z.from(r[i].createAndFill(null,s));let o=t.state.tr.replace(n.pos,n.pos,new le(s,0,0));return o.setSelection(Oe.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function bse(t){if(!(t.selection instanceof Nt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",zt.create(t.doc,[Tr.widget(t.selection.head,e,{key:"gapcursor"})])}const Sse=jn.create({name:"gapCursor",addProseMirrorPlugins(){return[yse()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Le(me(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),Cse=ns.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",On(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ese=ns.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,On(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Pw({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Hp=200,Jt=function(){};Jt.prototype.append=function(e){return e.length?(e=Jt.from(e),!this.length&&e||e.length<Hp&&this.leafAppend(e)||this.length<Hp&&e.leafPrepend(this)||this.appendInner(e)):this};Jt.prototype.prepend=function(e){return e.length?Jt.from(e).append(this):this};Jt.prototype.appendInner=function(e){return new kse(this,e)};Jt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Jt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Jt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Jt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Jt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(e(o,i))},n,r),s};Jt.from=function(e){return e instanceof Jt?e:e&&e.length?new J2(e):Jt.empty};var J2=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,i,a){for(var l=o;l<i;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,i,a){for(var l=o-1;l>=i;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Hp)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Hp)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Jt);Jt.empty=new J2([]);var kse=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Jt);const Tse=500;class Hr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),o=s.maps.length),o--,u.push(d);return}if(s){u.push(new cs(d.map));let p=d.step.map(s.slice(o)),y;p&&i.maybeStep(p).doc&&(y=i.mapping.maps[i.mapping.maps.length-1],c.push(new cs(y,void 0,void 0,c.length+u.length))),o--,y&&s.appendMap(y,o)}else i.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(o)):d.selection,l=new Hr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,s){let o=[],i=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new cs(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),n&&(i++,n=void 0),s||(l=f)}let c=i-r.depth;return c>_se&&(a=Pse(a,c),i-=c),new Hr(a.append(o),i)}remapping(e,n){let r=new Rl;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Hr(this.items.append(e.map(n=>new cs(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let p=o.getMirror(--l);if(p==null)return;i=Math.min(i,p);let y=o.maps[p];if(f.step){let m=e.steps[p].invert(e.docs[p]),w=f.selection&&f.selection.map(o.slice(l+1,p));w&&a++,r.push(new cs(y,m,w))}else r.push(new cs(y))},s);let c=[];for(let f=n;f<i;f++)c.push(new cs(o.maps[f]));let u=this.items.slice(0,s).append(c).append(r),d=new Hr(u,a);return d.emptyItemCount()>Tse&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=e)s.push(i),i.selection&&o++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&o++;let d=new cs(c.invert(),l,u),f,p=s.length-1;(f=s.length&&s[p].merge(d))?s[p]=f:s.push(d)}}else i.map&&r--},this.items.length,0),new Hr(Jt.from(s.reverse()),o)}}Hr.empty=new Hr(Jt.empty,0);function Pse(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class cs{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new cs(n.getMap().invert(),n,this.selection)}}}class vo{constructor(e,n,r,s,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const _se=20;function Nse(t,e,n,r){let s=n.getMeta(ta),o;if(s)return s.historyState;n.getMeta(Ase)&&(t=new vo(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(ta))return i.getMeta(ta).redo?new vo(t.done.addTransform(n,void 0,r,jh(e)),t.undone,EP(n.mapping.maps),t.prevTime,t.prevComposition):new vo(t.done,t.undone.addTransform(n,void 0,r,jh(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Rse(n,t.prevRanges)),c=i?Zy(t.prevRanges,n.mapping):EP(n.mapping.maps);return new vo(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,jh(e)),Hr.empty,c,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new vo(t.done.rebased(n,o),t.undone.rebased(n,o),Zy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new vo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Zy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Rse(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(n=!0)}),n}function EP(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,o,i)=>e.push(o,i));return e}function Zy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),o=e.map(t[r+1],-1);s<=o&&n.push(s,o)}return n}function Mse(t,e,n){let r=jh(e),s=ta.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),l=new vo(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(ta,{redo:n,historyState:l})}let ev=!1,kP=null;function jh(t){let e=t.plugins;if(kP!=e){ev=!1,kP=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){ev=!0;break}}return ev}const ta=new Ps("history"),Ase=new Ps("closeHistory");function Ose(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xn({key:ta,state:{init(){return new vo(Hr.empty,Hr.empty,null,0,-1)},apply(e,n,r){return Nse(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?Q2:r=="historyRedo"?X2:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function Y2(t,e){return(n,r)=>{let s=ta.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let o=Mse(s,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const Q2=Y2(!1,!0),X2=Y2(!0,!0),jse=jn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Q2(t,e),redo:()=>({state:t,dispatch:e})=>X2(t,e)}},addProseMirrorPlugins(){return[Ose(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Dse=ns.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",On(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:s}=n,o=t();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):Yne(n)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:i,dispatch:a})=>{var l;if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(Oe.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(ke.create(i.doc,c.pos)):i.setSelection(Oe.create(i.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(i.insert(u,d),i.setSelection(Oe.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Pre({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Ise=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Lse=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Fse=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$se=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Bse=oi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[mc({find:Ise,type:this.type}),mc({find:Fse,type:this.type})]},addPasteRules(){return[gc({find:Lse,type:this.type}),gc({find:$se,type:this.type})]}}),zse=ns.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",On(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Vse="listItem",TP="textStyle",PP=/^(\d+)\.\s$/,Use=ns.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",On(this.options.HTMLAttributes,n),0]:["ol",On(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Vse,this.editor.getAttributes(TP)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ad({find:PP,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ad({find:PP,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(TP)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Wse=ns.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Hse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Kse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,qse=oi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",On(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[mc({find:Hse,type:this.type})]},addPasteRules(){return[gc({find:Kse,type:this.type})]}}),Gse=ns.create({name:"text",group:"inline"}),Jse=jn.create({name:"starterKit",addExtensions(){var t,e,n,r,s,o,i,a,l,c,u,d,f,p,y,m,w,v;const x=[];return this.options.bold!==!1&&x.push(nse.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&x.push(Qre.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&x.push(sse.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&x.push(ase.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&x.push(use.configure((s=this.options)===null||s===void 0?void 0:s.codeBlock)),this.options.document!==!1&&x.push(dse.configure((o=this.options)===null||o===void 0?void 0:o.document)),this.options.dropcursor!==!1&&x.push(pse.configure((i=this.options)===null||i===void 0?void 0:i.dropcursor)),this.options.gapcursor!==!1&&x.push(Sse.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&x.push(Cse.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&x.push(Ese.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&x.push(jse.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&x.push(Dse.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&x.push(Bse.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&x.push(zse.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&x.push(Use.configure((y=this.options)===null||y===void 0?void 0:y.orderedList)),this.options.paragraph!==!1&&x.push(Wse.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&x.push(qse.configure((w=this.options)===null||w===void 0?void 0:w.strike)),this.options.text!==!1&&x.push(Gse.configure((v=this.options)===null||v===void 0?void 0:v.text)),x}});function Yse({settings:t,onSettingChange:e}){var o,i,a,l;const[n,r]=g.useState(((o=t.welcome_instructions)==null?void 0:o.guidelines)||""),s=Kre({extensions:[Jse],content:n,onUpdate:({editor:c})=>{var d,f;const u=c.getHTML();console.log("Editor content updated:",u),r(u),e("welcome_instructions",{...t.welcome_instructions,title:((d=t.welcome_instructions)==null?void 0:d.title)||"Welcome to Palmtree Smokes",subtitle:((f=t.welcome_instructions)==null?void 0:f.subtitle)||"Please take a moment to review our store guidelines:",guidelines:u})}});return g.useEffect(()=>{var c,u,d,f;s&&((c=t.welcome_instructions)==null?void 0:c.guidelines)!==n&&(console.log("Settings guidelines changed:",(u=t.welcome_instructions)==null?void 0:u.guidelines),s.commands.setContent(((d=t.welcome_instructions)==null?void 0:d.guidelines)||""),r(((f=t.welcome_instructions)==null?void 0:f.guidelines)||""))},[s,(i=t.welcome_instructions)==null?void 0:i.guidelines]),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"welcome-title",children:"Welcome Title"}),h.jsx(Fe,{id:"welcome-title",value:((a=t.welcome_instructions)==null?void 0:a.title)||"",onChange:c=>e("welcome_instructions",{...t.welcome_instructions,title:c.target.value}),placeholder:"Welcome Title"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"welcome-subtitle",children:"Welcome Subtitle"}),h.jsx(Fe,{id:"welcome-subtitle",value:((l=t.welcome_instructions)==null?void 0:l.subtitle)||"",onChange:c=>e("welcome_instructions",{...t.welcome_instructions,subtitle:c.target.value}),placeholder:"Welcome Subtitle"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{children:"Guidelines"}),h.jsx("div",{className:"border border-input rounded-md p-4",children:h.jsx(Dre,{editor:s,className:"min-h-[200px] prose prose-sm max-w-none"})})]})]})}const Qse=({settings:t,onSettingChange:e})=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"storefront_password",children:"Storefront Password"}),h.jsx(Fe,{id:"storefront_password",type:"password",value:t.storefront_password||"",onChange:n=>e("storefront_password",n.target.value),placeholder:"Enter storefront password"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"This password is required to access the storefront"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(_e,{htmlFor:"admin_password",children:"Admin Password"}),h.jsx(Fe,{id:"admin_password",type:"password",value:t.admin_password||"",onChange:n=>e("admin_password",n.target.value),placeholder:"Enter admin password"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"This password is required to access the admin panel"})]})]});function Xse(t){return typeof t=="object"&&t!==null&&typeof t.title=="string"&&typeof t.subtitle=="string"&&typeof t.guidelines=="string"}function Zse(){const[t,e]=g.useState({id:"",logo_url:"",logo_url_webp:"",favicon_url:"",favicon_png_url:"",pwa_name:"",pwa_description:"",pwa_theme_color:"",pwa_background_color:"",primary_color:"#FF69B4",secondary_color:"#00A86B",font_family:"",storefront_password:"",admin_password:"",pwa_short_name:"",pwa_display:"standalone",pwa_orientation:"portrait",pwa_scope:"/",pwa_start_url:"/",pwa_icons:[],pwa_desktop_screenshot:"",pwa_mobile_screenshot:"",og_title:"",og_description:"",og_image:"",og_image_webp:"",og_url:"https://palmtreesmokes.com",show_site_logo:!0,show_site_description:!0,site_description:"Welcome to Palmtree Smokes, your premium destination for quality cannabis products. Browse our carefully curated selection below.",header_color:"#FFFFFF",header_opacity:1,toolbar_color:"#FFFFFF",toolbar_opacity:1,welcome_instructions:{title:"Welcome to Palmtree Smokes",subtitle:"Please take a moment to review our store guidelines:",guidelines:""},background_color:"#FFFFFF",background_opacity:1});g.useEffect(()=>{n()},[]),g.useEffect(()=>{QQ({primary:t.primary_color,secondary:t.secondary_color,background:t.pwa_background_color,foreground:t.pwa_theme_color})},[t.primary_color,t.secondary_color,t.pwa_background_color,t.pwa_theme_color]);const n=async()=>{try{const{data:o,error:i}=await we.from("site_settings").select("*").single();if(i)throw i;if(o){const a=Array.isArray(o.pwa_icons)?o.pwa_icons.map(u=>({src:u.src||"",sizes:u.sizes||"",type:u.type||"",purpose:u.purpose||"any",webp:u.webp||""})):[],l={title:"Welcome to Palmtree Smokes",subtitle:"Please take a moment to review our store guidelines:",guidelines:""},c=Xse(o.welcome_instructions)?o.welcome_instructions:l;e({...o,pwa_icons:a,welcome_instructions:c})}}catch(o){console.error("Error fetching settings:",o),ve.error("Failed to load settings")}},r=(o,i)=>{e(a=>({...a,[o]:i}))},s=async o=>{o.preventDefault();try{const i={...t,welcome_instructions:{title:t.welcome_instructions.title,subtitle:t.welcome_instructions.subtitle,guidelines:t.welcome_instructions.guidelines}},{error:a}=await we.from("site_settings").update(i).eq("id",t.id);if(a)throw a;ve.success("Settings updated successfully");const l=document.querySelector('meta[property="og:image"]'),c=document.querySelector('meta[property="og:url"]');if(l){const u="https://fwsdoiaodphgyeteafbq.supabase.co/storage/v1/object/public/media/sitesettings/og-image.png";console.log("Setting og:image meta tag to:",u),l.setAttribute("content",u)}c&&t.og_url&&(console.log("Setting og:url meta tag to:",t.og_url),c.setAttribute("content",t.og_url))}catch(i){console.error("Error updating settings:",i),ve.error("Failed to update settings")}};return h.jsx("div",{className:"w-full max-w-6xl pl-6 mt-6",children:h.jsxs("form",{onSubmit:s,className:"space-y-6",children:[h.jsxs(iS,{defaultValue:"colors",className:"w-full",children:[h.jsxs(Km,{className:"w-full h-auto flex-wrap gap-2 bg-background border p-2",children:[h.jsx(Un,{value:"colors",className:"flex-1",children:"Colors"}),h.jsx(Un,{value:"site",className:"flex-1",children:"Site Settings"}),h.jsx(Un,{value:"welcome",className:"flex-1",children:"Welcome"}),h.jsx(Un,{value:"passwords",className:"flex-1",children:"Passwords"}),h.jsx(Un,{value:"pwa",className:"flex-1",children:"PWA Settings"}),h.jsx(Un,{value:"og",className:"flex-1",children:"Open Graph"})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx(Wn,{value:"colors",className:"space-y-4",children:h.jsx(XQ,{settings:t,onSettingChange:r})}),h.jsx(Wn,{value:"site",children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(sX,{settings:t,onSettingChange:r}),h.jsx(oX,{settings:t,onSettingChange:r})]})}),h.jsx(Wn,{value:"welcome",className:"space-y-4",children:h.jsx(Yse,{settings:t,onSettingChange:r})}),h.jsx(Wn,{value:"passwords",className:"space-y-4",children:h.jsx(Qse,{settings:t,onSettingChange:r})}),h.jsx(Wn,{value:"pwa",className:"space-y-6",children:h.jsx(NX,{settings:t,onSettingChange:r})}),h.jsx(Wn,{value:"og",className:"space-y-4",children:h.jsx(iX,{settings:t,onSettingChange:r})})]})]}),h.jsx(xe,{type:"submit",className:"w-full",children:"Save Settings"})]})})}function eoe(){const[t,e]=g.useState(!1),[n,r]=g.useState(""),[s,o]=g.useState(!0),[i,a]=g.useState(""),[l,c]=g.useState("#FFFFFF"),[u,d]=g.useState("1"),f=fR();g.useEffect(()=>{const w=async()=>{try{localStorage.getItem("adminAuth")==="true"&&i&&e(!0),o(!1)}catch(v){console.error("Error checking auth state:",v),o(!1)}};p(),w()},[i]),g.useEffect(()=>{(async()=>{try{const{data:v,error:x}=await we.from("site_settings").select("background_color, background_opacity").single();if(x)throw x;v&&(c(v.background_color||"#FFFFFF"),d(String(v.background_opacity||"1")),document.body.style.backgroundColor=v.background_color||"#FFFFFF",document.body.style.opacity=String(v.background_opacity||"1"))}catch(v){console.error("Error fetching background settings:",v)}})()},[]);const p=async()=>{try{const{data:w,error:v}=await we.from("site_settings").select("admin_password").single();if(v)throw v;w!=null&&w.admin_password&&a(w.admin_password),o(!1)}catch(w){console.error("Error fetching admin password:",w),ve.error("Failed to load admin settings"),o(!1)}},y=w=>{if(w.preventDefault(),!i){ve.error("Admin password not set. Please set it in Site Settings first.");return}n===i?(e(!0),localStorage.setItem("adminAuth","true"),ve.success("Welcome to admin dashboard")):ve.error("Invalid password")},m=()=>{e(!1),localStorage.removeItem("adminAuth"),ve.success("Logged out successfully")};return s?h.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:l,opacity:u},children:h.jsx("div",{className:"text-center",children:h.jsx("p",{children:"Loading..."})})}):t?h.jsx("div",{className:"min-h-screen",style:{backgroundColor:l,opacity:u},children:h.jsxs("div",{className:"container mx-auto p-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),h.jsxs("div",{className:"space-x-2",children:[h.jsx(xe,{variant:"outline",onClick:m,children:"Logout"}),h.jsx(xe,{variant:"outline",onClick:()=>f("/"),children:"Back to Site"})]})]}),h.jsxs(iS,{defaultValue:"products",className:"space-y-4",children:[h.jsxs(Km,{children:[h.jsx(Un,{value:"products",children:"Products"}),h.jsx(Un,{value:"categories",children:"Categories"}),h.jsx(Un,{value:"settings",children:"Site Settings"})]}),h.jsx(Wn,{value:"products",className:"space-y-4",children:h.jsx(qQ,{})}),h.jsx(Wn,{value:"categories",className:"space-y-4",children:h.jsx(YQ,{})}),h.jsx(Wn,{value:"settings",className:"space-y-4",children:h.jsx(Zse,{})})]})]})}):h.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:l,opacity:u},children:h.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-3xl font-bold",children:"Admin Login"}),h.jsx("p",{className:"mt-2 text-gray-600",children:"Enter password to access admin panel"})]}),h.jsxs("form",{onSubmit:y,className:"mt-8 space-y-6",children:[h.jsx(Fe,{type:"password",value:n,onChange:w=>r(w.target.value),placeholder:"Enter admin password",className:"w-full"}),h.jsx(xe,{type:"submit",className:"w-full",children:"Login"}),h.jsx(xe,{type:"button",variant:"outline",className:"w-full",onClick:()=>f("/"),children:"Back to Home"})]})]})})}var toe="Toggle",Z2=g.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:s,...o}=t,[i=!1,a]=Qr({prop:n,onChange:s,defaultProp:r});return h.jsx(be.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:e,onClick:se(t.onClick,()=>{t.disabled||a(!i)})})});Z2.displayName=toe;var eF=Z2;const noe=Sa("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),tF=g.forwardRef(({className:t,variant:e,size:n,...r},s)=>h.jsx(eF,{ref:s,className:ie(noe({variant:e,size:n,className:t})),...r}));tF.displayName=eF.displayName;const roe=({imageUrl:t,videoUrl:e,productName:n,webpUrl:r})=>{const[s,o]=g.useState(!1),[i,a]=g.useState(!!e),[l,c]=g.useState(!!e),[u,d]=g.useState(!1),f=async(w,v)=>{try{const b=await(await fetch(w)).blob(),C=window.URL.createObjectURL(b),E=document.createElement("a");E.href=C,E.download=`${name}-${v}.${v==="image"?"png":"mp4"}`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(C)}catch(x){console.error("Error downloading file:",x)}},p=()=>{a(!i),c(!i)},y=()=>{console.log("WebP image failed to load, falling back to PNG"),d(!0)},m=()=>h.jsxs("picture",{children:[r&&!u&&h.jsx("source",{srcSet:r,type:"image/webp",onError:y}),t&&h.jsx("img",{src:t,alt:n,className:"w-full h-full object-cover rounded-lg"})]});return h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden",children:e&&i?h.jsx("video",{src:e,controls:!0,autoPlay:l,className:"w-full h-full object-cover"}):m()}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("div",{className:"flex gap-2",children:e&&h.jsx(tF,{pressed:i,onPressedChange:p,size:"sm",children:i?h.jsx(sM,{className:"h-4 w-4"}):h.jsx(wm,{className:"h-4 w-4"})})}),h.jsxs("div",{className:"flex gap-2",children:[t&&h.jsxs(xe,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-8",onClick:()=>f(t,"image"),children:[h.jsx(tc,{className:"h-3 w-3 mr-1"}),"Download Image"]}),e&&h.jsxs(xe,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-8",onClick:()=>f(e,"video"),children:[h.jsx(tc,{className:"h-3 w-3 mr-1"}),"Download Video"]})]})]}),h.jsx(cS,{open:s,onOpenChange:o,children:h.jsx(qm,{className:"max-w-4xl w-full p-0",children:e&&i?h.jsx("video",{src:e,controls:!0,autoPlay:l,className:"w-full h-full object-cover"}):h.jsxs("picture",{children:[r&&!u&&h.jsx("source",{srcSet:r,type:"image/webp",onError:y}),h.jsx("img",{src:t,alt:n,className:"w-full h-full object-contain"})]})})})]})},soe=Sa("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ooe({className:t,variant:e,...n}){return h.jsx("div",{className:ie(soe({variant:e}),t),...n})}const ioe=({name:t,description:e,categories:n,strain:r,regularPrice:s,shippingPrice:o,stock:i})=>{const a=di();return h.jsxs("div",{className:`space-y-${a?"3":"6"}`,children:[h.jsxs("div",{children:[h.jsx("h1",{className:`${a?"text-xl":"text-3xl"} font-bold mb-2`,children:t}),e&&h.jsx("p",{className:"text-gray-600 text-sm",children:e})]}),(n==null?void 0:n.length)>0&&h.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(l=>h.jsx(ooe,{variant:"secondary",className:"text-xs",children:l},l))}),r&&h.jsxs("div",{children:[h.jsx("h3",{className:`${a?"text-base":"text-lg"} font-semibold mb-1`,children:"Strain"}),h.jsx("p",{className:"text-sm",children:r})]}),s!==void 0&&s>0&&h.jsxs("div",{children:[h.jsx("h3",{className:`${a?"text-base":"text-lg"} font-semibold mb-1`,children:"Price"}),h.jsxs("p",{className:`${a?"text-xl":"text-2xl"} font-bold`,children:["$",s.toFixed(2)]}),o!==void 0&&o>0&&h.jsxs("p",{className:"text-xs text-gray-600",children:["+ $",o.toFixed(2)," shipping"]})]}),i!==void 0&&i>0&&h.jsxs("div",{children:[h.jsx("h3",{className:`${a?"text-base":"text-lg"} font-semibold mb-1`,children:"Stock"}),h.jsxs("p",{className:"text-sm",children:[i," available"]})]})]})};function aoe(){var i;const{id:t}=Zz(),e=fR(),n=di(),{data:r,isLoading:s,error:o}=Tc({queryKey:["product",t],queryFn:async()=>{var u;console.log("ProductDetails: Fetching product details for ID:",t);const{data:a,error:l}=await we.from("products").select(`
          *,
          product_categories (
            category:categories(name)
          )
        `).eq("id",t).single();if(l)throw console.error("ProductDetails: Error fetching product:",l),l;const c={...a,categories:((u=a.product_categories)==null?void 0:u.map(d=>{var f;return(f=d.category)==null?void 0:f.name}).filter(Boolean))||[],media:typeof a.media=="string"?JSON.parse(a.media):a.media};return console.log("ProductDetails: Successfully fetched product:",c),c},enabled:!!t});return s?h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("p",{className:"text-gray-500",children:"Loading product details..."})}):o?(console.error("ProductDetails: Error rendering product:",o),h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("p",{className:"text-red-500",children:"Error loading product details. Please try again later."})})):r?h.jsxs("div",{className:`container mx-auto ${n?"px-2 py-2":"px-4 py-8"} h-full overflow-hidden`,children:[h.jsxs(xe,{variant:"ghost",className:`${n?"mb-2":"mb-6"}`,onClick:()=>e(-1),children:[h.jsx(zx,{className:"h-4 w-4 mr-2"}),"Back"]}),h.jsxs("div",{className:`grid ${n?"grid-rows-[auto_1fr] gap-2":"grid-cols-2 gap-8"} h-[calc(100vh-4rem)]`,children:[h.jsx("div",{className:`${n?"h-[45vh]":"md:sticky md:top-24"} overflow-hidden`,children:h.jsx(roe,{imageUrl:r.image_url,videoUrl:r.video_url,productName:r.name,webpUrl:(i=r.media)==null?void 0:i.webp})}),h.jsx("div",{className:`${n?"h-[45vh]":""} overflow-y-auto`,children:h.jsx(ioe,{name:r.name,description:r.description,categories:r.categories,strain:r.strain,regularPrice:r.regular_price,shippingPrice:r.shipping_price,stock:r.stock})})]})]}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("p",{className:"text-gray-500",children:"Product not found."})})}console.log("router.tsx: Initializing router configuration");const loe=p4([{path:"/",element:h.jsx(Lq,{})},{path:"/admin",element:h.jsx(eoe,{})},{path:"/products/:id",element:h.jsx(aoe,{}),errorElement:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsx("h2",{className:"text-xl font-semibold text-red-500",children:"Error loading product"}),h.jsx("p",{className:"text-gray-600 mt-2",children:"Could not load product details. Please try again later."})]})}]);var ZS="ToastProvider",[e1,coe,uoe]=Dm("Toast"),[nF,oie]=Es("Toast",[uoe]),[doe,pg]=nF(ZS),rF=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ZS}\`. Expected non-empty \`string\`.`),h.jsx(e1.Provider,{scope:e,children:h.jsx(doe,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(p=>p+1),[]),onToastRemove:g.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:i})})};rF.displayName=ZS;var sF="ToastViewport",foe=["F8"],Rw="toast.viewportPause",Mw="toast.viewportResume",oF=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=foe,label:s="Notifications ({hotkey})",...o}=t,i=pg(sF,n),a=coe(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=$e(e,d,i.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;g.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(C=>v[C]||v.code===C)&&((b=d.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),g.useEffect(()=>{const w=l.current,v=d.current;if(y&&w&&v){const x=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(Rw);v.dispatchEvent(k),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(Mw);v.dispatchEvent(k),i.isClosePausedRef.current=!1}},C=k=>{!w.contains(k.relatedTarget)&&b()},E=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",C),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",E),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,i.isClosePausedRef]);const m=g.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const C=b.ref.current,E=[C,...koe(C)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return g.useEffect(()=>{const w=d.current;if(w){const v=x=>{var E,k,P;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const S=document.activeElement,T=x.shiftKey;if(x.target===w&&T){(E=c.current)==null||E.focus();return}const j=m({tabbingDirection:T?"backwards":"forwards"}),V=j.findIndex(B=>B===S);tv(j.slice(V+1))?x.preventDefault():T?(k=c.current)==null||k.focus():(P=u.current)==null||P.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),h.jsxs(TV,{ref:l,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&h.jsx(Aw,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});tv(w)}}),h.jsx(e1.Slot,{scope:n,children:h.jsx(be.ol,{tabIndex:-1,...o,ref:f})}),y&&h.jsx(Aw,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});tv(w)}})]})});oF.displayName=sF;var iF="ToastFocusProxy",Aw=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=pg(iF,n);return h.jsx(Bm,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=o.viewport)!=null&&c.contains(a))&&r()}})});Aw.displayName=iF;var mg="Toast",hoe="toast.swipeStart",poe="toast.swipeMove",moe="toast.swipeCancel",goe="toast.swipeEnd",aF=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=t,[a=!0,l]=Qr({prop:r,defaultProp:s,onChange:o});return h.jsx(dn,{present:n||a,children:h.jsx(woe,{open:a,...i,ref:e,onClose:()=>l(!1),onPause:wt(t.onPause),onResume:wt(t.onResume),onSwipeStart:se(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:se(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:se(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:se(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});aF.displayName=mg;var[yoe,voe]=nF(mg,{onClose(){}}),woe=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...y}=t,m=pg(mg,n),[w,v]=g.useState(null),x=$e(e,B=>v(B)),b=g.useRef(null),C=g.useRef(null),E=s||m.duration,k=g.useRef(0),P=g.useRef(E),S=g.useRef(0),{onToastAdd:T,onToastRemove:_}=m,R=wt(()=>{var te;(w==null?void 0:w.contains(document.activeElement))&&((te=m.viewport)==null||te.focus()),i()}),j=g.useCallback(B=>{!B||B===1/0||(window.clearTimeout(S.current),k.current=new Date().getTime(),S.current=window.setTimeout(R,B))},[R]);g.useEffect(()=>{const B=m.viewport;if(B){const te=()=>{j(P.current),c==null||c()},K=()=>{const I=new Date().getTime()-k.current;P.current=P.current-I,window.clearTimeout(S.current),l==null||l()};return B.addEventListener(Rw,K),B.addEventListener(Mw,te),()=>{B.removeEventListener(Rw,K),B.removeEventListener(Mw,te)}}},[m.viewport,E,l,c,j]),g.useEffect(()=>{o&&!m.isClosePausedRef.current&&j(E)},[o,E,m.isClosePausedRef,j]),g.useEffect(()=>(T(),()=>_()),[T,_]);const V=g.useMemo(()=>w?pF(w):null,[w]);return m.viewport?h.jsxs(h.Fragment,{children:[V&&h.jsx(xoe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),h.jsx(yoe,{scope:n,onClose:R,children:Cs.createPortal(h.jsx(e1.ItemSlot,{scope:n,children:h.jsx(kV,{asChild:!0,onEscapeKeyDown:se(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||R(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:se(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:se(t.onPointerDown,B=>{B.button===0&&(b.current={x:B.clientX,y:B.clientY})}),onPointerMove:se(t.onPointerMove,B=>{if(!b.current)return;const te=B.clientX-b.current.x,K=B.clientY-b.current.y,I=!!C.current,N=["left","right"].includes(m.swipeDirection),O=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,$=N?O(0,te):0,U=N?0:O(0,K),M=B.pointerType==="touch"?10:2,F={x:$,y:U},J={originalEvent:B,delta:F};I?(C.current=F,dh(poe,d,J,{discrete:!1})):_P(F,m.swipeDirection,M)?(C.current=F,dh(hoe,u,J,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(te)>M||Math.abs(K)>M)&&(b.current=null)}),onPointerUp:se(t.onPointerUp,B=>{const te=C.current,K=B.target;if(K.hasPointerCapture(B.pointerId)&&K.releasePointerCapture(B.pointerId),C.current=null,b.current=null,te){const I=B.currentTarget,N={originalEvent:B,delta:te};_P(te,m.swipeDirection,m.swipeThreshold)?dh(goe,p,N,{discrete:!0}):dh(moe,f,N,{discrete:!0}),I.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),xoe=t=>{const{__scopeToast:e,children:n,...r}=t,s=pg(mg,e),[o,i]=g.useState(!1),[a,l]=g.useState(!1);return Coe(()=>i(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Sc,{asChild:!0,children:h.jsx(Bm,{...r,children:o&&h.jsxs(h.Fragment,{children:[s.label," ",n]})})})},boe="ToastTitle",lF=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(be.div,{...r,ref:e})});lF.displayName=boe;var Soe="ToastDescription",cF=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(be.div,{...r,ref:e})});cF.displayName=Soe;var uF="ToastAction",dF=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?h.jsx(hF,{altText:n,asChild:!0,children:h.jsx(t1,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${uF}\`. Expected non-empty \`string\`.`),null)});dF.displayName=uF;var fF="ToastClose",t1=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=voe(fF,n);return h.jsx(hF,{asChild:!0,children:h.jsx(be.button,{type:"button",...r,ref:e,onClick:se(t.onClick,s.onClose)})})});t1.displayName=fF;var hF=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return h.jsx(be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function pF(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Eoe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...pF(r))}}),e}function dh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?jx(s,o):s.dispatchEvent(o)}var _P=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function Coe(t=()=>{}){const e=wt(t);un(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Eoe(t){return t.nodeType===t.ELEMENT_NODE}function koe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tv(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Toe=rF,mF=oF,gF=aF,yF=lF,vF=cF,wF=dF,xF=t1;const Poe=Toe,bF=g.forwardRef(({className:t,...e},n)=>h.jsx(mF,{ref:n,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));bF.displayName=mF.displayName;const _oe=Sa("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),SF=g.forwardRef(({className:t,variant:e,...n},r)=>h.jsx(gF,{ref:r,className:ie(_oe({variant:e}),t),...n}));SF.displayName=gF.displayName;const Noe=g.forwardRef(({className:t,...e},n)=>h.jsx(wF,{ref:n,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Noe.displayName=wF.displayName;const CF=g.forwardRef(({className:t,...e},n)=>h.jsx(xF,{ref:n,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:h.jsx(ui,{className:"h-4 w-4"})}));CF.displayName=xF.displayName;const EF=g.forwardRef(({className:t,...e},n)=>h.jsx(yF,{ref:n,className:ie("text-sm font-semibold",t),...e}));EF.displayName=yF.displayName;const kF=g.forwardRef(({className:t,...e},n)=>h.jsx(vF,{ref:n,className:ie("text-sm opacity-90",t),...e}));kF.displayName=vF.displayName;function Roe(){const{toasts:t}=Ub();return h.jsxs(Poe,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return h.jsxs(SF,{...o,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(EF,{children:n}),r&&h.jsx(kF,{children:r})]}),s,h.jsx(CF,{})]},e)}),h.jsx(bF,{})]})}const Moe=({deferredPrompt:t,onClose:e})=>{console.log("PWAInstallPrompt: Rendering install prompt component");const n=async()=>{if(console.log("PWAInstallPrompt: Install button clicked"),t)try{await t.prompt();const r=await t.userChoice;console.log("PWAInstallPrompt: User choice result:",r.outcome),r.outcome==="accepted"&&DO({title:"Installing PWA",description:"Thank you for installing our app!"})}catch(r){console.error("PWAInstallPrompt: Error showing install prompt:",r)}e()};return h.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 border border-gray-200 dark:border-gray-700 z-50",children:h.jsxs("div",{className:"flex flex-col space-y-3",children:[h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Install Palmtree Smokes"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Install our app for a better experience"})]})}),h.jsxs("div",{className:"flex space-x-3",children:[h.jsx(xe,{variant:"outline",onClick:e,className:"flex-1",children:"Not now"}),h.jsx(xe,{onClick:n,className:"flex-1",children:"Install"})]})]})})};function Aoe(){const[t,e]=g.useState(!1),[n,r]=g.useState(null);g.useEffect(()=>{const o=i=>{console.log("App: Captured beforeinstallprompt event"),r(window.deferredPrompt),e(!0)};return window.addEventListener("beforeinstallprompt",o),window.deferredPrompt&&(r(window.deferredPrompt),e(!0)),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]),g.useEffect(()=>{(async()=>{try{if(console.log("App: Fetching site settings..."),!we)throw new Error("Supabase client is not initialized");const{data:i,error:a}=await we.from("site_settings").select("id").limit(1).single();if(a)throw console.error("App: Error testing Supabase connection:",a),a;console.log("App: Supabase connection successful, fetching favicon settings");const{data:l,error:c}=await we.from("site_settings").select("favicon_url, favicon_webp_url, favicon_png_url").single();if(c)throw console.error("App: Error fetching favicon settings:",c),c;if(l){console.log("App: Successfully fetched favicon settings:",l);const u=document.querySelector("link[rel*='icon']")||document.createElement("link");if(u.type="image/x-icon",u.rel="shortcut icon",u.href=l.favicon_url,document.getElementsByTagName("head")[0].appendChild(u),l.favicon_png_url){console.log("App: Setting PNG favicon:",l.favicon_png_url);const d=document.createElement("link");d.type="image/png",d.rel="icon",d.href=l.favicon_png_url,document.getElementsByTagName("head")[0].appendChild(d)}if(l.favicon_webp_url){console.log("App: Setting WebP favicon:",l.favicon_webp_url);const d=document.createElement("link");d.type="image/webp",d.rel="icon",d.href=l.favicon_webp_url,document.getElementsByTagName("head")[0].appendChild(d)}}}catch(i){console.error("App: Critical error fetching site settings:",i),ve.error("Failed to load site settings. Please refresh the page or contact support if the issue persists.")}})()},[]);const s=()=>{console.log("App: Closing install prompt"),e(!1)};return h.jsxs(h.Fragment,{children:[h.jsx(C4,{router:loe}),t&&n&&h.jsx(Moe,{deferredPrompt:n,onClose:s}),h.jsx(Roe,{}),h.jsx(kG,{position:"top-center"})]})}console.log("Application initialization starting in environment:","production");const Ooe=new u8({defaultOptions:{queries:{retry:1,meta:{onError:t=>{console.error("Query error:",t)}}}}});window.deferredPrompt=null;window.addEventListener("beforeinstallprompt",t=>{console.log("PWA: beforeinstallprompt event fired"),t.preventDefault(),window.deferredPrompt=t});window.addEventListener("appinstalled",()=>{console.log("PWA: Application was installed"),window.deferredPrompt=null});window.addEventListener("load",()=>{console.log("PWA: Scrolling to top on load"),window.scrollTo(0,0)});"serviceWorker"in navigator?window.addEventListener("load",()=>{console.log("Attempting to register service worker..."),navigator.serviceWorker.register("/sw.js").then(t=>{console.log("ServiceWorker registration successful with scope:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&console.log("New content is available; please refresh.")})})}).catch(t=>{console.error("ServiceWorker registration failed: ",t)})}):console.log("ServiceWorker is not supported in this browser");console.log("Mounting React application...");nv.createRoot(document.getElementById("root")).render(h.jsx(ee.StrictMode,{children:h.jsx(p8,{client:Ooe,children:h.jsx(Aoe,{})})}));console.log("React application mounted");export{Ow as g};
